(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Bo(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const Fe={},Hn=[],Ut=()=>{},_a=()=>!1,ki=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),No=e=>e.startsWith("onUpdate:"),mt=Object.assign,$o=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Gu=Object.prototype.hasOwnProperty,Me=(e,t)=>Gu.call(e,t),me=Array.isArray,Vn=e=>kr(e)==="[object Map]",Ti=e=>kr(e)==="[object Set]",Ks=e=>kr(e)==="[object Date]",_e=e=>typeof e=="function",Ye=e=>typeof e=="string",Vt=e=>typeof e=="symbol",Ke=e=>e!==null&&typeof e=="object",wa=e=>(Ke(e)||_e(e))&&_e(e.then)&&_e(e.catch),xa=Object.prototype.toString,kr=e=>xa.call(e),Yu=e=>kr(e).slice(8,-1),Sa=e=>kr(e)==="[object Object]",Lo=e=>Ye(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,pr=Bo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ei=e=>{const t=Object.create(null);return(r=>t[r]||(t[r]=e(r)))},Xu=/-\w/g,gn=Ei(e=>e.replace(Xu,t=>t.slice(1).toUpperCase())),Ju=/\B([A-Z])/g,Rn=Ei(e=>e.replace(Ju,"-$1").toLowerCase()),Ca=Ei(e=>e.charAt(0).toUpperCase()+e.slice(1)),go=Ei(e=>e?`on${Ca(e)}`:""),mn=(e,t)=>!Object.is(e,t),ii=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},Pa=(e,t,r,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:r})},di=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Bs;const Oi=()=>Bs||(Bs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function qo(e){if(me(e)){const t={};for(let r=0;r<e.length;r++){const o=e[r],a=Ye(o)?tl(o):qo(o);if(a)for(const l in a)t[l]=a[l]}return t}else if(Ye(e)||Ke(e))return e}const Qu=/;(?![^(]*\))/g,Zu=/:([^]+)/,el=/\/\*[^]*?\*\//g;function tl(e){const t={};return e.replace(el,"").split(Qu).forEach(r=>{if(r){const o=r.split(Zu);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Qn(e){let t="";if(Ye(e))t=e;else if(me(e))for(let r=0;r<e.length;r++){const o=Qn(e[r]);o&&(t+=o+" ")}else if(Ke(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const nl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rl=Bo(nl);function ka(e){return!!e||e===""}function il(e,t){if(e.length!==t.length)return!1;let r=!0;for(let o=0;r&&o<e.length;o++)r=Ai(e[o],t[o]);return r}function Ai(e,t){if(e===t)return!0;let r=Ks(e),o=Ks(t);if(r||o)return r&&o?e.getTime()===t.getTime():!1;if(r=Vt(e),o=Vt(t),r||o)return e===t;if(r=me(e),o=me(t),r||o)return r&&o?il(e,t):!1;if(r=Ke(e),o=Ke(t),r||o){if(!r||!o)return!1;const a=Object.keys(e).length,l=Object.keys(t).length;if(a!==l)return!1;for(const f in e){const h=e.hasOwnProperty(f),m=t.hasOwnProperty(f);if(h&&!m||!h&&m||!Ai(e[f],t[f]))return!1}}return String(e)===String(t)}function ol(e,t){return e.findIndex(r=>Ai(r,t))}const Ta=e=>!!(e&&e.__v_isRef===!0),Ve=e=>Ye(e)?e:e==null?"":me(e)||Ke(e)&&(e.toString===xa||!_e(e.toString))?Ta(e)?Ve(e.value):JSON.stringify(e,Ea,2):String(e),Ea=(e,t)=>Ta(t)?Ea(e,t.value):Vn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[o,a],l)=>(r[vo(o,l)+" =>"]=a,r),{})}:Ti(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>vo(r))}:Vt(t)?vo(t):Ke(t)&&!me(t)&&!Sa(t)?String(t):t,vo=(e,t="")=>{var r;return Vt(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wt;class sl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=wt,!t&&wt&&(this.index=(wt.scopes||(wt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=wt;try{return wt=this,t()}finally{wt=r}}}on(){++this._on===1&&(this.prevScope=wt,wt=this)}off(){this._on>0&&--this._on===0&&(wt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let r,o;for(r=0,o=this.effects.length;r<o;r++)this.effects[r].stop();for(this.effects.length=0,r=0,o=this.cleanups.length;r<o;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,o=this.scopes.length;r<o;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function al(){return wt}let Ie;const yo=new WeakSet;class Oa{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,wt&&wt.active&&wt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,yo.has(this)&&(yo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ma(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ns(this),Da(this);const t=Ie,r=It;Ie=this,It=!0;try{return this.fn()}finally{Ra(this),Ie=t,It=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ho(t);this.deps=this.depsTail=void 0,Ns(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?yo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ko(this)&&this.run()}get dirty(){return ko(this)}}let Aa=0,mr,gr;function Ma(e,t=!1){if(e.flags|=8,t){e.next=gr,gr=e;return}e.next=mr,mr=e}function Wo(){Aa++}function Uo(){if(--Aa>0)return;if(gr){let t=gr;for(gr=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;mr;){let t=mr;for(mr=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=r}}if(e)throw e}function Da(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ra(e){let t,r=e.depsTail,o=r;for(;o;){const a=o.prevDep;o.version===-1?(o===r&&(r=a),Ho(o),ul(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=a}e.deps=t,e.depsTail=r}function ko(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Fa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Fa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===wr)||(e.globalVersion=wr,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ko(e))))return;e.flags|=2;const t=e.dep,r=Ie,o=It;Ie=e,It=!0;try{Da(e);const a=e.fn(e._value);(t.version===0||mn(a,e._value))&&(e.flags|=128,e._value=a,t.version++)}catch(a){throw t.version++,a}finally{Ie=r,It=o,Ra(e),e.flags&=-3}}function Ho(e,t=!1){const{dep:r,prevSub:o,nextSub:a}=e;if(o&&(o.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=o,e.nextSub=void 0),r.subs===e&&(r.subs=o,!o&&r.computed)){r.computed.flags&=-5;for(let l=r.computed.deps;l;l=l.nextDep)Ho(l,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function ul(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let It=!0;const Ia=[];function en(){Ia.push(It),It=!1}function tn(){const e=Ia.pop();It=e===void 0?!0:e}function Ns(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=Ie;Ie=void 0;try{t()}finally{Ie=r}}}let wr=0;class ll{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ie||!It||Ie===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Ie)r=this.activeLink=new ll(Ie,this),Ie.deps?(r.prevDep=Ie.depsTail,Ie.depsTail.nextDep=r,Ie.depsTail=r):Ie.deps=Ie.depsTail=r,ja(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const o=r.nextDep;o.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=o),r.prevDep=Ie.depsTail,r.nextDep=void 0,Ie.depsTail.nextDep=r,Ie.depsTail=r,Ie.deps===r&&(Ie.deps=o)}return r}trigger(t){this.version++,wr++,this.notify(t)}notify(t){Wo();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Uo()}}}function ja(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)ja(o)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const To=new WeakMap,Dn=Symbol(""),Eo=Symbol(""),xr=Symbol("");function ht(e,t,r){if(It&&Ie){let o=To.get(e);o||To.set(e,o=new Map);let a=o.get(r);a||(o.set(r,a=new Vo),a.map=o,a.key=r),a.track()}}function Qt(e,t,r,o,a,l){const f=To.get(e);if(!f){wr++;return}const h=m=>{m&&m.trigger()};if(Wo(),t==="clear")f.forEach(h);else{const m=me(e),w=m&&Lo(r);if(m&&r==="length"){const b=Number(o);f.forEach((k,I)=>{(I==="length"||I===xr||!Vt(I)&&I>=b)&&h(k)})}else switch((r!==void 0||f.has(void 0))&&h(f.get(r)),w&&h(f.get(xr)),t){case"add":m?w&&h(f.get("length")):(h(f.get(Dn)),Vn(e)&&h(f.get(Eo)));break;case"delete":m||(h(f.get(Dn)),Vn(e)&&h(f.get(Eo)));break;case"set":Vn(e)&&h(f.get(Dn));break}}Uo()}function Wn(e){const t=Ae(e);return t===e?t:(ht(t,"iterate",xr),Dt(e)?t:t.map(it))}function Mi(e){return ht(e=Ae(e),"iterate",xr),e}const cl={__proto__:null,[Symbol.iterator](){return bo(this,Symbol.iterator,it)},concat(...e){return Wn(this).concat(...e.map(t=>me(t)?Wn(t):t))},entries(){return bo(this,"entries",e=>(e[1]=it(e[1]),e))},every(e,t){return Xt(this,"every",e,t,void 0,arguments)},filter(e,t){return Xt(this,"filter",e,t,r=>r.map(it),arguments)},find(e,t){return Xt(this,"find",e,t,it,arguments)},findIndex(e,t){return Xt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Xt(this,"findLast",e,t,it,arguments)},findLastIndex(e,t){return Xt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Xt(this,"forEach",e,t,void 0,arguments)},includes(...e){return _o(this,"includes",e)},indexOf(...e){return _o(this,"indexOf",e)},join(e){return Wn(this).join(e)},lastIndexOf(...e){return _o(this,"lastIndexOf",e)},map(e,t){return Xt(this,"map",e,t,void 0,arguments)},pop(){return fr(this,"pop")},push(...e){return fr(this,"push",e)},reduce(e,...t){return $s(this,"reduce",e,t)},reduceRight(e,...t){return $s(this,"reduceRight",e,t)},shift(){return fr(this,"shift")},some(e,t){return Xt(this,"some",e,t,void 0,arguments)},splice(...e){return fr(this,"splice",e)},toReversed(){return Wn(this).toReversed()},toSorted(e){return Wn(this).toSorted(e)},toSpliced(...e){return Wn(this).toSpliced(...e)},unshift(...e){return fr(this,"unshift",e)},values(){return bo(this,"values",it)}};function bo(e,t,r){const o=Mi(e),a=o[t]();return o!==e&&!Dt(e)&&(a._next=a.next,a.next=()=>{const l=a._next();return l.value&&(l.value=r(l.value)),l}),a}const fl=Array.prototype;function Xt(e,t,r,o,a,l){const f=Mi(e),h=f!==e&&!Dt(e),m=f[t];if(m!==fl[t]){const k=m.apply(e,l);return h?it(k):k}let w=r;f!==e&&(h?w=function(k,I){return r.call(this,it(k),I,e)}:r.length>2&&(w=function(k,I){return r.call(this,k,I,e)}));const b=m.call(f,w,o);return h&&a?a(b):b}function $s(e,t,r,o){const a=Mi(e);let l=r;return a!==e&&(Dt(e)?r.length>3&&(l=function(f,h,m){return r.call(this,f,h,m,e)}):l=function(f,h,m){return r.call(this,f,it(h),m,e)}),a[t](l,...o)}function _o(e,t,r){const o=Ae(e);ht(o,"iterate",xr);const a=o[t](...r);return(a===-1||a===!1)&&Xo(r[0])?(r[0]=Ae(r[0]),o[t](...r)):a}function fr(e,t,r=[]){en(),Wo();const o=Ae(e)[t].apply(e,r);return Uo(),tn(),o}const dl=Bo("__proto__,__v_isRef,__isVue"),Ka=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Vt));function hl(e){Vt(e)||(e=String(e));const t=Ae(this);return ht(t,"has",e),t.hasOwnProperty(e)}class Ba{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,o){if(r==="__v_skip")return t.__v_skip;const a=this._isReadonly,l=this._isShallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return l;if(r==="__v_raw")return o===(a?l?Sl:qa:l?La:$a).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const f=me(t);if(!a){let m;if(f&&(m=cl[r]))return m;if(r==="hasOwnProperty")return hl}const h=Reflect.get(t,r,pt(t)?t:o);return(Vt(r)?Ka.has(r):dl(r))||(a||ht(t,"get",r),l)?h:pt(h)?f&&Lo(r)?h:h.value:Ke(h)?a?Wa(h):Go(h):h}}class Na extends Ba{constructor(t=!1){super(!1,t)}set(t,r,o,a){let l=t[r];if(!this._isShallow){const m=vn(l);if(!Dt(o)&&!vn(o)&&(l=Ae(l),o=Ae(o)),!me(t)&&pt(l)&&!pt(o))return m||(l.value=o),!0}const f=me(t)&&Lo(r)?Number(r)<t.length:Me(t,r),h=Reflect.set(t,r,o,pt(t)?t:a);return t===Ae(a)&&(f?mn(o,l)&&Qt(t,"set",r,o):Qt(t,"add",r,o)),h}deleteProperty(t,r){const o=Me(t,r);t[r];const a=Reflect.deleteProperty(t,r);return a&&o&&Qt(t,"delete",r,void 0),a}has(t,r){const o=Reflect.has(t,r);return(!Vt(r)||!Ka.has(r))&&ht(t,"has",r),o}ownKeys(t){return ht(t,"iterate",me(t)?"length":Dn),Reflect.ownKeys(t)}}class pl extends Ba{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const ml=new Na,gl=new pl,vl=new Na(!0);const Oo=e=>e,ei=e=>Reflect.getPrototypeOf(e);function yl(e,t,r){return function(...o){const a=this.__v_raw,l=Ae(a),f=Vn(l),h=e==="entries"||e===Symbol.iterator&&f,m=e==="keys"&&f,w=a[e](...o),b=r?Oo:t?hi:it;return!t&&ht(l,"iterate",m?Eo:Dn),{next(){const{value:k,done:I}=w.next();return I?{value:k,done:I}:{value:h?[b(k[0]),b(k[1])]:b(k),done:I}},[Symbol.iterator](){return this}}}}function ti(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function bl(e,t){const r={get(a){const l=this.__v_raw,f=Ae(l),h=Ae(a);e||(mn(a,h)&&ht(f,"get",a),ht(f,"get",h));const{has:m}=ei(f),w=t?Oo:e?hi:it;if(m.call(f,a))return w(l.get(a));if(m.call(f,h))return w(l.get(h));l!==f&&l.get(a)},get size(){const a=this.__v_raw;return!e&&ht(Ae(a),"iterate",Dn),a.size},has(a){const l=this.__v_raw,f=Ae(l),h=Ae(a);return e||(mn(a,h)&&ht(f,"has",a),ht(f,"has",h)),a===h?l.has(a):l.has(a)||l.has(h)},forEach(a,l){const f=this,h=f.__v_raw,m=Ae(h),w=t?Oo:e?hi:it;return!e&&ht(m,"iterate",Dn),h.forEach((b,k)=>a.call(l,w(b),w(k),f))}};return mt(r,e?{add:ti("add"),set:ti("set"),delete:ti("delete"),clear:ti("clear")}:{add(a){!t&&!Dt(a)&&!vn(a)&&(a=Ae(a));const l=Ae(this);return ei(l).has.call(l,a)||(l.add(a),Qt(l,"add",a,a)),this},set(a,l){!t&&!Dt(l)&&!vn(l)&&(l=Ae(l));const f=Ae(this),{has:h,get:m}=ei(f);let w=h.call(f,a);w||(a=Ae(a),w=h.call(f,a));const b=m.call(f,a);return f.set(a,l),w?mn(l,b)&&Qt(f,"set",a,l):Qt(f,"add",a,l),this},delete(a){const l=Ae(this),{has:f,get:h}=ei(l);let m=f.call(l,a);m||(a=Ae(a),m=f.call(l,a)),h&&h.call(l,a);const w=l.delete(a);return m&&Qt(l,"delete",a,void 0),w},clear(){const a=Ae(this),l=a.size!==0,f=a.clear();return l&&Qt(a,"clear",void 0,void 0),f}}),["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=yl(a,e,t)}),r}function zo(e,t){const r=bl(e,t);return(o,a,l)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?o:Reflect.get(Me(r,a)&&a in o?r:o,a,l)}const _l={get:zo(!1,!1)},wl={get:zo(!1,!0)},xl={get:zo(!0,!1)};const $a=new WeakMap,La=new WeakMap,qa=new WeakMap,Sl=new WeakMap;function Cl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pl(e){return e.__v_skip||!Object.isExtensible(e)?0:Cl(Yu(e))}function Go(e){return vn(e)?e:Yo(e,!1,ml,_l,$a)}function kl(e){return Yo(e,!1,vl,wl,La)}function Wa(e){return Yo(e,!0,gl,xl,qa)}function Yo(e,t,r,o,a){if(!Ke(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=Pl(e);if(l===0)return e;const f=a.get(e);if(f)return f;const h=new Proxy(e,l===2?o:r);return a.set(e,h),h}function zn(e){return vn(e)?zn(e.__v_raw):!!(e&&e.__v_isReactive)}function vn(e){return!!(e&&e.__v_isReadonly)}function Dt(e){return!!(e&&e.__v_isShallow)}function Xo(e){return e?!!e.__v_raw:!1}function Ae(e){const t=e&&e.__v_raw;return t?Ae(t):e}function Tl(e){return!Me(e,"__v_skip")&&Object.isExtensible(e)&&Pa(e,"__v_skip",!0),e}const it=e=>Ke(e)?Go(e):e,hi=e=>Ke(e)?Wa(e):e;function pt(e){return e?e.__v_isRef===!0:!1}function rt(e){return El(e,!1)}function El(e,t){return pt(e)?e:new Ol(e,t)}class Ol{constructor(t,r){this.dep=new Vo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:Ae(t),this._value=r?t:it(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,o=this.__v_isShallow||Dt(t)||vn(t);t=o?t:Ae(t),mn(t,r)&&(this._rawValue=t,this._value=o?t:it(t),this.dep.trigger())}}function Al(e){return pt(e)?e.value:e}const Ml={get:(e,t,r)=>t==="__v_raw"?e:Al(Reflect.get(e,t,r)),set:(e,t,r,o)=>{const a=e[t];return pt(a)&&!pt(r)?(a.value=r,!0):Reflect.set(e,t,r,o)}};function Ua(e){return zn(e)?e:new Proxy(e,Ml)}class Dl{constructor(t,r,o){this.fn=t,this.setter=r,this._value=void 0,this.dep=new Vo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=wr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Ie!==this)return Ma(this,!0),!0}get value(){const t=this.dep.track();return Fa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Rl(e,t,r=!1){let o,a;return _e(e)?o=e:(o=e.get,a=e.set),new Dl(o,a,r)}const ni={},pi=new WeakMap;let En;function Fl(e,t=!1,r=En){if(r){let o=pi.get(r);o||pi.set(r,o=[]),o.push(e)}}function Il(e,t,r=Fe){const{immediate:o,deep:a,once:l,scheduler:f,augmentJob:h,call:m}=r,w=ae=>a?ae:Dt(ae)||a===!1||a===0?Zt(ae,1):Zt(ae);let b,k,I,$,B=!1,z=!1;if(pt(e)?(k=()=>e.value,B=Dt(e)):zn(e)?(k=()=>w(e),B=!0):me(e)?(z=!0,B=e.some(ae=>zn(ae)||Dt(ae)),k=()=>e.map(ae=>{if(pt(ae))return ae.value;if(zn(ae))return w(ae);if(_e(ae))return m?m(ae,2):ae()})):_e(e)?t?k=m?()=>m(e,2):e:k=()=>{if(I){en();try{I()}finally{tn()}}const ae=En;En=b;try{return m?m(e,3,[$]):e($)}finally{En=ae}}:k=Ut,t&&a){const ae=k,pe=a===!0?1/0:a;k=()=>Zt(ae(),pe)}const te=al(),se=()=>{b.stop(),te&&te.active&&$o(te.effects,b)};if(l&&t){const ae=t;t=(...pe)=>{ae(...pe),se()}}let le=z?new Array(e.length).fill(ni):ni;const we=ae=>{if(!(!(b.flags&1)||!b.dirty&&!ae))if(t){const pe=b.run();if(a||B||(z?pe.some((xe,Ce)=>mn(xe,le[Ce])):mn(pe,le))){I&&I();const xe=En;En=b;try{const Ce=[pe,le===ni?void 0:z&&le[0]===ni?[]:le,$];le=pe,m?m(t,3,Ce):t(...Ce)}finally{En=xe}}}else b.run()};return h&&h(we),b=new Oa(k),b.scheduler=f?()=>f(we,!1):we,$=ae=>Fl(ae,!1,b),I=b.onStop=()=>{const ae=pi.get(b);if(ae){if(m)m(ae,4);else for(const pe of ae)pe();pi.delete(b)}},t?o?we(!0):le=b.run():f?f(we.bind(null,!0),!0):b.run(),se.pause=b.pause.bind(b),se.resume=b.resume.bind(b),se.stop=se,se}function Zt(e,t=1/0,r){if(t<=0||!Ke(e)||e.__v_skip||(r=r||new Map,(r.get(e)||0)>=t))return e;if(r.set(e,t),t--,pt(e))Zt(e.value,t,r);else if(me(e))for(let o=0;o<e.length;o++)Zt(e[o],t,r);else if(Ti(e)||Vn(e))e.forEach(o=>{Zt(o,t,r)});else if(Sa(e)){for(const o in e)Zt(e[o],t,r);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Zt(e[o],t,r)}return e}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Tr(e,t,r,o){try{return o?e(...o):e()}catch(a){Di(a,t,r)}}function zt(e,t,r,o){if(_e(e)){const a=Tr(e,t,r,o);return a&&wa(a)&&a.catch(l=>{Di(l,t,r)}),a}if(me(e)){const a=[];for(let l=0;l<e.length;l++)a.push(zt(e[l],t,r,o));return a}}function Di(e,t,r,o=!0){const a=t?t.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:f}=t&&t.appContext.config||Fe;if(t){let h=t.parent;const m=t.proxy,w=`https://vuejs.org/error-reference/#runtime-${r}`;for(;h;){const b=h.ec;if(b){for(let k=0;k<b.length;k++)if(b[k](e,m,w)===!1)return}h=h.parent}if(l){en(),Tr(l,null,10,[e,m,w]),tn();return}}jl(e,r,a,o,f)}function jl(e,t,r,o=!0,a=!1){if(a)throw e;console.error(e)}const bt=[];let qt=-1;const Gn=[];let hn=null,Un=0;const Ha=Promise.resolve();let mi=null;function gi(e){const t=mi||Ha;return e?t.then(this?e.bind(this):e):t}function Kl(e){let t=qt+1,r=bt.length;for(;t<r;){const o=t+r>>>1,a=bt[o],l=Sr(a);l<e||l===e&&a.flags&2?t=o+1:r=o}return t}function Jo(e){if(!(e.flags&1)){const t=Sr(e),r=bt[bt.length-1];!r||!(e.flags&2)&&t>=Sr(r)?bt.push(e):bt.splice(Kl(t),0,e),e.flags|=1,Va()}}function Va(){mi||(mi=Ha.then(Ga))}function Bl(e){me(e)?Gn.push(...e):hn&&e.id===-1?hn.splice(Un+1,0,e):e.flags&1||(Gn.push(e),e.flags|=1),Va()}function Ls(e,t,r=qt+1){for(;r<bt.length;r++){const o=bt[r];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;bt.splice(r,1),r--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function za(e){if(Gn.length){const t=[...new Set(Gn)].sort((r,o)=>Sr(r)-Sr(o));if(Gn.length=0,hn){hn.push(...t);return}for(hn=t,Un=0;Un<hn.length;Un++){const r=hn[Un];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}hn=null,Un=0}}const Sr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ga(e){try{for(qt=0;qt<bt.length;qt++){const t=bt[qt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Tr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;qt<bt.length;qt++){const t=bt[qt];t&&(t.flags&=-2)}qt=-1,bt.length=0,za(),mi=null,(bt.length||Gn.length)&&Ga()}}let Mt=null,Ya=null;function vi(e){const t=Mt;return Mt=e,Ya=e&&e.type.__scopeId||null,t}function Nl(e,t=Mt,r){if(!t||e._n)return e;const o=(...a)=>{o._d&&Js(-1);const l=vi(t);let f;try{f=e(...a)}finally{vi(l),o._d&&Js(1)}return f};return o._n=!0,o._c=!0,o._d=!0,o}function yi(e,t){if(Mt===null)return e;const r=Ki(Mt),o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[l,f,h,m=Fe]=t[a];l&&(_e(l)&&(l={mounted:l,updated:l}),l.deep&&Zt(f),o.push({dir:l,instance:r,value:f,oldValue:void 0,arg:h,modifiers:m}))}return e}function kn(e,t,r,o){const a=e.dirs,l=t&&t.dirs;for(let f=0;f<a.length;f++){const h=a[f];l&&(h.oldValue=l[f].value);let m=h.dir[o];m&&(en(),zt(m,r,8,[e.el,h,e,t]),tn())}}const $l=Symbol("_vte"),Ll=e=>e.__isTeleport,ql=Symbol("_leaveCb");function Qo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Qo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ri(e,t){return _e(e)?mt({name:e.name},t,{setup:e}):e}function Xa(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const bi=new WeakMap;function vr(e,t,r,o,a=!1){if(me(e)){e.forEach((B,z)=>vr(B,t&&(me(t)?t[z]:t),r,o,a));return}if(yr(o)&&!a){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&vr(e,t,r,o.component.subTree);return}const l=o.shapeFlag&4?Ki(o.component):o.el,f=a?null:l,{i:h,r:m}=e,w=t&&t.r,b=h.refs===Fe?h.refs={}:h.refs,k=h.setupState,I=Ae(k),$=k===Fe?_a:B=>Me(I,B);if(w!=null&&w!==m){if(qs(t),Ye(w))b[w]=null,$(w)&&(k[w]=null);else if(pt(w)){w.value=null;const B=t;B.k&&(b[B.k]=null)}}if(_e(m))Tr(m,h,12,[f,b]);else{const B=Ye(m),z=pt(m);if(B||z){const te=()=>{if(e.f){const se=B?$(m)?k[m]:b[m]:m.value;if(a)me(se)&&$o(se,l);else if(me(se))se.includes(l)||se.push(l);else if(B)b[m]=[l],$(m)&&(k[m]=b[m]);else{const le=[l];m.value=le,e.k&&(b[e.k]=le)}}else B?(b[m]=f,$(m)&&(k[m]=f)):z&&(m.value=f,e.k&&(b[e.k]=f))};if(f){const se=()=>{te(),bi.delete(e)};se.id=-1,bi.set(e,se),Pt(se,r)}else qs(e),te()}}}function qs(e){const t=bi.get(e);t&&(t.flags|=8,bi.delete(e))}Oi().requestIdleCallback;Oi().cancelIdleCallback;const yr=e=>!!e.type.__asyncLoader,Ja=e=>e.type.__isKeepAlive;function Wl(e,t){Qa(e,"a",t)}function Ul(e,t){Qa(e,"da",t)}function Qa(e,t,r=_t){const o=e.__wdc||(e.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(Fi(t,o,r),r){let a=r.parent;for(;a&&a.parent;)Ja(a.parent.vnode)&&Hl(o,t,r,a),a=a.parent}}function Hl(e,t,r,o){const a=Fi(t,e,o,!0);es(()=>{$o(o[t],a)},r)}function Fi(e,t,r=_t,o=!1){if(r){const a=r[e]||(r[e]=[]),l=t.__weh||(t.__weh=(...f)=>{en();const h=Er(r),m=zt(t,r,e,f);return h(),tn(),m});return o?a.unshift(l):a.push(l),l}}const nn=e=>(t,r=_t)=>{(!Pr||e==="sp")&&Fi(e,(...o)=>t(...o),r)},Vl=nn("bm"),Zo=nn("m"),zl=nn("bu"),Gl=nn("u"),Yl=nn("bum"),es=nn("um"),Xl=nn("sp"),Jl=nn("rtg"),Ql=nn("rtc");function Zl(e,t=_t){Fi("ec",e,t)}const ec=Symbol.for("v-ndc");function oi(e,t,r,o){let a;const l=r,f=me(e);if(f||Ye(e)){const h=f&&zn(e);let m=!1,w=!1;h&&(m=!Dt(e),w=vn(e),e=Mi(e)),a=new Array(e.length);for(let b=0,k=e.length;b<k;b++)a[b]=t(m?w?hi(it(e[b])):it(e[b]):e[b],b,void 0,l)}else if(typeof e=="number"){a=new Array(e);for(let h=0;h<e;h++)a[h]=t(h+1,h,void 0,l)}else if(Ke(e))if(e[Symbol.iterator])a=Array.from(e,(h,m)=>t(h,m,void 0,l));else{const h=Object.keys(e);a=new Array(h.length);for(let m=0,w=h.length;m<w;m++){const b=h[m];a[m]=t(e[b],b,m,l)}}else a=[];return a}const Ao=e=>e?bu(e)?Ki(e):Ao(e.parent):null,br=mt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ao(e.parent),$root:e=>Ao(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>eu(e),$forceUpdate:e=>e.f||(e.f=()=>{Jo(e.update)}),$nextTick:e=>e.n||(e.n=gi.bind(e.proxy)),$watch:e=>xc.bind(e)}),wo=(e,t)=>e!==Fe&&!e.__isScriptSetup&&Me(e,t),tc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:o,data:a,props:l,accessCache:f,type:h,appContext:m}=e;let w;if(t[0]!=="$"){const $=f[t];if($!==void 0)switch($){case 1:return o[t];case 2:return a[t];case 4:return r[t];case 3:return l[t]}else{if(wo(o,t))return f[t]=1,o[t];if(a!==Fe&&Me(a,t))return f[t]=2,a[t];if((w=e.propsOptions[0])&&Me(w,t))return f[t]=3,l[t];if(r!==Fe&&Me(r,t))return f[t]=4,r[t];Mo&&(f[t]=0)}}const b=br[t];let k,I;if(b)return t==="$attrs"&&ht(e.attrs,"get",""),b(e);if((k=h.__cssModules)&&(k=k[t]))return k;if(r!==Fe&&Me(r,t))return f[t]=4,r[t];if(I=m.config.globalProperties,Me(I,t))return I[t]},set({_:e},t,r){const{data:o,setupState:a,ctx:l}=e;return wo(a,t)?(a[t]=r,!0):o!==Fe&&Me(o,t)?(o[t]=r,!0):Me(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(l[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:o,appContext:a,propsOptions:l,type:f}},h){let m,w;return!!(r[h]||e!==Fe&&h[0]!=="$"&&Me(e,h)||wo(t,h)||(m=l[0])&&Me(m,h)||Me(o,h)||Me(br,h)||Me(a.config.globalProperties,h)||(w=f.__cssModules)&&w[h])},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Me(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Ws(e){return me(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let Mo=!0;function nc(e){const t=eu(e),r=e.proxy,o=e.ctx;Mo=!1,t.beforeCreate&&Us(t.beforeCreate,e,"bc");const{data:a,computed:l,methods:f,watch:h,provide:m,inject:w,created:b,beforeMount:k,mounted:I,beforeUpdate:$,updated:B,activated:z,deactivated:te,beforeDestroy:se,beforeUnmount:le,destroyed:we,unmounted:ae,render:pe,renderTracked:xe,renderTriggered:Ce,errorCaptured:qe,serverPrefetch:st,expose:ze,inheritAttrs:xt,components:tt,directives:nt,filters:jt}=t;if(w&&rc(w,o,null),f)for(const Re in f){const Se=f[Re];_e(Se)&&(o[Re]=Se.bind(r))}if(a){const Re=a.call(r,r);Ke(Re)&&(e.data=Go(Re))}if(Mo=!0,l)for(const Re in l){const Se=l[Re],at=_e(Se)?Se.bind(r,r):_e(Se.get)?Se.get.bind(r,r):Ut,ut=!_e(Se)&&_e(Se.set)?Se.set.bind(r):Ut,St=xi({get:at,set:ut});Object.defineProperty(o,Re,{enumerable:!0,configurable:!0,get:()=>St.value,set:lt=>St.value=lt})}if(h)for(const Re in h)Za(h[Re],o,r,Re);if(m){const Re=_e(m)?m.call(r):m;Reflect.ownKeys(Re).forEach(Se=>{lc(Se,Re[Se])})}b&&Us(b,e,"c");function We(Re,Se){me(Se)?Se.forEach(at=>Re(at.bind(r))):Se&&Re(Se.bind(r))}if(We(Vl,k),We(Zo,I),We(zl,$),We(Gl,B),We(Wl,z),We(Ul,te),We(Zl,qe),We(Ql,xe),We(Jl,Ce),We(Yl,le),We(es,ae),We(Xl,st),me(ze))if(ze.length){const Re=e.exposed||(e.exposed={});ze.forEach(Se=>{Object.defineProperty(Re,Se,{get:()=>r[Se],set:at=>r[Se]=at,enumerable:!0})})}else e.exposed||(e.exposed={});pe&&e.render===Ut&&(e.render=pe),xt!=null&&(e.inheritAttrs=xt),tt&&(e.components=tt),nt&&(e.directives=nt),st&&Xa(e)}function rc(e,t,r=Ut){me(e)&&(e=Do(e));for(const o in e){const a=e[o];let l;Ke(a)?"default"in a?l=si(a.from||o,a.default,!0):l=si(a.from||o):l=si(a),pt(l)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:f=>l.value=f}):t[o]=l}}function Us(e,t,r){zt(me(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,r)}function Za(e,t,r,o){let a=o.includes(".")?hu(r,o):()=>r[o];if(Ye(e)){const l=t[e];_e(l)&&Xn(a,l)}else if(_e(e))Xn(a,e.bind(r));else if(Ke(e))if(me(e))e.forEach(l=>Za(l,t,r,o));else{const l=_e(e.handler)?e.handler.bind(r):t[e.handler];_e(l)&&Xn(a,l,e)}}function eu(e){const t=e.type,{mixins:r,extends:o}=t,{mixins:a,optionsCache:l,config:{optionMergeStrategies:f}}=e.appContext,h=l.get(t);let m;return h?m=h:!a.length&&!r&&!o?m=t:(m={},a.length&&a.forEach(w=>_i(m,w,f,!0)),_i(m,t,f)),Ke(t)&&l.set(t,m),m}function _i(e,t,r,o=!1){const{mixins:a,extends:l}=t;l&&_i(e,l,r,!0),a&&a.forEach(f=>_i(e,f,r,!0));for(const f in t)if(!(o&&f==="expose")){const h=ic[f]||r&&r[f];e[f]=h?h(e[f],t[f]):t[f]}return e}const ic={data:Hs,props:Vs,emits:Vs,methods:hr,computed:hr,beforeCreate:yt,created:yt,beforeMount:yt,mounted:yt,beforeUpdate:yt,updated:yt,beforeDestroy:yt,beforeUnmount:yt,destroyed:yt,unmounted:yt,activated:yt,deactivated:yt,errorCaptured:yt,serverPrefetch:yt,components:hr,directives:hr,watch:sc,provide:Hs,inject:oc};function Hs(e,t){return t?e?function(){return mt(_e(e)?e.call(this,this):e,_e(t)?t.call(this,this):t)}:t:e}function oc(e,t){return hr(Do(e),Do(t))}function Do(e){if(me(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function yt(e,t){return e?[...new Set([].concat(e,t))]:t}function hr(e,t){return e?mt(Object.create(null),e,t):t}function Vs(e,t){return e?me(e)&&me(t)?[...new Set([...e,...t])]:mt(Object.create(null),Ws(e),Ws(t??{})):t}function sc(e,t){if(!e)return t;if(!t)return e;const r=mt(Object.create(null),e);for(const o in t)r[o]=yt(e[o],t[o]);return r}function tu(){return{app:null,config:{isNativeTag:_a,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ac=0;function uc(e,t){return function(o,a=null){_e(o)||(o=mt({},o)),a!=null&&!Ke(a)&&(a=null);const l=tu(),f=new WeakSet,h=[];let m=!1;const w=l.app={_uid:ac++,_component:o,_props:a,_container:null,_context:l,_instance:null,version:Hc,get config(){return l.config},set config(b){},use(b,...k){return f.has(b)||(b&&_e(b.install)?(f.add(b),b.install(w,...k)):_e(b)&&(f.add(b),b(w,...k))),w},mixin(b){return l.mixins.includes(b)||l.mixins.push(b),w},component(b,k){return k?(l.components[b]=k,w):l.components[b]},directive(b,k){return k?(l.directives[b]=k,w):l.directives[b]},mount(b,k,I){if(!m){const $=w._ceVNode||Ht(o,a);return $.appContext=l,I===!0?I="svg":I===!1&&(I=void 0),e($,b,I),m=!0,w._container=b,b.__vue_app__=w,Ki($.component)}},onUnmount(b){h.push(b)},unmount(){m&&(zt(h,w._instance,16),e(null,w._container),delete w._container.__vue_app__)},provide(b,k){return l.provides[b]=k,w},runWithContext(b){const k=Yn;Yn=w;try{return b()}finally{Yn=k}}};return w}}let Yn=null;function lc(e,t){if(_t){let r=_t.provides;const o=_t.parent&&_t.parent.provides;o===r&&(r=_t.provides=Object.create(o)),r[e]=t}}function si(e,t,r=!1){const o=Nc();if(o||Yn){let a=Yn?Yn._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return r&&_e(t)?t.call(o&&o.proxy):t}}const nu={},ru=()=>Object.create(nu),iu=e=>Object.getPrototypeOf(e)===nu;function cc(e,t,r,o=!1){const a={},l=ru();e.propsDefaults=Object.create(null),ou(e,t,a,l);for(const f in e.propsOptions[0])f in a||(a[f]=void 0);r?e.props=o?a:kl(a):e.type.props?e.props=a:e.props=l,e.attrs=l}function fc(e,t,r,o){const{props:a,attrs:l,vnode:{patchFlag:f}}=e,h=Ae(a),[m]=e.propsOptions;let w=!1;if((o||f>0)&&!(f&16)){if(f&8){const b=e.vnode.dynamicProps;for(let k=0;k<b.length;k++){let I=b[k];if(Ii(e.emitsOptions,I))continue;const $=t[I];if(m)if(Me(l,I))$!==l[I]&&(l[I]=$,w=!0);else{const B=gn(I);a[B]=Ro(m,h,B,$,e,!1)}else $!==l[I]&&(l[I]=$,w=!0)}}}else{ou(e,t,a,l)&&(w=!0);let b;for(const k in h)(!t||!Me(t,k)&&((b=Rn(k))===k||!Me(t,b)))&&(m?r&&(r[k]!==void 0||r[b]!==void 0)&&(a[k]=Ro(m,h,k,void 0,e,!0)):delete a[k]);if(l!==h)for(const k in l)(!t||!Me(t,k))&&(delete l[k],w=!0)}w&&Qt(e.attrs,"set","")}function ou(e,t,r,o){const[a,l]=e.propsOptions;let f=!1,h;if(t)for(let m in t){if(pr(m))continue;const w=t[m];let b;a&&Me(a,b=gn(m))?!l||!l.includes(b)?r[b]=w:(h||(h={}))[b]=w:Ii(e.emitsOptions,m)||(!(m in o)||w!==o[m])&&(o[m]=w,f=!0)}if(l){const m=Ae(r),w=h||Fe;for(let b=0;b<l.length;b++){const k=l[b];r[k]=Ro(a,m,k,w[k],e,!Me(w,k))}}return f}function Ro(e,t,r,o,a,l){const f=e[r];if(f!=null){const h=Me(f,"default");if(h&&o===void 0){const m=f.default;if(f.type!==Function&&!f.skipFactory&&_e(m)){const{propsDefaults:w}=a;if(r in w)o=w[r];else{const b=Er(a);o=w[r]=m.call(null,t),b()}}else o=m;a.ce&&a.ce._setProp(r,o)}f[0]&&(l&&!h?o=!1:f[1]&&(o===""||o===Rn(r))&&(o=!0))}return o}const dc=new WeakMap;function su(e,t,r=!1){const o=r?dc:t.propsCache,a=o.get(e);if(a)return a;const l=e.props,f={},h=[];let m=!1;if(!_e(e)){const b=k=>{m=!0;const[I,$]=su(k,t,!0);mt(f,I),$&&h.push(...$)};!r&&t.mixins.length&&t.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}if(!l&&!m)return Ke(e)&&o.set(e,Hn),Hn;if(me(l))for(let b=0;b<l.length;b++){const k=gn(l[b]);zs(k)&&(f[k]=Fe)}else if(l)for(const b in l){const k=gn(b);if(zs(k)){const I=l[b],$=f[k]=me(I)||_e(I)?{type:I}:mt({},I),B=$.type;let z=!1,te=!0;if(me(B))for(let se=0;se<B.length;++se){const le=B[se],we=_e(le)&&le.name;if(we==="Boolean"){z=!0;break}else we==="String"&&(te=!1)}else z=_e(B)&&B.name==="Boolean";$[0]=z,$[1]=te,(z||Me($,"default"))&&h.push(k)}}const w=[f,h];return Ke(e)&&o.set(e,w),w}function zs(e){return e[0]!=="$"&&!pr(e)}const ts=e=>e==="_"||e==="_ctx"||e==="$stable",ns=e=>me(e)?e.map(Wt):[Wt(e)],hc=(e,t,r)=>{if(t._n)return t;const o=Nl((...a)=>ns(t(...a)),r);return o._c=!1,o},au=(e,t,r)=>{const o=e._ctx;for(const a in e){if(ts(a))continue;const l=e[a];if(_e(l))t[a]=hc(a,l,o);else if(l!=null){const f=ns(l);t[a]=()=>f}}},uu=(e,t)=>{const r=ns(t);e.slots.default=()=>r},lu=(e,t,r)=>{for(const o in t)(r||!ts(o))&&(e[o]=t[o])},pc=(e,t,r)=>{const o=e.slots=ru();if(e.vnode.shapeFlag&32){const a=t._;a?(lu(o,t,r),r&&Pa(o,"_",a,!0)):au(t,o)}else t&&uu(e,t)},mc=(e,t,r)=>{const{vnode:o,slots:a}=e;let l=!0,f=Fe;if(o.shapeFlag&32){const h=t._;h?r&&h===1?l=!1:lu(a,t,r):(l=!t.$stable,au(t,a)),f=t}else t&&(uu(e,t),f={default:1});if(l)for(const h in a)!ts(h)&&f[h]==null&&delete a[h]},Pt=Ac;function gc(e){return vc(e)}function vc(e,t){const r=Oi();r.__VUE__=!0;const{insert:o,remove:a,patchProp:l,createElement:f,createText:h,createComment:m,setText:w,setElementText:b,parentNode:k,nextSibling:I,setScopeId:$=Ut,insertStaticContent:B}=e,z=(p,v,S,F=null,N=null,W=null,Z=void 0,J=null,X=!!v.dynamicChildren)=>{if(p===v)return;p&&!dr(p,v)&&(F=Ft(p),lt(p,N,W,!0),p=null),v.patchFlag===-2&&(X=!1,v.dynamicChildren=null);const{type:U,ref:de,shapeFlag:ne}=v;switch(U){case ji:te(p,v,S,F);break;case yn:se(p,v,S,F);break;case ai:p==null&&le(v,S,F,Z);break;case Tt:tt(p,v,S,F,N,W,Z,J,X);break;default:ne&1?pe(p,v,S,F,N,W,Z,J,X):ne&6?nt(p,v,S,F,N,W,Z,J,X):(ne&64||ne&128)&&U.process(p,v,S,F,N,W,Z,J,X,L)}de!=null&&N?vr(de,p&&p.ref,W,v||p,!v):de==null&&p&&p.ref!=null&&vr(p.ref,null,W,p,!0)},te=(p,v,S,F)=>{if(p==null)o(v.el=h(v.children),S,F);else{const N=v.el=p.el;v.children!==p.children&&w(N,v.children)}},se=(p,v,S,F)=>{p==null?o(v.el=m(v.children||""),S,F):v.el=p.el},le=(p,v,S,F)=>{[p.el,p.anchor]=B(p.children,v,S,F,p.el,p.anchor)},we=({el:p,anchor:v},S,F)=>{let N;for(;p&&p!==v;)N=I(p),o(p,S,F),p=N;o(v,S,F)},ae=({el:p,anchor:v})=>{let S;for(;p&&p!==v;)S=I(p),a(p),p=S;a(v)},pe=(p,v,S,F,N,W,Z,J,X)=>{v.type==="svg"?Z="svg":v.type==="math"&&(Z="mathml"),p==null?xe(v,S,F,N,W,Z,J,X):st(p,v,N,W,Z,J,X)},xe=(p,v,S,F,N,W,Z,J)=>{let X,U;const{props:de,shapeFlag:ne,transition:fe,dirs:he}=p;if(X=p.el=f(p.type,W,de&&de.is,de),ne&8?b(X,p.children):ne&16&&qe(p.children,X,null,F,N,xo(p,W),Z,J),he&&kn(p,null,F,"created"),Ce(X,p,p.scopeId,Z,F),de){for(const ke in de)ke!=="value"&&!pr(ke)&&l(X,ke,null,de[ke],W,F);"value"in de&&l(X,"value",null,de.value,W),(U=de.onVnodeBeforeMount)&&Lt(U,F,p)}he&&kn(p,null,F,"beforeMount");const ye=yc(N,fe);ye&&fe.beforeEnter(X),o(X,v,S),((U=de&&de.onVnodeMounted)||ye||he)&&Pt(()=>{U&&Lt(U,F,p),ye&&fe.enter(X),he&&kn(p,null,F,"mounted")},N)},Ce=(p,v,S,F,N)=>{if(S&&$(p,S),F)for(let W=0;W<F.length;W++)$(p,F[W]);if(N){let W=N.subTree;if(v===W||mu(W.type)&&(W.ssContent===v||W.ssFallback===v)){const Z=N.vnode;Ce(p,Z,Z.scopeId,Z.slotScopeIds,N.parent)}}},qe=(p,v,S,F,N,W,Z,J,X=0)=>{for(let U=X;U<p.length;U++){const de=p[U]=J?pn(p[U]):Wt(p[U]);z(null,de,v,S,F,N,W,Z,J)}},st=(p,v,S,F,N,W,Z)=>{const J=v.el=p.el;let{patchFlag:X,dynamicChildren:U,dirs:de}=v;X|=p.patchFlag&16;const ne=p.props||Fe,fe=v.props||Fe;let he;if(S&&Tn(S,!1),(he=fe.onVnodeBeforeUpdate)&&Lt(he,S,v,p),de&&kn(v,p,S,"beforeUpdate"),S&&Tn(S,!0),(ne.innerHTML&&fe.innerHTML==null||ne.textContent&&fe.textContent==null)&&b(J,""),U?ze(p.dynamicChildren,U,J,S,F,xo(v,N),W):Z||Se(p,v,J,null,S,F,xo(v,N),W,!1),X>0){if(X&16)xt(J,ne,fe,S,N);else if(X&2&&ne.class!==fe.class&&l(J,"class",null,fe.class,N),X&4&&l(J,"style",ne.style,fe.style,N),X&8){const ye=v.dynamicProps;for(let ke=0;ke<ye.length;ke++){const Ee=ye[ke],Ge=ne[Ee],Je=fe[Ee];(Je!==Ge||Ee==="value")&&l(J,Ee,Ge,Je,N,S)}}X&1&&p.children!==v.children&&b(J,v.children)}else!Z&&U==null&&xt(J,ne,fe,S,N);((he=fe.onVnodeUpdated)||de)&&Pt(()=>{he&&Lt(he,S,v,p),de&&kn(v,p,S,"updated")},F)},ze=(p,v,S,F,N,W,Z)=>{for(let J=0;J<v.length;J++){const X=p[J],U=v[J],de=X.el&&(X.type===Tt||!dr(X,U)||X.shapeFlag&198)?k(X.el):S;z(X,U,de,null,F,N,W,Z,!0)}},xt=(p,v,S,F,N)=>{if(v!==S){if(v!==Fe)for(const W in v)!pr(W)&&!(W in S)&&l(p,W,v[W],null,N,F);for(const W in S){if(pr(W))continue;const Z=S[W],J=v[W];Z!==J&&W!=="value"&&l(p,W,J,Z,N,F)}"value"in S&&l(p,"value",v.value,S.value,N)}},tt=(p,v,S,F,N,W,Z,J,X)=>{const U=v.el=p?p.el:h(""),de=v.anchor=p?p.anchor:h("");let{patchFlag:ne,dynamicChildren:fe,slotScopeIds:he}=v;he&&(J=J?J.concat(he):he),p==null?(o(U,S,F),o(de,S,F),qe(v.children||[],S,de,N,W,Z,J,X)):ne>0&&ne&64&&fe&&p.dynamicChildren?(ze(p.dynamicChildren,fe,S,N,W,Z,J),(v.key!=null||N&&v===N.subTree)&&cu(p,v,!0)):Se(p,v,S,de,N,W,Z,J,X)},nt=(p,v,S,F,N,W,Z,J,X)=>{v.slotScopeIds=J,p==null?v.shapeFlag&512?N.ctx.activate(v,S,F,Z,X):jt(v,S,F,N,W,Z,X):rn(p,v,X)},jt=(p,v,S,F,N,W,Z)=>{const J=p.component=Bc(p,F,N);if(Ja(p)&&(J.ctx.renderer=L),$c(J,!1,Z),J.asyncDep){if(N&&N.registerDep(J,We,Z),!p.el){const X=J.subTree=Ht(yn);se(null,X,v,S),p.placeholder=X.el}}else We(J,p,v,S,N,W,Z)},rn=(p,v,S)=>{const F=v.component=p.component;if(Ec(p,v,S))if(F.asyncDep&&!F.asyncResolved){Re(F,v,S);return}else F.next=v,F.update();else v.el=p.el,F.vnode=v},We=(p,v,S,F,N,W,Z)=>{const J=()=>{if(p.isMounted){let{next:ne,bu:fe,u:he,parent:ye,vnode:ke}=p;{const Qe=fu(p);if(Qe){ne&&(ne.el=ke.el,Re(p,ne,Z)),Qe.asyncDep.then(()=>{p.isUnmounted||J()});return}}let Ee=ne,Ge;Tn(p,!1),ne?(ne.el=ke.el,Re(p,ne,Z)):ne=ke,fe&&ii(fe),(Ge=ne.props&&ne.props.onVnodeBeforeUpdate)&&Lt(Ge,ye,ne,ke),Tn(p,!0);const Je=Ys(p),gt=p.subTree;p.subTree=Je,z(gt,Je,k(gt.el),Ft(gt),p,N,W),ne.el=Je.el,Ee===null&&Oc(p,Je.el),he&&Pt(he,N),(Ge=ne.props&&ne.props.onVnodeUpdated)&&Pt(()=>Lt(Ge,ye,ne,ke),N)}else{let ne;const{el:fe,props:he}=v,{bm:ye,m:ke,parent:Ee,root:Ge,type:Je}=p,gt=yr(v);Tn(p,!1),ye&&ii(ye),!gt&&(ne=he&&he.onVnodeBeforeMount)&&Lt(ne,Ee,v),Tn(p,!0);{Ge.ce&&Ge.ce._def.shadowRoot!==!1&&Ge.ce._injectChildStyle(Je);const Qe=p.subTree=Ys(p);z(null,Qe,S,F,p,N,W),v.el=Qe.el}if(ke&&Pt(ke,N),!gt&&(ne=he&&he.onVnodeMounted)){const Qe=v;Pt(()=>Lt(ne,Ee,Qe),N)}(v.shapeFlag&256||Ee&&yr(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&p.a&&Pt(p.a,N),p.isMounted=!0,v=S=F=null}};p.scope.on();const X=p.effect=new Oa(J);p.scope.off();const U=p.update=X.run.bind(X),de=p.job=X.runIfDirty.bind(X);de.i=p,de.id=p.uid,X.scheduler=()=>Jo(de),Tn(p,!0),U()},Re=(p,v,S)=>{v.component=p;const F=p.vnode.props;p.vnode=v,p.next=null,fc(p,v.props,F,S),mc(p,v.children,S),en(),Ls(p),tn()},Se=(p,v,S,F,N,W,Z,J,X=!1)=>{const U=p&&p.children,de=p?p.shapeFlag:0,ne=v.children,{patchFlag:fe,shapeFlag:he}=v;if(fe>0){if(fe&128){ut(U,ne,S,F,N,W,Z,J,X);return}else if(fe&256){at(U,ne,S,F,N,W,Z,J,X);return}}he&8?(de&16&&Xe(U,N,W),ne!==U&&b(S,ne)):de&16?he&16?ut(U,ne,S,F,N,W,Z,J,X):Xe(U,N,W,!0):(de&8&&b(S,""),he&16&&qe(ne,S,F,N,W,Z,J,X))},at=(p,v,S,F,N,W,Z,J,X)=>{p=p||Hn,v=v||Hn;const U=p.length,de=v.length,ne=Math.min(U,de);let fe;for(fe=0;fe<ne;fe++){const he=v[fe]=X?pn(v[fe]):Wt(v[fe]);z(p[fe],he,S,null,N,W,Z,J,X)}U>de?Xe(p,N,W,!0,!1,ne):qe(v,S,F,N,W,Z,J,X,ne)},ut=(p,v,S,F,N,W,Z,J,X)=>{let U=0;const de=v.length;let ne=p.length-1,fe=de-1;for(;U<=ne&&U<=fe;){const he=p[U],ye=v[U]=X?pn(v[U]):Wt(v[U]);if(dr(he,ye))z(he,ye,S,null,N,W,Z,J,X);else break;U++}for(;U<=ne&&U<=fe;){const he=p[ne],ye=v[fe]=X?pn(v[fe]):Wt(v[fe]);if(dr(he,ye))z(he,ye,S,null,N,W,Z,J,X);else break;ne--,fe--}if(U>ne){if(U<=fe){const he=fe+1,ye=he<de?v[he].el:F;for(;U<=fe;)z(null,v[U]=X?pn(v[U]):Wt(v[U]),S,ye,N,W,Z,J,X),U++}}else if(U>fe)for(;U<=ne;)lt(p[U],N,W,!0),U++;else{const he=U,ye=U,ke=new Map;for(U=ye;U<=fe;U++){const $e=v[U]=X?pn(v[U]):Wt(v[U]);$e.key!=null&&ke.set($e.key,U)}let Ee,Ge=0;const Je=fe-ye+1;let gt=!1,Qe=0;const Kt=new Array(Je);for(U=0;U<Je;U++)Kt[U]=0;for(U=he;U<=ne;U++){const $e=p[U];if(Ge>=Je){lt($e,N,W,!0);continue}let ue;if($e.key!=null)ue=ke.get($e.key);else for(Ee=ye;Ee<=fe;Ee++)if(Kt[Ee-ye]===0&&dr($e,v[Ee])){ue=Ee;break}ue===void 0?lt($e,N,W,!0):(Kt[ue-ye]=U+1,ue>=Qe?Qe=ue:gt=!0,z($e,v[ue],S,null,N,W,Z,J,X),Ge++)}const Fn=gt?bc(Kt):Hn;for(Ee=Fn.length-1,U=Je-1;U>=0;U--){const $e=ye+U,ue=v[$e],sn=v[$e+1],Bt=$e+1<de?sn.el||sn.placeholder:F;Kt[U]===0?z(null,ue,S,Bt,N,W,Z,J,X):gt&&(Ee<0||U!==Fn[Ee]?St(ue,S,Bt,2):Ee--)}}},St=(p,v,S,F,N=null)=>{const{el:W,type:Z,transition:J,children:X,shapeFlag:U}=p;if(U&6){St(p.component.subTree,v,S,F);return}if(U&128){p.suspense.move(v,S,F);return}if(U&64){Z.move(p,v,S,L);return}if(Z===Tt){o(W,v,S);for(let ne=0;ne<X.length;ne++)St(X[ne],v,S,F);o(p.anchor,v,S);return}if(Z===ai){we(p,v,S);return}if(F!==2&&U&1&&J)if(F===0)J.beforeEnter(W),o(W,v,S),Pt(()=>J.enter(W),N);else{const{leave:ne,delayLeave:fe,afterLeave:he}=J,ye=()=>{p.ctx.isUnmounted?a(W):o(W,v,S)},ke=()=>{W._isLeaving&&W[ql](!0),ne(W,()=>{ye(),he&&he()})};fe?fe(W,ye,ke):ke()}else o(W,v,S)},lt=(p,v,S,F=!1,N=!1)=>{const{type:W,props:Z,ref:J,children:X,dynamicChildren:U,shapeFlag:de,patchFlag:ne,dirs:fe,cacheIndex:he}=p;if(ne===-2&&(N=!1),J!=null&&(en(),vr(J,null,S,p,!0),tn()),he!=null&&(v.renderCache[he]=void 0),de&256){v.ctx.deactivate(p);return}const ye=de&1&&fe,ke=!yr(p);let Ee;if(ke&&(Ee=Z&&Z.onVnodeBeforeUnmount)&&Lt(Ee,v,p),de&6)on(p.component,S,F);else{if(de&128){p.suspense.unmount(S,F);return}ye&&kn(p,null,v,"beforeUnmount"),de&64?p.type.remove(p,v,S,L,F):U&&!U.hasOnce&&(W!==Tt||ne>0&&ne&64)?Xe(U,v,S,!1,!0):(W===Tt&&ne&384||!N&&de&16)&&Xe(X,v,S),F&&Rt(p)}(ke&&(Ee=Z&&Z.onVnodeUnmounted)||ye)&&Pt(()=>{Ee&&Lt(Ee,v,p),ye&&kn(p,null,v,"unmounted")},S)},Rt=p=>{const{type:v,el:S,anchor:F,transition:N}=p;if(v===Tt){bn(S,F);return}if(v===ai){ae(p);return}const W=()=>{a(S),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(p.shapeFlag&1&&N&&!N.persisted){const{leave:Z,delayLeave:J}=N,X=()=>Z(S,W);J?J(p.el,W,X):X()}else W()},bn=(p,v)=>{let S;for(;p!==v;)S=I(p),a(p),p=S;a(v)},on=(p,v,S)=>{const{bum:F,scope:N,job:W,subTree:Z,um:J,m:X,a:U}=p;Gs(X),Gs(U),F&&ii(F),N.stop(),W&&(W.flags|=8,lt(Z,p,v,S)),J&&Pt(J,v),Pt(()=>{p.isUnmounted=!0},v)},Xe=(p,v,S,F=!1,N=!1,W=0)=>{for(let Z=W;Z<p.length;Z++)lt(p[Z],v,S,F,N)},Ft=p=>{if(p.shapeFlag&6)return Ft(p.component.subTree);if(p.shapeFlag&128)return p.suspense.next();const v=I(p.anchor||p.el),S=v&&v[$l];return S?I(S):v};let Ot=!1;const ce=(p,v,S)=>{p==null?v._vnode&&lt(v._vnode,null,null,!0):z(v._vnode||null,p,v,null,null,null,S),v._vnode=p,Ot||(Ot=!0,Ls(),za(),Ot=!1)},L={p:z,um:lt,m:St,r:Rt,mt:jt,mc:qe,pc:Se,pbc:ze,n:Ft,o:e};return{render:ce,hydrate:void 0,createApp:uc(ce)}}function xo({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Tn({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function yc(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function cu(e,t,r=!1){const o=e.children,a=t.children;if(me(o)&&me(a))for(let l=0;l<o.length;l++){const f=o[l];let h=a[l];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=a[l]=pn(a[l]),h.el=f.el),!r&&h.patchFlag!==-2&&cu(f,h)),h.type===ji&&h.patchFlag!==-1&&(h.el=f.el),h.type===yn&&!h.el&&(h.el=f.el)}}function bc(e){const t=e.slice(),r=[0];let o,a,l,f,h;const m=e.length;for(o=0;o<m;o++){const w=e[o];if(w!==0){if(a=r[r.length-1],e[a]<w){t[o]=a,r.push(o);continue}for(l=0,f=r.length-1;l<f;)h=l+f>>1,e[r[h]]<w?l=h+1:f=h;w<e[r[l]]&&(l>0&&(t[o]=r[l-1]),r[l]=o)}}for(l=r.length,f=r[l-1];l-- >0;)r[l]=f,f=t[f];return r}function fu(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:fu(t)}function Gs(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const _c=Symbol.for("v-scx"),wc=()=>si(_c);function Xn(e,t,r){return du(e,t,r)}function du(e,t,r=Fe){const{immediate:o,deep:a,flush:l,once:f}=r,h=mt({},r),m=t&&o||!t&&l!=="post";let w;if(Pr){if(l==="sync"){const $=wc();w=$.__watcherHandles||($.__watcherHandles=[])}else if(!m){const $=()=>{};return $.stop=Ut,$.resume=Ut,$.pause=Ut,$}}const b=_t;h.call=($,B,z)=>zt($,b,B,z);let k=!1;l==="post"?h.scheduler=$=>{Pt($,b&&b.suspense)}:l!=="sync"&&(k=!0,h.scheduler=($,B)=>{B?$():Jo($)}),h.augmentJob=$=>{t&&($.flags|=4),k&&($.flags|=2,b&&($.id=b.uid,$.i=b))};const I=Il(e,t,h);return Pr&&(w?w.push(I):m&&I()),I}function xc(e,t,r){const o=this.proxy,a=Ye(e)?e.includes(".")?hu(o,e):()=>o[e]:e.bind(o,o);let l;_e(t)?l=t:(l=t.handler,r=t);const f=Er(this),h=du(a,l.bind(o),r);return f(),h}function hu(e,t){const r=t.split(".");return()=>{let o=e;for(let a=0;a<r.length&&o;a++)o=o[r[a]];return o}}const Sc=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${gn(t)}Modifiers`]||e[`${Rn(t)}Modifiers`];function Cc(e,t,...r){if(e.isUnmounted)return;const o=e.vnode.props||Fe;let a=r;const l=t.startsWith("update:"),f=l&&Sc(o,t.slice(7));f&&(f.trim&&(a=r.map(b=>Ye(b)?b.trim():b)),f.number&&(a=r.map(di)));let h,m=o[h=go(t)]||o[h=go(gn(t))];!m&&l&&(m=o[h=go(Rn(t))]),m&&zt(m,e,6,a);const w=o[h+"Once"];if(w){if(!e.emitted)e.emitted={};else if(e.emitted[h])return;e.emitted[h]=!0,zt(w,e,6,a)}}const Pc=new WeakMap;function pu(e,t,r=!1){const o=r?Pc:t.emitsCache,a=o.get(e);if(a!==void 0)return a;const l=e.emits;let f={},h=!1;if(!_e(e)){const m=w=>{const b=pu(w,t,!0);b&&(h=!0,mt(f,b))};!r&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!l&&!h?(Ke(e)&&o.set(e,null),null):(me(l)?l.forEach(m=>f[m]=null):mt(f,l),Ke(e)&&o.set(e,f),f)}function Ii(e,t){return!e||!ki(t)?!1:(t=t.slice(2).replace(/Once$/,""),Me(e,t[0].toLowerCase()+t.slice(1))||Me(e,Rn(t))||Me(e,t))}function Ys(e){const{type:t,vnode:r,proxy:o,withProxy:a,propsOptions:[l],slots:f,attrs:h,emit:m,render:w,renderCache:b,props:k,data:I,setupState:$,ctx:B,inheritAttrs:z}=e,te=vi(e);let se,le;try{if(r.shapeFlag&4){const ae=a||o,pe=ae;se=Wt(w.call(pe,ae,b,k,$,I,B)),le=h}else{const ae=t;se=Wt(ae.length>1?ae(k,{attrs:h,slots:f,emit:m}):ae(k,null)),le=t.props?h:kc(h)}}catch(ae){_r.length=0,Di(ae,e,1),se=Ht(yn)}let we=se;if(le&&z!==!1){const ae=Object.keys(le),{shapeFlag:pe}=we;ae.length&&pe&7&&(l&&ae.some(No)&&(le=Tc(le,l)),we=Zn(we,le,!1,!0))}return r.dirs&&(we=Zn(we,null,!1,!0),we.dirs=we.dirs?we.dirs.concat(r.dirs):r.dirs),r.transition&&Qo(we,r.transition),se=we,vi(te),se}const kc=e=>{let t;for(const r in e)(r==="class"||r==="style"||ki(r))&&((t||(t={}))[r]=e[r]);return t},Tc=(e,t)=>{const r={};for(const o in e)(!No(o)||!(o.slice(9)in t))&&(r[o]=e[o]);return r};function Ec(e,t,r){const{props:o,children:a,component:l}=e,{props:f,children:h,patchFlag:m}=t,w=l.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&m>=0){if(m&1024)return!0;if(m&16)return o?Xs(o,f,w):!!f;if(m&8){const b=t.dynamicProps;for(let k=0;k<b.length;k++){const I=b[k];if(f[I]!==o[I]&&!Ii(w,I))return!0}}}else return(a||h)&&(!h||!h.$stable)?!0:o===f?!1:o?f?Xs(o,f,w):!0:!!f;return!1}function Xs(e,t,r){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let a=0;a<o.length;a++){const l=o[a];if(t[l]!==e[l]&&!Ii(r,l))return!0}return!1}function Oc({vnode:e,parent:t},r){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=r,t=t.parent;else break}}const mu=e=>e.__isSuspense;function Ac(e,t){t&&t.pendingBranch?me(e)?t.effects.push(...e):t.effects.push(e):Bl(e)}const Tt=Symbol.for("v-fgt"),ji=Symbol.for("v-txt"),yn=Symbol.for("v-cmt"),ai=Symbol.for("v-stc"),_r=[];let Et=null;function De(e=!1){_r.push(Et=e?null:[])}function Mc(){_r.pop(),Et=_r[_r.length-1]||null}let Cr=1;function Js(e,t=!1){Cr+=e,e<0&&Et&&t&&(Et.hasOnce=!0)}function gu(e){return e.dynamicChildren=Cr>0?Et||Hn:null,Mc(),Cr>0&&Et&&Et.push(e),e}function Ne(e,t,r,o,a,l){return gu(G(e,t,r,o,a,l,!0))}function ui(e,t,r,o,a){return gu(Ht(e,t,r,o,a,!0))}function vu(e){return e?e.__v_isVNode===!0:!1}function dr(e,t){return e.type===t.type&&e.key===t.key}const yu=({key:e})=>e??null,li=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Ye(e)||pt(e)||_e(e)?{i:Mt,r:e,k:t,f:!!r}:e:null);function G(e,t=null,r=null,o=0,a=null,l=e===Tt?0:1,f=!1,h=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&yu(t),ref:t&&li(t),scopeId:Ya,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Mt};return h?(rs(m,r),l&128&&e.normalize(m)):r&&(m.shapeFlag|=Ye(r)?8:16),Cr>0&&!f&&Et&&(m.patchFlag>0||l&6)&&m.patchFlag!==32&&Et.push(m),m}const Ht=Dc;function Dc(e,t=null,r=null,o=0,a=null,l=!1){if((!e||e===ec)&&(e=yn),vu(e)){const h=Zn(e,t,!0);return r&&rs(h,r),Cr>0&&!l&&Et&&(h.shapeFlag&6?Et[Et.indexOf(e)]=h:Et.push(h)),h.patchFlag=-2,h}if(Uc(e)&&(e=e.__vccOpts),t){t=Rc(t);let{class:h,style:m}=t;h&&!Ye(h)&&(t.class=Qn(h)),Ke(m)&&(Xo(m)&&!me(m)&&(m=mt({},m)),t.style=qo(m))}const f=Ye(e)?1:mu(e)?128:Ll(e)?64:Ke(e)?4:_e(e)?2:0;return G(e,t,r,o,a,f,l,!0)}function Rc(e){return e?Xo(e)||iu(e)?mt({},e):e:null}function Zn(e,t,r=!1,o=!1){const{props:a,ref:l,patchFlag:f,children:h,transition:m}=e,w=t?Ic(a||{},t):a,b={__v_isVNode:!0,__v_skip:!0,type:e.type,props:w,key:w&&yu(w),ref:t&&t.ref?r&&l?me(l)?l.concat(li(t)):[l,li(t)]:li(t):l,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:h,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Tt?f===-1?16:f|16:f,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:m,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Zn(e.ssContent),ssFallback:e.ssFallback&&Zn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return m&&o&&Qo(b,m.clone(b)),b}function An(e=" ",t=0){return Ht(ji,null,e,t)}function Fc(e,t){const r=Ht(ai,null,e);return r.staticCount=t,r}function kt(e="",t=!1){return t?(De(),ui(yn,null,e)):Ht(yn,null,e)}function Wt(e){return e==null||typeof e=="boolean"?Ht(yn):me(e)?Ht(Tt,null,e.slice()):vu(e)?pn(e):Ht(ji,null,String(e))}function pn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Zn(e)}function rs(e,t){let r=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(me(t))r=16;else if(typeof t=="object")if(o&65){const a=t.default;a&&(a._c&&(a._d=!1),rs(e,a()),a._c&&(a._d=!0));return}else{r=32;const a=t._;!a&&!iu(t)?t._ctx=Mt:a===3&&Mt&&(Mt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _e(t)?(t={default:t,_ctx:Mt},r=32):(t=String(t),o&64?(r=16,t=[An(t)]):r=8);e.children=t,e.shapeFlag|=r}function Ic(...e){const t={};for(let r=0;r<e.length;r++){const o=e[r];for(const a in o)if(a==="class")t.class!==o.class&&(t.class=Qn([t.class,o.class]));else if(a==="style")t.style=qo([t.style,o.style]);else if(ki(a)){const l=t[a],f=o[a];f&&l!==f&&!(me(l)&&l.includes(f))&&(t[a]=l?[].concat(l,f):f)}else a!==""&&(t[a]=o[a])}return t}function Lt(e,t,r,o=null){zt(e,t,7,[r,o])}const jc=tu();let Kc=0;function Bc(e,t,r){const o=e.type,a=(t?t.appContext:e.appContext)||jc,l={uid:Kc++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new sl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:su(o,a),emitsOptions:pu(o,a),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:o.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=Cc.bind(null,l),e.ce&&e.ce(l),l}let _t=null;const Nc=()=>_t||Mt;let wi,Fo;{const e=Oi(),t=(r,o)=>{let a;return(a=e[r])||(a=e[r]=[]),a.push(o),l=>{a.length>1?a.forEach(f=>f(l)):a[0](l)}};wi=t("__VUE_INSTANCE_SETTERS__",r=>_t=r),Fo=t("__VUE_SSR_SETTERS__",r=>Pr=r)}const Er=e=>{const t=_t;return wi(e),e.scope.on(),()=>{e.scope.off(),wi(t)}},Qs=()=>{_t&&_t.scope.off(),wi(null)};function bu(e){return e.vnode.shapeFlag&4}let Pr=!1;function $c(e,t=!1,r=!1){t&&Fo(t);const{props:o,children:a}=e.vnode,l=bu(e);cc(e,o,l,t),pc(e,a,r||t);const f=l?Lc(e,t):void 0;return t&&Fo(!1),f}function Lc(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,tc);const{setup:o}=r;if(o){en();const a=e.setupContext=o.length>1?Wc(e):null,l=Er(e),f=Tr(o,e,0,[e.props,a]),h=wa(f);if(tn(),l(),(h||e.sp)&&!yr(e)&&Xa(e),h){if(f.then(Qs,Qs),t)return f.then(m=>{Zs(e,m)}).catch(m=>{Di(m,e,0)});e.asyncDep=f}else Zs(e,f)}else _u(e)}function Zs(e,t,r){_e(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ke(t)&&(e.setupState=Ua(t)),_u(e)}function _u(e,t,r){const o=e.type;e.render||(e.render=o.render||Ut);{const a=Er(e);en();try{nc(e)}finally{tn(),a()}}}const qc={get(e,t){return ht(e,"get",""),e[t]}};function Wc(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,qc),slots:e.slots,emit:e.emit,expose:t}}function Ki(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ua(Tl(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in br)return br[r](e)},has(t,r){return r in t||r in br}})):e.proxy}function Uc(e){return _e(e)&&"__vccOpts"in e}const xi=(e,t)=>Rl(e,t,Pr),Hc="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Io;const ea=typeof window<"u"&&window.trustedTypes;if(ea)try{Io=ea.createPolicy("vue",{createHTML:e=>e})}catch{}const wu=Io?e=>Io.createHTML(e):e=>e,Vc="http://www.w3.org/2000/svg",zc="http://www.w3.org/1998/Math/MathML",Jt=typeof document<"u"?document:null,ta=Jt&&Jt.createElement("template"),Gc={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,o)=>{const a=t==="svg"?Jt.createElementNS(Vc,e):t==="mathml"?Jt.createElementNS(zc,e):r?Jt.createElement(e,{is:r}):Jt.createElement(e);return e==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:e=>Jt.createTextNode(e),createComment:e=>Jt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Jt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,o,a,l){const f=r?r.previousSibling:t.lastChild;if(a&&(a===l||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),r),!(a===l||!(a=a.nextSibling)););else{ta.innerHTML=wu(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const h=ta.content;if(o==="svg"||o==="mathml"){const m=h.firstChild;for(;m.firstChild;)h.appendChild(m.firstChild);h.removeChild(m)}t.insertBefore(h,r)}return[f?f.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},Yc=Symbol("_vtc");function Xc(e,t,r){const o=e[Yc];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const na=Symbol("_vod"),Jc=Symbol("_vsh"),Qc=Symbol(""),Zc=/(?:^|;)\s*display\s*:/;function ef(e,t,r){const o=e.style,a=Ye(r);let l=!1;if(r&&!a){if(t)if(Ye(t))for(const f of t.split(";")){const h=f.slice(0,f.indexOf(":")).trim();r[h]==null&&ci(o,h,"")}else for(const f in t)r[f]==null&&ci(o,f,"");for(const f in r)f==="display"&&(l=!0),ci(o,f,r[f])}else if(a){if(t!==r){const f=o[Qc];f&&(r+=";"+f),o.cssText=r,l=Zc.test(r)}}else t&&e.removeAttribute("style");na in e&&(e[na]=l?o.display:"",e[Jc]&&(o.display="none"))}const ra=/\s*!important$/;function ci(e,t,r){if(me(r))r.forEach(o=>ci(e,t,o));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const o=tf(e,t);ra.test(r)?e.setProperty(Rn(o),r.replace(ra,""),"important"):e[o]=r}}const ia=["Webkit","Moz","ms"],So={};function tf(e,t){const r=So[t];if(r)return r;let o=gn(t);if(o!=="filter"&&o in e)return So[t]=o;o=Ca(o);for(let a=0;a<ia.length;a++){const l=ia[a]+o;if(l in e)return So[t]=l}return t}const oa="http://www.w3.org/1999/xlink";function sa(e,t,r,o,a,l=rl(t)){o&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(oa,t.slice(6,t.length)):e.setAttributeNS(oa,t,r):r==null||l&&!ka(r)?e.removeAttribute(t):e.setAttribute(t,l?"":Vt(r)?String(r):r)}function aa(e,t,r,o,a){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?wu(r):r);return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const h=l==="OPTION"?e.getAttribute("value")||"":e.value,m=r==null?e.type==="checkbox"?"on":"":String(r);(h!==m||!("_value"in e))&&(e.value=m),r==null&&e.removeAttribute(t),e._value=r;return}let f=!1;if(r===""||r==null){const h=typeof e[t];h==="boolean"?r=ka(r):r==null&&h==="string"?(r="",f=!0):h==="number"&&(r=0,f=!0)}try{e[t]=r}catch{}f&&e.removeAttribute(a||t)}function On(e,t,r,o){e.addEventListener(t,r,o)}function nf(e,t,r,o){e.removeEventListener(t,r,o)}const ua=Symbol("_vei");function rf(e,t,r,o,a=null){const l=e[ua]||(e[ua]={}),f=l[t];if(o&&f)f.value=o;else{const[h,m]=of(t);if(o){const w=l[t]=uf(o,a);On(e,h,w,m)}else f&&(nf(e,h,f,m),l[t]=void 0)}}const la=/(?:Once|Passive|Capture)$/;function of(e){let t;if(la.test(e)){t={};let o;for(;o=e.match(la);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Rn(e.slice(2)),t]}let Co=0;const sf=Promise.resolve(),af=()=>Co||(sf.then(()=>Co=0),Co=Date.now());function uf(e,t){const r=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=r.attached)return;zt(lf(o,r.value),t,5,[o])};return r.value=e,r.attached=af(),r}function lf(e,t){if(me(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(o=>a=>!a._stopped&&o&&o(a))}else return t}const ca=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,cf=(e,t,r,o,a,l)=>{const f=a==="svg";t==="class"?Xc(e,o,f):t==="style"?ef(e,r,o):ki(t)?No(t)||rf(e,t,r,o,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ff(e,t,o,f))?(aa(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&sa(e,t,o,f,l,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ye(o))?aa(e,gn(t),o,l,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),sa(e,t,o,f))};function ff(e,t,r,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&ca(t)&&_e(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return ca(t)&&Ye(r)?!1:t in e}const Si=e=>{const t=e.props["onUpdate:modelValue"]||!1;return me(t)?r=>ii(t,r):t};function df(e){e.target.composing=!0}function fa(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Jn=Symbol("_assign"),hf={created(e,{modifiers:{lazy:t,trim:r,number:o}},a){e[Jn]=Si(a);const l=o||a.props&&a.props.type==="number";On(e,t?"change":"input",f=>{if(f.target.composing)return;let h=e.value;r&&(h=h.trim()),l&&(h=di(h)),e[Jn](h)}),r&&On(e,"change",()=>{e.value=e.value.trim()}),t||(On(e,"compositionstart",df),On(e,"compositionend",fa),On(e,"change",fa))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:o,trim:a,number:l}},f){if(e[Jn]=Si(f),e.composing)return;const h=(l||e.type==="number")&&!/^0\d/.test(e.value)?di(e.value):e.value,m=t??"";h!==m&&(document.activeElement===e&&e.type!=="range"&&(o&&t===r||a&&e.value.trim()===m)||(e.value=m))}},jo={deep:!0,created(e,{value:t,modifiers:{number:r}},o){const a=Ti(t);On(e,"change",()=>{const l=Array.prototype.filter.call(e.options,f=>f.selected).map(f=>r?di(Ci(f)):Ci(f));e[Jn](e.multiple?a?new Set(l):l:l[0]),e._assigning=!0,gi(()=>{e._assigning=!1})}),e[Jn]=Si(o)},mounted(e,{value:t}){da(e,t)},beforeUpdate(e,t,r){e[Jn]=Si(r)},updated(e,{value:t}){e._assigning||da(e,t)}};function da(e,t){const r=e.multiple,o=me(t);if(!(r&&!o&&!Ti(t))){for(let a=0,l=e.options.length;a<l;a++){const f=e.options[a],h=Ci(f);if(r)if(o){const m=typeof h;m==="string"||m==="number"?f.selected=t.some(w=>String(w)===String(h)):f.selected=ol(t,h)>-1}else f.selected=t.has(h);else if(Ai(Ci(f),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ci(e){return"_value"in e?e._value:e.value}const pf=mt({patchProp:cf},Gc);let ha;function mf(){return ha||(ha=gc(pf))}const gf=((...e)=>{const t=mf().createApp(...e),{mount:r}=t;return t.mount=o=>{const a=yf(o);if(!a)return;const l=t._component;!_e(l)&&!l.render&&!l.template&&(l.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const f=r(a,!1,vf(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),f},t});function vf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function yf(e){return Ye(e)?document.querySelector(e):e}async function bf(e,t,r=30,o=.01){const a=e.sampleRate,l=e.getChannelData(0),f=t.getChannelData(0),h=100,m=pa(l,h),w=pa(f,h);let b=0,k=-1/0;const I=Math.floor(r*a/h),$=Math.floor(o*a/h);for(let B=-I;B<=I;B+=$){const z=_f(m,w,B);z>k&&(k=z,b=B*h/a)}return{offset:b,confidence:Math.min(k/1e3,1)}}function pa(e,t){const r=Math.floor(e.length/t),o=new Float32Array(r);for(let a=0;a<r;a++){let l=0;for(let f=0;f<t;f++)l+=Math.abs(e[a*t+f]||0);o[a]=l/t}return o}function _f(e,t,r){const o=Math.min(e.length,t.length)-Math.abs(r),a=Math.min(o,1e4);let l=0;const f=r>0?0:-r,h=r>0?r:0;for(let m=0;m<a;m++){const w=e[f+m]||0,b=t[h+m]||0;l+=w*b}return l/a}async function ma(e){if(!e)throw new Error("Audio blob is not available");const t=new AudioContext,r=await e.arrayBuffer();return await t.decodeAudioData(r)}async function ga(e,t,r=0){if(!t)throw new Error("OpenAI API");const o=new FormData;o.append("file",e,"audio.mp3"),o.append("model","whisper-1"),o.append("response_format","verbose_json"),o.append("timestamp_granularities[]","segment"),o.append("language","ja");try{const a=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:o});if(!a.ok){const h=await a.json();throw new Error(h.error?.message||"API")}const l=await a.json();return{segments:(l.segments||[]).map((h,m)=>({id:`whisper_${Date.now()}_${m}`,start:h.start+r,end:h.end+r,text:h.text.trim(),speaker:"1"})),fullText:l.text||"",language:l.language||"ja",duration:l.duration}}catch(a){throw console.error("Transcription error:",a),a}}var wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fi={exports:{}},Sf=fi.exports,va;function Cf(){return va||(va=1,(function(e,t){(function(r,o){e.exports=o()})(Sf,function(){var r=function(n,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(s[c]=u[c])})(n,i)},o=function(){return(o=Object.assign||function(n){for(var i,s=1,u=arguments.length;s<u;s++)for(var c in i=arguments[s])Object.prototype.hasOwnProperty.call(i,c)&&(n[c]=i[c]);return n}).apply(this,arguments)};function a(n,i,s){for(var u,c=0,d=i.length;c<d;c++)!u&&c in i||((u=u||Array.prototype.slice.call(i,0,c))[c]=i[c]);return n.concat(u||Array.prototype.slice.call(i))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:wf,f=Object.keys,h=Array.isArray;function m(n,i){return typeof i!="object"||f(i).forEach(function(s){n[s]=i[s]}),n}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var w=Object.getPrototypeOf,b={}.hasOwnProperty;function k(n,i){return b.call(n,i)}function I(n,i){typeof i=="function"&&(i=i(w(n))),(typeof Reflect>"u"?f:Reflect.ownKeys)(i).forEach(function(s){B(n,s,i[s])})}var $=Object.defineProperty;function B(n,i,s,u){$(n,i,m(s&&k(s,"get")&&typeof s.get=="function"?{get:s.get,set:s.set,configurable:!0}:{value:s,configurable:!0,writable:!0},u))}function z(n){return{from:function(i){return n.prototype=Object.create(i.prototype),B(n.prototype,"constructor",n),{extend:I.bind(null,n.prototype)}}}}var te=Object.getOwnPropertyDescriptor,se=[].slice;function le(n,i,s){return se.call(n,i,s)}function we(n,i){return i(n)}function ae(n){if(!n)throw new Error("Assertion Failed")}function pe(n){l.setImmediate?setImmediate(n):setTimeout(n,0)}function xe(n,i){if(typeof i=="string"&&k(n,i))return n[i];if(!i)return n;if(typeof i!="string"){for(var s=[],u=0,c=i.length;u<c;++u){var d=xe(n,i[u]);s.push(d)}return s}var g=i.indexOf(".");if(g!==-1){var y=n[i.substr(0,g)];return y==null?void 0:xe(y,i.substr(g+1))}}function Ce(n,i,s){if(n&&i!==void 0&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof i!="string"&&"length"in i){ae(typeof s!="string"&&"length"in s);for(var u=0,c=i.length;u<c;++u)Ce(n,i[u],s[u])}else{var d,g,y=i.indexOf(".");y!==-1?(d=i.substr(0,y),(g=i.substr(y+1))===""?s===void 0?h(n)&&!isNaN(parseInt(d))?n.splice(d,1):delete n[d]:n[d]=s:Ce(y=!(y=n[d])||!k(n,d)?n[d]={}:y,g,s)):s===void 0?h(n)&&!isNaN(parseInt(i))?n.splice(i,1):delete n[i]:n[i]=s}}function qe(n){var i,s={};for(i in n)k(n,i)&&(s[i]=n[i]);return s}var st=[].concat;function ze(n){return st.apply([],n)}var ye="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ze([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(i){return i+n+"Array"})}))).filter(function(n){return l[n]}),xt=new Set(ye.map(function(n){return l[n]})),tt=null;function nt(n){return tt=new WeakMap,n=(function i(s){if(!s||typeof s!="object")return s;var u=tt.get(s);if(u)return u;if(h(s)){u=[],tt.set(s,u);for(var c=0,d=s.length;c<d;++c)u.push(i(s[c]))}else if(xt.has(s.constructor))u=s;else{var g,y=w(s);for(g in u=y===Object.prototype?{}:Object.create(y),tt.set(s,u),s)k(s,g)&&(u[g]=i(s[g]))}return u})(n),tt=null,n}var jt={}.toString;function rn(n){return jt.call(n).slice(8,-1)}var We=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Re=typeof We=="symbol"?function(n){var i;return n!=null&&(i=n[We])&&i.apply(n)}:function(){return null};function Se(n,i){return i=n.indexOf(i),0<=i&&n.splice(i,1),0<=i}var at={};function ut(n){var i,s,u,c;if(arguments.length===1){if(h(n))return n.slice();if(this===at&&typeof n=="string")return[n];if(c=Re(n)){for(s=[];!(u=c.next()).done;)s.push(u.value);return s}if(n==null)return[n];if(typeof(i=n.length)!="number")return[n];for(s=new Array(i);i--;)s[i]=n[i];return s}for(i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return s}var St=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},he=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],At=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(he),lt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Rt(n,i){this.name=n,this.message=i}function bn(n,i){return n+". Errors: "+Object.keys(i).map(function(s){return i[s].toString()}).filter(function(s,u,c){return c.indexOf(s)===u}).join(`
`)}function on(n,i,s,u){this.failures=i,this.failedKeys=u,this.successCount=s,this.message=bn(n,i)}function Xe(n,i){this.name="BulkError",this.failures=Object.keys(i).map(function(s){return i[s]}),this.failuresByPos=i,this.message=bn(n,this.failures)}z(Rt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),z(on).from(Rt),z(Xe).from(Rt);var Ft=At.reduce(function(n,i){return n[i]=i+"Error",n},{}),Ot=Rt,ce=At.reduce(function(n,i){var s=i+"Error";function u(c,d){this.name=s,c?typeof c=="string"?(this.message="".concat(c).concat(d?`
 `+d:""),this.inner=d||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=lt[i]||s,this.inner=null)}return z(u).from(Ot),n[i]=u,n},{});ce.Syntax=SyntaxError,ce.Type=TypeError,ce.Range=RangeError;var L=he.reduce(function(n,i){return n[i+"Error"]=ce[i],n},{}),q=At.reduce(function(n,i){return["Syntax","Type","Range"].indexOf(i)===-1&&(n[i+"Error"]=ce[i]),n},{});function p(){}function v(n){return n}function S(n,i){return n==null||n===v?i:function(s){return i(n(s))}}function F(n,i){return function(){n.apply(this,arguments),i.apply(this,arguments)}}function N(n,i){return n===p?i:function(){var s=n.apply(this,arguments);s!==void 0&&(arguments[0]=s);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=i.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?F(u,this.onsuccess):u),c&&(this.onerror=this.onerror?F(c,this.onerror):c),d!==void 0?d:s}}function W(n,i){return n===p?i:function(){n.apply(this,arguments);var s=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,i.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?F(s,this.onsuccess):s),u&&(this.onerror=this.onerror?F(u,this.onerror):u)}}function Z(n,i){return n===p?i:function(s){var u=n.apply(this,arguments);m(s,u);var c=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,s=i.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?F(c,this.onsuccess):c),d&&(this.onerror=this.onerror?F(d,this.onerror):d),u===void 0?s===void 0?void 0:s:m(u,s)}}function J(n,i){return n===p?i:function(){return i.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function X(n,i){return n===p?i:function(){var s=n.apply(this,arguments);if(s&&typeof s.then=="function"){for(var u=this,c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return s.then(function(){return i.apply(u,d)})}return i.apply(this,arguments)}}q.ModifyError=on,q.DexieError=Rt,q.BulkError=Xe;var U=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function de(n){U=n}var ne={},fe=100,ye=typeof Promise>"u"?[]:(function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,w(n),n];var i=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[i,w(i),n]})(),he=ye[0],At=ye[1],ye=ye[2],At=At&&At.then,ke=he&&he.constructor,Ee=!!ye,Ge=function(n,i){sn.push([n,i]),gt&&(queueMicrotask(Cu),gt=!1)},Je=!0,gt=!0,Qe=[],Kt=[],Fn=v,$e={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:p,pgp:!1,env:{},finalize:p},ue=$e,sn=[],Bt=0,Ar=[];function ie(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var i=this._PSD=ue;if(typeof n!="function"){if(n!==ne)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ni(this,this._value))}this._state=null,this._value=null,++i.ref,(function s(u,c){try{c(function(d){if(u._state===null){if(d===u)throw new TypeError("A promise cannot be resolved with itself.");var g=u._lib&&In();d&&typeof d.then=="function"?s(u,function(y,x){d instanceof ie?d._then(y,x):d.then(y,x)}):(u._state=!0,u._value=d,ss(u)),g&&jn()}},Ni.bind(null,u))}catch(d){Ni(u,d)}})(this,n)}var Bi={get:function(){var n=ue,i=Fr;function s(u,c){var d=this,g=!n.global&&(n!==ue||i!==Fr),y=g&&!un(),x=new ie(function(P,E){$i(d,new os(us(u,n,g,y),us(c,n,g,y),P,E,n))});return this._consoleTask&&(x._consoleTask=this._consoleTask),x}return s.prototype=ne,s},set:function(n){B(this,"then",n&&n.prototype===ne?Bi:{get:function(){return n},set:Bi.set})}};function os(n,i,s,u,c){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof i=="function"?i:null,this.resolve=s,this.reject=u,this.psd=c}function Ni(n,i){var s,u;Kt.push(i),n._state===null&&(s=n._lib&&In(),i=Fn(i),n._state=!1,n._value=i,u=n,Qe.some(function(c){return c._value===u._value})||Qe.push(u),ss(n),s&&jn())}function ss(n){var i=n._listeners;n._listeners=[];for(var s=0,u=i.length;s<u;++s)$i(n,i[s]);var c=n._PSD;--c.ref||c.finalize(),Bt===0&&(++Bt,Ge(function(){--Bt==0&&Li()},[]))}function $i(n,i){if(n._state!==null){var s=n._state?i.onFulfilled:i.onRejected;if(s===null)return(n._state?i.resolve:i.reject)(n._value);++i.psd.ref,++Bt,Ge(Su,[s,n,i])}else n._listeners.push(i)}function Su(n,i,s){try{var u,c=i._value;!i._state&&Kt.length&&(Kt=[]),u=U&&i._consoleTask?i._consoleTask.run(function(){return n(c)}):n(c),i._state||Kt.indexOf(c)!==-1||(function(d){for(var g=Qe.length;g;)if(Qe[--g]._value===d._value)return Qe.splice(g,1)})(i),s.resolve(u)}catch(d){s.reject(d)}finally{--Bt==0&&Li(),--s.psd.ref||s.psd.finalize()}}function Cu(){_n($e,function(){In()&&jn()})}function In(){var n=Je;return gt=Je=!1,n}function jn(){var n,i,s;do for(;0<sn.length;)for(n=sn,sn=[],s=n.length,i=0;i<s;++i){var u=n[i];u[0].apply(null,u[1])}while(0<sn.length);gt=Je=!0}function Li(){var n=Qe;Qe=[],n.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var i=Ar.slice(0),s=i.length;s;)i[--s]()}function Mr(n){return new ie(ne,!1,n)}function Be(n,i){var s=ue;return function(){var u=In(),c=ue;try{return ln(s,!0),n.apply(this,arguments)}catch(d){i&&i(d)}finally{ln(c,!1),u&&jn()}}}I(ie.prototype,{then:Bi,_then:function(n,i){$i(this,new os(null,null,n,i,ue))},catch:function(n){if(arguments.length===1)return this.then(null,n);var i=n,s=arguments[1];return typeof i=="function"?this.then(null,function(u){return(u instanceof i?s:Mr)(u)}):this.then(null,function(u){return(u&&u.name===i?s:Mr)(u)})},finally:function(n){return this.then(function(i){return ie.resolve(n()).then(function(){return i})},function(i){return ie.resolve(n()).then(function(){return Mr(i)})})},timeout:function(n,i){var s=this;return n<1/0?new ie(function(u,c){var d=setTimeout(function(){return c(new ce.Timeout(i))},n);s.then(u,c).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&B(ie.prototype,Symbol.toStringTag,"Dexie.Promise"),$e.env=as(),I(ie,{all:function(){var n=ut.apply(null,arguments).map(Ir);return new ie(function(i,s){n.length===0&&i([]);var u=n.length;n.forEach(function(c,d){return ie.resolve(c).then(function(g){n[d]=g,--u||i(n)},s)})})},resolve:function(n){return n instanceof ie?n:n&&typeof n.then=="function"?new ie(function(i,s){n.then(i,s)}):new ie(ne,!0,n)},reject:Mr,race:function(){var n=ut.apply(null,arguments).map(Ir);return new ie(function(i,s){n.map(function(u){return ie.resolve(u).then(i,s)})})},PSD:{get:function(){return ue},set:function(n){return ue=n}},totalEchoes:{get:function(){return Fr}},newPSD:an,usePSD:_n,scheduler:{get:function(){return Ge},set:function(n){Ge=n}},rejectionMapper:{get:function(){return Fn},set:function(n){Fn=n}},follow:function(n,i){return new ie(function(s,u){return an(function(c,d){var g=ue;g.unhandleds=[],g.onunhandled=d,g.finalize=F(function(){var y,x=this;y=function(){x.unhandleds.length===0?c():d(x.unhandleds[0])},Ar.push(function P(){y(),Ar.splice(Ar.indexOf(P),1)}),++Bt,Ge(function(){--Bt==0&&Li()},[])},g.finalize),n()},i,s,u)})}}),ke&&(ke.allSettled&&B(ie,"allSettled",function(){var n=ut.apply(null,arguments).map(Ir);return new ie(function(i){n.length===0&&i([]);var s=n.length,u=new Array(s);n.forEach(function(c,d){return ie.resolve(c).then(function(g){return u[d]={status:"fulfilled",value:g}},function(g){return u[d]={status:"rejected",reason:g}}).then(function(){return--s||i(u)})})})}),ke.any&&typeof AggregateError<"u"&&B(ie,"any",function(){var n=ut.apply(null,arguments).map(Ir);return new ie(function(i,s){n.length===0&&s(new AggregateError([]));var u=n.length,c=new Array(u);n.forEach(function(d,g){return ie.resolve(d).then(function(y){return i(y)},function(y){c[g]=y,--u||s(new AggregateError(c))})})})}),ke.withResolvers&&(ie.withResolvers=ke.withResolvers));var Ze={awaits:0,echoes:0,id:0},Pu=0,Dr=[],Rr=0,Fr=0,ku=0;function an(n,i,s,u){var c=ue,d=Object.create(c);return d.parent=c,d.ref=0,d.global=!1,d.id=++ku,$e.env,d.env=Ee?{Promise:ie,PromiseProp:{value:ie,configurable:!0,writable:!0},all:ie.all,race:ie.race,allSettled:ie.allSettled,any:ie.any,resolve:ie.resolve,reject:ie.reject}:{},i&&m(d,i),++c.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},u=_n(d,n,s,u),d.ref===0&&d.finalize(),u}function Kn(){return Ze.id||(Ze.id=++Pu),++Ze.awaits,Ze.echoes+=fe,Ze.id}function un(){return!!Ze.awaits&&(--Ze.awaits==0&&(Ze.id=0),Ze.echoes=Ze.awaits*fe,!0)}function Ir(n){return Ze.echoes&&n&&n.constructor===ke?(Kn(),n.then(function(i){return un(),i},function(i){return un(),Ue(i)})):n}function Tu(){var n=Dr[Dr.length-1];Dr.pop(),ln(n,!1)}function ln(n,i){var s,u=ue;(i?!Ze.echoes||Rr++&&n===ue:!Rr||--Rr&&n===ue)||queueMicrotask(i?(function(c){++Fr,Ze.echoes&&--Ze.echoes!=0||(Ze.echoes=Ze.awaits=Ze.id=0),Dr.push(ue),ln(c,!0)}).bind(null,n):Tu),n!==ue&&(ue=n,u===$e&&($e.env=as()),Ee&&(s=$e.env.Promise,i=n.env,(u.global||n.global)&&(Object.defineProperty(l,"Promise",i.PromiseProp),s.all=i.all,s.race=i.race,s.resolve=i.resolve,s.reject=i.reject,i.allSettled&&(s.allSettled=i.allSettled),i.any&&(s.any=i.any))))}function as(){var n=l.Promise;return Ee?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function _n(n,i,s,u,c){var d=ue;try{return ln(n,!0),i(s,u,c)}finally{ln(d,!1)}}function us(n,i,s,u){return typeof n!="function"?n:function(){var c=ue;s&&Kn(),ln(i,!0);try{return n.apply(this,arguments)}finally{ln(c,!1),u&&queueMicrotask(un)}}}function qi(n){Promise===ke&&Ze.echoes===0?Rr===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}(""+At).indexOf("[native code]")===-1&&(Kn=un=p);var Ue=ie.reject,wn="",Gt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ls="String expected.",Bn=[],jr="__dbnames",Wi="readonly",Ui="readwrite";function xn(n,i){return n?i?function(){return n.apply(this,arguments)&&i.apply(this,arguments)}:n:i}var cs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Kr(n){return typeof n!="string"||/\./.test(n)?function(i){return i}:function(i){return i[n]===void 0&&n in i&&delete(i=nt(i))[n],i}}function fs(){throw ce.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Pe(n,i){try{var s=ds(n),u=ds(i);if(s!==u)return s==="Array"?1:u==="Array"?-1:s==="binary"?1:u==="binary"?-1:s==="string"?1:u==="string"?-1:s==="Date"?1:u!=="Date"?NaN:-1;switch(s){case"number":case"Date":case"string":return i<n?1:n<i?-1:0;case"binary":return(function(c,d){for(var g=c.length,y=d.length,x=g<y?g:y,P=0;P<x;++P)if(c[P]!==d[P])return c[P]<d[P]?-1:1;return g===y?0:g<y?-1:1})(hs(n),hs(i));case"Array":return(function(c,d){for(var g=c.length,y=d.length,x=g<y?g:y,P=0;P<x;++P){var E=Pe(c[P],d[P]);if(E!==0)return E}return g===y?0:g<y?-1:1})(n,i)}}catch{}return NaN}function ds(n){var i=typeof n;return i!="object"?i:ArrayBuffer.isView(n)?"binary":(n=rn(n),n==="ArrayBuffer"?"binary":n)}function hs(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function Br(n,i,s){var u=n.schema.yProps;return u?(i&&0<s.numFailures&&(i=i.filter(function(c,d){return!s.failures[d]})),Promise.all(u.map(function(c){return c=c.updatesTable,i?n.db.table(c).where("k").anyOf(i).delete():n.db.table(c).clear()})).then(function(){return s})):s}var ps=(je.prototype._trans=function(n,i,s){var u=this._tx||ue.trans,c=this.name,d=U&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function g(P,E,_){if(!_.schema[c])throw new ce.NotFound("Table "+c+" not part of transaction");return i(_.idbtrans,_)}var y=In();try{var x=u&&u.db._novip===this.db._novip?u===ue.trans?u._promise(n,g,s):an(function(){return u._promise(n,g,s)},{trans:u,transless:ue.transless||ue}):(function P(E,_,M,C){if(E.idbdb&&(E._state.openComplete||ue.letThrough||E._vip)){var T=E._createTransaction(_,M,E._dbSchema);try{T.create(),E._state.PR1398_maxLoop=3}catch(A){return A.name===Ft.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return P(E,_,M,C)})):Ue(A)}return T._promise(_,function(A,O){return an(function(){return ue.trans=T,C(A,O,T)})}).then(function(A){if(_==="readwrite")try{T.idbtrans.commit()}catch{}return _==="readonly"?A:T._completion.then(function(){return A})})}if(E._state.openComplete)return Ue(new ce.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return Ue(new ce.DatabaseClosed);E.open().catch(p)}return E._state.dbReadyPromise.then(function(){return P(E,_,M,C)})})(this.db,n,[this.name],g);return d&&(x._consoleTask=d,x=x.catch(function(P){return console.trace(P),Ue(P)})),x}finally{y&&jn()}},je.prototype.get=function(n,i){var s=this;return n&&n.constructor===Object?this.where(n).first(i):n==null?Ue(new ce.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return s.core.get({trans:u,key:n}).then(function(c){return s.hook.reading.fire(c)})}).then(i)},je.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(h(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var i=f(n);if(i.length===1)return this.where(i[0]).equals(n[i[0]]);var s=this.schema.indexes.concat(this.schema.primKey).filter(function(y){if(y.compound&&i.every(function(P){return 0<=y.keyPath.indexOf(P)})){for(var x=0;x<i.length;++x)if(i.indexOf(y.keyPath[x])===-1)return!1;return!0}return!1}).sort(function(y,x){return y.keyPath.length-x.keyPath.length})[0];if(s&&this.db._maxKey!==wn){var d=s.keyPath.slice(0,i.length);return this.where(d).equals(d.map(function(x){return n[x]}))}!s&&U&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var u=this.schema.idxByName;function c(y,x){return Pe(y,x)===0}var g=i.reduce(function(_,x){var P=_[0],E=_[1],_=u[x],M=n[x];return[P||_,P||!_?xn(E,_&&_.multi?function(C){return C=xe(C,x),h(C)&&C.some(function(T){return c(M,T)})}:function(C){return c(M,xe(C,x))}):E]},[null,null]),d=g[0],g=g[1];return d?this.where(d.name).equals(n[d.keyPath]).filter(g):s?this.filter(g):this.where(i).equals("")},je.prototype.filter=function(n){return this.toCollection().and(n)},je.prototype.count=function(n){return this.toCollection().count(n)},je.prototype.offset=function(n){return this.toCollection().offset(n)},je.prototype.limit=function(n){return this.toCollection().limit(n)},je.prototype.each=function(n){return this.toCollection().each(n)},je.prototype.toArray=function(n){return this.toCollection().toArray(n)},je.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},je.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,h(n)?"[".concat(n.join("+"),"]"):n))},je.prototype.reverse=function(){return this.toCollection().reverse()},je.prototype.mapToClass=function(n){var i,s=this.db,u=this.name;function c(){return i!==null&&i.apply(this,arguments)||this}(this.schema.mappedClass=n).prototype instanceof fs&&((function(x,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function E(){this.constructor=x}r(x,P),x.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)})(c,i=n),Object.defineProperty(c.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),c.prototype.table=function(){return u},n=c);for(var d=new Set,g=n.prototype;g;g=w(g))Object.getOwnPropertyNames(g).forEach(function(x){return d.add(x)});function y(x){if(!x)return x;var P,E=Object.create(n.prototype);for(P in x)if(!d.has(P))try{E[P]=x[P]}catch{}return E}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=y,this.hook("reading",y),n},je.prototype.defineClass=function(){return this.mapToClass(function(n){m(this,n)})},je.prototype.add=function(n,i){var s=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,g=n;return d&&c&&(g=Kr(d)(n)),this._trans("readwrite",function(y){return s.core.mutate({trans:y,type:"add",keys:i!=null?[i]:null,values:[g]})}).then(function(y){return y.numFailures?ie.reject(y.failures[0]):y.lastResult}).then(function(y){if(d)try{Ce(n,d,y)}catch{}return y})},je.prototype.update=function(n,i){return typeof n!="object"||h(n)?this.where(":id").equals(n).modify(i):(n=xe(n,this.schema.primKey.keyPath),n===void 0?Ue(new ce.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(i))},je.prototype.put=function(n,i){var s=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,g=n;return d&&c&&(g=Kr(d)(n)),this._trans("readwrite",function(y){return s.core.mutate({trans:y,type:"put",values:[g],keys:i!=null?[i]:null})}).then(function(y){return y.numFailures?ie.reject(y.failures[0]):y.lastResult}).then(function(y){if(d)try{Ce(n,d,y)}catch{}return y})},je.prototype.delete=function(n){var i=this;return this._trans("readwrite",function(s){return i.core.mutate({trans:s,type:"delete",keys:[n]}).then(function(u){return Br(i,[n],u)}).then(function(u){return u.numFailures?ie.reject(u.failures[0]):void 0})})},je.prototype.clear=function(){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"deleteRange",range:cs}).then(function(s){return Br(n,null,s)})}).then(function(i){return i.numFailures?ie.reject(i.failures[0]):void 0})},je.prototype.bulkGet=function(n){var i=this;return this._trans("readonly",function(s){return i.core.getMany({keys:n,trans:s}).then(function(u){return u.map(function(c){return i.hook.reading.fire(c)})})})},je.prototype.bulkAdd=function(n,i,s){var u=this,c=Array.isArray(i)?i:void 0,d=(s=s||(c?void 0:i))?s.allKeys:void 0;return this._trans("readwrite",function(g){var P=u.schema.primKey,y=P.auto,P=P.keyPath;if(P&&c)throw new ce.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new ce.InvalidArgument("Arguments objects and keys must have the same length");var x=n.length,P=P&&y?n.map(Kr(P)):n;return u.core.mutate({trans:g,type:"add",keys:c,values:P,wantResults:d}).then(function(T){var _=T.numFailures,M=T.results,C=T.lastResult,T=T.failures;if(_===0)return d?M:C;throw new Xe("".concat(u.name,".bulkAdd(): ").concat(_," of ").concat(x," operations failed"),T)})})},je.prototype.bulkPut=function(n,i,s){var u=this,c=Array.isArray(i)?i:void 0,d=(s=s||(c?void 0:i))?s.allKeys:void 0;return this._trans("readwrite",function(g){var P=u.schema.primKey,y=P.auto,P=P.keyPath;if(P&&c)throw new ce.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==n.length)throw new ce.InvalidArgument("Arguments objects and keys must have the same length");var x=n.length,P=P&&y?n.map(Kr(P)):n;return u.core.mutate({trans:g,type:"put",keys:c,values:P,wantResults:d}).then(function(T){var _=T.numFailures,M=T.results,C=T.lastResult,T=T.failures;if(_===0)return d?M:C;throw new Xe("".concat(u.name,".bulkPut(): ").concat(_," of ").concat(x," operations failed"),T)})})},je.prototype.bulkUpdate=function(n){var i=this,s=this.core,u=n.map(function(g){return g.key}),c=n.map(function(g){return g.changes}),d=[];return this._trans("readwrite",function(g){return s.getMany({trans:g,keys:u,cache:"clone"}).then(function(y){var x=[],P=[];n.forEach(function(_,M){var C=_.key,T=_.changes,A=y[M];if(A){for(var O=0,D=Object.keys(T);O<D.length;O++){var R=D[O],j=T[R];if(R===i.schema.primKey.keyPath){if(Pe(j,C)!==0)throw new ce.Constraint("Cannot update primary key in bulkUpdate()")}else Ce(A,R,j)}d.push(M),x.push(C),P.push(A)}});var E=x.length;return s.mutate({trans:g,type:"put",keys:x,values:P,updates:{keys:u,changeSpecs:c}}).then(function(_){var M=_.numFailures,C=_.failures;if(M===0)return E;for(var T=0,A=Object.keys(C);T<A.length;T++){var O,D=A[T],R=d[Number(D)];R!=null&&(O=C[D],delete C[D],C[R]=O)}throw new Xe("".concat(i.name,".bulkUpdate(): ").concat(M," of ").concat(E," operations failed"),C)})})})},je.prototype.bulkDelete=function(n){var i=this,s=n.length;return this._trans("readwrite",function(u){return i.core.mutate({trans:u,type:"delete",keys:n}).then(function(c){return Br(i,n,c)})}).then(function(g){var c=g.numFailures,d=g.lastResult,g=g.failures;if(c===0)return d;throw new Xe("".concat(i.name,".bulkDelete(): ").concat(c," of ").concat(s," operations failed"),g)})},je);function je(){}function nr(n){function i(g,y){if(y){for(var x=arguments.length,P=new Array(x-1);--x;)P[x-1]=arguments[x];return s[g].subscribe.apply(null,P),n}if(typeof g=="string")return s[g]}var s={};i.addEventType=d;for(var u=1,c=arguments.length;u<c;++u)d(arguments[u]);return i;function d(g,y,x){if(typeof g!="object"){var P;y=y||J;var E={subscribers:[],fire:x=x||p,subscribe:function(_){E.subscribers.indexOf(_)===-1&&(E.subscribers.push(_),E.fire=y(E.fire,_))},unsubscribe:function(_){E.subscribers=E.subscribers.filter(function(M){return M!==_}),E.fire=E.subscribers.reduce(y,x)}};return s[g]=i[g]=E}f(P=g).forEach(function(_){var M=P[_];if(h(M))d(_,P[_][0],P[_][1]);else{if(M!=="asap")throw new ce.InvalidArgument("Invalid event config");var C=d(_,v,function(){for(var T=arguments.length,A=new Array(T);T--;)A[T]=arguments[T];C.subscribers.forEach(function(O){pe(function(){O.apply(null,A)})})})}})}}function rr(n,i){return z(i).from({prototype:n}),i}function Nn(n,i){return!(n.filter||n.algorithm||n.or)&&(i?n.justLimit:!n.replayFilter)}function Hi(n,i){n.filter=xn(n.filter,i)}function Vi(n,i,s){var u=n.replayFilter;n.replayFilter=u?function(){return xn(u(),i())}:i,n.justLimit=s&&!u}function Nr(n,i){if(n.isPrimKey)return i.primaryKey;var s=i.getIndexByKeyPath(n.index);if(!s)throw new ce.Schema("KeyPath "+n.index+" on object store "+i.name+" is not indexed");return s}function ms(n,i,s){var u=Nr(n,i.schema);return i.openCursor({trans:s,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:u,range:n.range}})}function $r(n,i,s,u){var c=n.replayFilter?xn(n.filter,n.replayFilter()):n.filter;if(n.or){var d={},g=function(y,x,P){var E,_;c&&!c(x,P,function(M){return x.stop(M)},function(M){return x.fail(M)})||((_=""+(E=x.primaryKey))=="[object ArrayBuffer]"&&(_=""+new Uint8Array(E)),k(d,_)||(d[_]=!0,i(y,x,P)))};return Promise.all([n.or._iterate(g,s),gs(ms(n,u,s),n.algorithm,g,!n.keysOnly&&n.valueMapper)])}return gs(ms(n,u,s),xn(n.algorithm,c),i,!n.keysOnly&&n.valueMapper)}function gs(n,i,s,u){var c=Be(u?function(d,g,y){return s(u(d),g,y)}:s);return n.then(function(d){if(d)return d.start(function(){var g=function(){return d.continue()};i&&!i(d,function(y){return g=y},function(y){d.stop(y),g=p},function(y){d.fail(y),g=p})||c(d.value,d,function(y){return g=y}),g()})})}var ir=(vs.prototype.execute=function(n){var i=this["@@propmod"];if(i.add!==void 0){var s=i.add;if(h(s))return a(a([],h(n)?n:[],!0),s).sort();if(typeof s=="number")return(Number(n)||0)+s;if(typeof s=="bigint")try{return BigInt(n)+s}catch{return BigInt(0)+s}throw new TypeError("Invalid term ".concat(s))}if(i.remove!==void 0){var u=i.remove;if(h(u))return h(n)?n.filter(function(c){return!u.includes(c)}).sort():[];if(typeof u=="number")return Number(n)-u;if(typeof u=="bigint")try{return BigInt(n)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return s=(s=i.replacePrefix)===null||s===void 0?void 0:s[0],s&&typeof n=="string"&&n.startsWith(s)?i.replacePrefix[1]+n.substring(s.length):n},vs);function vs(n){this["@@propmod"]=n}var Eu=(Oe.prototype._read=function(n,i){var s=this._ctx;return s.error?s.table._trans(null,Ue.bind(null,s.error)):s.table._trans("readonly",n).then(i)},Oe.prototype._write=function(n){var i=this._ctx;return i.error?i.table._trans(null,Ue.bind(null,i.error)):i.table._trans("readwrite",n,"locked")},Oe.prototype._addAlgorithm=function(n){var i=this._ctx;i.algorithm=xn(i.algorithm,n)},Oe.prototype._iterate=function(n,i){return $r(this._ctx,n,i,this._ctx.table.core)},Oe.prototype.clone=function(n){var i=Object.create(this.constructor.prototype),s=Object.create(this._ctx);return n&&m(s,n),i._ctx=s,i},Oe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Oe.prototype.each=function(n){var i=this._ctx;return this._read(function(s){return $r(i,n,s,i.table.core)})},Oe.prototype.count=function(n){var i=this;return this._read(function(s){var u=i._ctx,c=u.table.core;if(Nn(u,!0))return c.count({trans:s,query:{index:Nr(u,c.schema),range:u.range}}).then(function(g){return Math.min(g,u.limit)});var d=0;return $r(u,function(){return++d,!1},s,c).then(function(){return d})}).then(n)},Oe.prototype.sortBy=function(n,i){var s=n.split(".").reverse(),u=s[0],c=s.length-1;function d(x,P){return P?d(x[s[P]],P-1):x[u]}var g=this._ctx.dir==="next"?1:-1;function y(x,P){return Pe(d(x,c),d(P,c))*g}return this.toArray(function(x){return x.sort(y)}).then(i)},Oe.prototype.toArray=function(n){var i=this;return this._read(function(s){var u=i._ctx;if(u.dir==="next"&&Nn(u,!0)&&0<u.limit){var c=u.valueMapper,d=Nr(u,u.table.core.schema);return u.table.core.query({trans:s,limit:u.limit,values:!0,query:{index:d,range:u.range}}).then(function(y){return y=y.result,c?y.map(c):y})}var g=[];return $r(u,function(y){return g.push(y)},s,u.table.core).then(function(){return g})},n)},Oe.prototype.offset=function(n){var i=this._ctx;return n<=0||(i.offset+=n,Nn(i)?Vi(i,function(){var s=n;return function(u,c){return s===0||(s===1?--s:c(function(){u.advance(s),s=0}),!1)}}):Vi(i,function(){var s=n;return function(){return--s<0}})),this},Oe.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),Vi(this._ctx,function(){var i=n;return function(s,u,c){return--i<=0&&u(c),0<=i}},!0),this},Oe.prototype.until=function(n,i){return Hi(this._ctx,function(s,u,c){return!n(s.value)||(u(c),i)}),this},Oe.prototype.first=function(n){return this.limit(1).toArray(function(i){return i[0]}).then(n)},Oe.prototype.last=function(n){return this.reverse().first(n)},Oe.prototype.filter=function(n){var i;return Hi(this._ctx,function(s){return n(s.value)}),(i=this._ctx).isMatch=xn(i.isMatch,n),this},Oe.prototype.and=function(n){return this.filter(n)},Oe.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},Oe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Oe.prototype.desc=function(){return this.reverse()},Oe.prototype.eachKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(s,u){n(u.key,u)})},Oe.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},Oe.prototype.eachPrimaryKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(s,u){n(u.primaryKey,u)})},Oe.prototype.keys=function(n){var i=this._ctx;i.keysOnly=!i.isMatch;var s=[];return this.each(function(u,c){s.push(c.key)}).then(function(){return s}).then(n)},Oe.prototype.primaryKeys=function(n){var i=this._ctx;if(i.dir==="next"&&Nn(i,!0)&&0<i.limit)return this._read(function(u){var c=Nr(i,i.table.core.schema);return i.table.core.query({trans:u,values:!1,limit:i.limit,query:{index:c,range:i.range}})}).then(function(u){return u.result}).then(n);i.keysOnly=!i.isMatch;var s=[];return this.each(function(u,c){s.push(c.primaryKey)}).then(function(){return s}).then(n)},Oe.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},Oe.prototype.firstKey=function(n){return this.limit(1).keys(function(i){return i[0]}).then(n)},Oe.prototype.lastKey=function(n){return this.reverse().firstKey(n)},Oe.prototype.distinct=function(){var n=this._ctx,n=n.index&&n.table.schema.idxByName[n.index];if(!n||!n.multi)return this;var i={};return Hi(this._ctx,function(c){var u=c.primaryKey.toString(),c=k(i,u);return i[u]=!0,!c}),this},Oe.prototype.modify=function(n){var i=this,s=this._ctx;return this._write(function(u){var c,d,g;g=typeof n=="function"?n:(c=f(n),d=c.length,function(D){for(var R=!1,j=0;j<d;++j){var K=c[j],H=n[K],Q=xe(D,K);H instanceof ir?(Ce(D,K,H.execute(Q)),R=!0):Q!==H&&(Ce(D,K,H),R=!0)}return R});var y=s.table.core,_=y.schema.primaryKey,x=_.outbound,P=_.extractKey,E=200,_=i.db._options.modifyChunkSize;_&&(E=typeof _=="object"?_[y.name]||_["*"]||200:_);function M(D,K){var j=K.failures,K=K.numFailures;T+=D-K;for(var H=0,Q=f(j);H<Q.length;H++){var V=Q[H];C.push(j[V])}}var C=[],T=0,A=[],O=n===ys;return i.clone().primaryKeys().then(function(D){function R(K){var H=Math.min(E,D.length-K),Q=D.slice(K,K+H);return(O?Promise.resolve([]):y.getMany({trans:u,keys:Q,cache:"immutable"})).then(function(V){var Y=[],re=[],ee=x?[]:null,oe=O?Q:[];if(!O)for(var be=0;be<H;++be){var Te=V[be],ve={value:nt(Te),primKey:D[K+be]};g.call(ve,ve.value,ve)!==!1&&(ve.value==null?oe.push(D[K+be]):x||Pe(P(Te),P(ve.value))===0?(re.push(ve.value),x&&ee.push(D[K+be])):(oe.push(D[K+be]),Y.push(ve.value)))}return Promise.resolve(0<Y.length&&y.mutate({trans:u,type:"add",values:Y}).then(function(Le){for(var ge in Le.failures)oe.splice(parseInt(ge),1);M(Y.length,Le)})).then(function(){return(0<re.length||j&&typeof n=="object")&&y.mutate({trans:u,type:"put",keys:ee,values:re,criteria:j,changeSpec:typeof n!="function"&&n,isAdditionalChunk:0<K}).then(function(Le){return M(re.length,Le)})}).then(function(){return(0<oe.length||j&&O)&&y.mutate({trans:u,type:"delete",keys:oe,criteria:j,isAdditionalChunk:0<K}).then(function(Le){return Br(s.table,oe,Le)}).then(function(Le){return M(oe.length,Le)})}).then(function(){return D.length>K+H&&R(K+E)})})}var j=Nn(s)&&s.limit===1/0&&(typeof n!="function"||O)&&{index:s.index,range:s.range};return R(0).then(function(){if(0<C.length)throw new on("Error modifying one or more objects",C,T,A);return D.length})})})},Oe.prototype.delete=function(){var n=this._ctx,i=n.range;return!Nn(n)||n.table.schema.yProps||!n.isPrimKey&&i.type!==3?this.modify(ys):this._write(function(s){var u=n.table.core.schema.primaryKey,c=i;return n.table.core.count({trans:s,query:{index:u,range:c}}).then(function(d){return n.table.core.mutate({trans:s,type:"deleteRange",range:c}).then(function(x){var y=x.failures,x=x.numFailures;if(x)throw new on("Could not delete some values",Object.keys(y).map(function(P){return y[P]}),d-x);return d-x})})})},Oe);function Oe(){}var ys=function(n,i){return i.value=null};function Ou(n,i){return n<i?-1:n===i?0:1}function Au(n,i){return i<n?-1:n===i?0:1}function Ct(n,i,s){return n=n instanceof _s?new n.Collection(n):n,n._ctx.error=new(s||TypeError)(i),n}function $n(n){return new n.Collection(n,function(){return bs("")}).limit(0)}function Lr(n,i,s,u){var c,d,g,y,x,P,E,_=s.length;if(!s.every(function(T){return typeof T=="string"}))return Ct(n,ls);function M(T){c=T==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},d=T==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},g=T==="next"?Ou:Au;var A=s.map(function(O){return{lower:d(O),upper:c(O)}}).sort(function(O,D){return g(O.lower,D.lower)});y=A.map(function(O){return O.upper}),x=A.map(function(O){return O.lower}),E=(P=T)==="next"?"":u}M("next"),n=new n.Collection(n,function(){return cn(y[0],x[_-1]+u)}),n._ondirectionchange=function(T){M(T)};var C=0;return n._addAlgorithm(function(T,A,O){var D=T.key;if(typeof D!="string")return!1;var R=d(D);if(i(R,x,C))return!0;for(var j=null,K=C;K<_;++K){var H=(function(Q,V,Y,re,ee,oe){for(var be=Math.min(Q.length,re.length),Te=-1,ve=0;ve<be;++ve){var Le=V[ve];if(Le!==re[ve])return ee(Q[ve],Y[ve])<0?Q.substr(0,ve)+Y[ve]+Y.substr(ve+1):ee(Q[ve],re[ve])<0?Q.substr(0,ve)+re[ve]+Y.substr(ve+1):0<=Te?Q.substr(0,Te)+V[Te]+Y.substr(Te+1):null;ee(Q[ve],Le)<0&&(Te=ve)}return be<re.length&&oe==="next"?Q+Y.substr(Q.length):be<Q.length&&oe==="prev"?Q.substr(0,Y.length):Te<0?null:Q.substr(0,Te)+re[Te]+Y.substr(Te+1)})(D,R,y[K],x[K],g,P);H===null&&j===null?C=K+1:(j===null||0<g(j,H))&&(j=H)}return A(j!==null?function(){T.continue(j+E)}:O),!1}),n}function cn(n,i,s,u){return{type:2,lower:n,upper:i,lowerOpen:s,upperOpen:u}}function bs(n){return{type:1,lower:n,upper:n}}var _s=(Object.defineProperty(et.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),et.prototype.between=function(n,i,s,u){s=s!==!1,u=u===!0;try{return 0<this._cmp(n,i)||this._cmp(n,i)===0&&(s||u)&&(!s||!u)?$n(this):new this.Collection(this,function(){return cn(n,i,!s,!u)})}catch{return Ct(this,Gt)}},et.prototype.equals=function(n){return n==null?Ct(this,Gt):new this.Collection(this,function(){return bs(n)})},et.prototype.above=function(n){return n==null?Ct(this,Gt):new this.Collection(this,function(){return cn(n,void 0,!0)})},et.prototype.aboveOrEqual=function(n){return n==null?Ct(this,Gt):new this.Collection(this,function(){return cn(n,void 0,!1)})},et.prototype.below=function(n){return n==null?Ct(this,Gt):new this.Collection(this,function(){return cn(void 0,n,!1,!0)})},et.prototype.belowOrEqual=function(n){return n==null?Ct(this,Gt):new this.Collection(this,function(){return cn(void 0,n)})},et.prototype.startsWith=function(n){return typeof n!="string"?Ct(this,ls):this.between(n,n+wn,!0,!0)},et.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Lr(this,function(i,s){return i.indexOf(s[0])===0},[n],wn)},et.prototype.equalsIgnoreCase=function(n){return Lr(this,function(i,s){return i===s[0]},[n],"")},et.prototype.anyOfIgnoreCase=function(){var n=ut.apply(at,arguments);return n.length===0?$n(this):Lr(this,function(i,s){return s.indexOf(i)!==-1},n,"")},et.prototype.startsWithAnyOfIgnoreCase=function(){var n=ut.apply(at,arguments);return n.length===0?$n(this):Lr(this,function(i,s){return s.some(function(u){return i.indexOf(u)===0})},n,wn)},et.prototype.anyOf=function(){var n=this,i=ut.apply(at,arguments),s=this._cmp;try{i.sort(s)}catch{return Ct(this,Gt)}if(i.length===0)return $n(this);var u=new this.Collection(this,function(){return cn(i[0],i[i.length-1])});u._ondirectionchange=function(d){s=d==="next"?n._ascending:n._descending,i.sort(s)};var c=0;return u._addAlgorithm(function(d,g,y){for(var x=d.key;0<s(x,i[c]);)if(++c===i.length)return g(y),!1;return s(x,i[c])===0||(g(function(){d.continue(i[c])}),!1)}),u},et.prototype.notEqual=function(n){return this.inAnyRange([[-1/0,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},et.prototype.noneOf=function(){var n=ut.apply(at,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return Ct(this,Gt)}var i=n.reduce(function(s,u){return s?s.concat([[s[s.length-1][1],u]]):[[-1/0,u]]},null);return i.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},et.prototype.inAnyRange=function(D,i){var s=this,u=this._cmp,c=this._ascending,d=this._descending,g=this._min,y=this._max;if(D.length===0)return $n(this);if(!D.every(function(R){return R[0]!==void 0&&R[1]!==void 0&&c(R[0],R[1])<=0}))return Ct(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ce.InvalidArgument);var x=!i||i.includeLowers!==!1,P=i&&i.includeUppers===!0,E,_=c;function M(R,j){return _(R[0],j[0])}try{(E=D.reduce(function(R,j){for(var K=0,H=R.length;K<H;++K){var Q=R[K];if(u(j[0],Q[1])<0&&0<u(j[1],Q[0])){Q[0]=g(Q[0],j[0]),Q[1]=y(Q[1],j[1]);break}}return K===H&&R.push(j),R},[])).sort(M)}catch{return Ct(this,Gt)}var C=0,T=P?function(R){return 0<c(R,E[C][1])}:function(R){return 0<=c(R,E[C][1])},A=x?function(R){return 0<d(R,E[C][0])}:function(R){return 0<=d(R,E[C][0])},O=T,D=new this.Collection(this,function(){return cn(E[0][0],E[E.length-1][1],!x,!P)});return D._ondirectionchange=function(R){_=R==="next"?(O=T,c):(O=A,d),E.sort(M)},D._addAlgorithm(function(R,j,K){for(var H,Q=R.key;O(Q);)if(++C===E.length)return j(K),!1;return!T(H=Q)&&!A(H)||(s._cmp(Q,E[C][1])===0||s._cmp(Q,E[C][0])===0||j(function(){_===c?R.continue(E[C][0]):R.continue(E[C][1])}),!1)}),D},et.prototype.startsWithAnyOf=function(){var n=ut.apply(at,arguments);return n.every(function(i){return typeof i=="string"})?n.length===0?$n(this):this.inAnyRange(n.map(function(i){return[i,i+wn]})):Ct(this,"startsWithAnyOf() only works with strings")},et);function et(){}function Nt(n){return Be(function(i){return or(i),n(i.target.error),!1})}function or(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var sr="storagemutated",zi="x-storagemutated-1",fn=nr(null,sr),Mu=($t.prototype._lock=function(){return ae(!ue.global),++this._reculock,this._reculock!==1||ue.global||(ue.lockOwnerFor=this),this},$t.prototype._unlock=function(){if(ae(!ue.global),--this._reculock==0)for(ue.global||(ue.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var n=this._blockedFuncs.shift();try{_n(n[1],n[0])}catch{}}return this},$t.prototype._locked=function(){return this._reculock&&ue.lockOwnerFor!==this},$t.prototype.create=function(n){var i=this;if(!this.mode)return this;var s=this.db.idbdb,u=this.db._state.dbOpenError;if(ae(!this.idbtrans),!n&&!s)switch(u&&u.name){case"DatabaseClosedError":throw new ce.DatabaseClosed(u);case"MissingAPIError":throw new ce.MissingAPI(u.message,u);default:throw new ce.OpenFailed(u)}if(!this.active)throw new ce.TransactionInactive;return ae(this._completion._state===null),(n=this.idbtrans=n||(this.db.core||s).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Be(function(c){or(c),i._reject(n.error)}),n.onabort=Be(function(c){or(c),i.active&&i._reject(new ce.Abort(n.error)),i.active=!1,i.on("abort").fire(c)}),n.oncomplete=Be(function(){i.active=!1,i._resolve(),"mutatedParts"in n&&fn.storagemutated.fire(n.mutatedParts)}),this},$t.prototype._promise=function(n,i,s){var u=this;if(n==="readwrite"&&this.mode!=="readwrite")return Ue(new ce.ReadOnly("Transaction is readonly"));if(!this.active)return Ue(new ce.TransactionInactive);if(this._locked())return new ie(function(d,g){u._blockedFuncs.push([function(){u._promise(n,i,s).then(d,g)},ue])});if(s)return an(function(){var d=new ie(function(g,y){u._lock();var x=i(g,y,u);x&&x.then&&x.then(g,y)});return d.finally(function(){return u._unlock()}),d._lib=!0,d});var c=new ie(function(d,g){var y=i(d,g,u);y&&y.then&&y.then(d,g)});return c._lib=!0,c},$t.prototype._root=function(){return this.parent?this.parent._root():this},$t.prototype.waitFor=function(n){var i,s=this._root(),u=ie.resolve(n);s._waitingFor?s._waitingFor=s._waitingFor.then(function(){return u}):(s._waitingFor=u,s._waitingQueue=[],i=s.idbtrans.objectStore(s.storeNames[0]),(function d(){for(++s._spinCount;s._waitingQueue.length;)s._waitingQueue.shift()();s._waitingFor&&(i.get(-1/0).onsuccess=d)})());var c=s._waitingFor;return new ie(function(d,g){u.then(function(y){return s._waitingQueue.push(Be(d.bind(null,y)))},function(y){return s._waitingQueue.push(Be(g.bind(null,y)))}).finally(function(){s._waitingFor===c&&(s._waitingFor=null)})})},$t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ce.Abort))},$t.prototype.table=function(n){var i=this._memoizedTables||(this._memoizedTables={});if(k(i,n))return i[n];var s=this.schema[n];if(!s)throw new ce.NotFound("Table "+n+" not part of transaction");return s=new this.db.Table(n,s,this),s.core=this.db.core.table(n),i[n]=s},$t);function $t(){}function Gi(n,i,s,u,c,d,g,y){return{name:n,keyPath:i,unique:s,multi:u,auto:c,compound:d,src:(s&&!g?"&":"")+(u?"*":"")+(c?"++":"")+ws(i),type:y}}function ws(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function Yi(n,i,s){return{name:n,primKey:i,indexes:s,mappedClass:null,idxByName:(u=function(c){return[c.name,c]},s.reduce(function(c,d,g){return g=u(d,g),g&&(c[g[0]]=g[1]),c},{}))};var u}var ar=function(n){try{return n.only([[]]),ar=function(){return[[]]},[[]]}catch{return ar=function(){return wn},wn}};function Xi(n){return n==null?function(){}:typeof n=="string"?(i=n).split(".").length===1?function(s){return s[i]}:function(s){return xe(s,i)}:function(s){return xe(s,n)};var i}function xs(n){return[].slice.call(n)}var Du=0;function ur(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function Ru(n,i,x){function u(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var C=O.lower,T=O.upper,A=O.lowerOpen,O=O.upperOpen;return C===void 0?T===void 0?null:i.upperBound(T,!!O):T===void 0?i.lowerBound(C,!!A):i.bound(C,T,!!A,!!O)}function c(M){var C,T=M.name;return{name:T,schema:M,mutate:function(A){var O=A.trans,D=A.type,R=A.keys,j=A.values,K=A.range;return new Promise(function(H,Q){H=Be(H);var V=O.objectStore(T),Y=V.keyPath==null,re=D==="put"||D==="add";if(!re&&D!=="delete"&&D!=="deleteRange")throw new Error("Invalid operation type: "+D);var ee,oe=(R||j||{length:1}).length;if(R&&j&&R.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(oe===0)return H({numFailures:0,failures:{},results:[],lastResult:void 0});function be(vt){++Le,or(vt)}var Te=[],ve=[],Le=0;if(D==="deleteRange"){if(K.type===4)return H({numFailures:Le,failures:ve,results:[],lastResult:void 0});K.type===3?Te.push(ee=V.clear()):Te.push(ee=V.delete(u(K)))}else{var Y=re?Y?[j,R]:[j,null]:[R,null],ge=Y[0],ft=Y[1];if(re)for(var dt=0;dt<oe;++dt)Te.push(ee=ft&&ft[dt]!==void 0?V[D](ge[dt],ft[dt]):V[D](ge[dt])),ee.onerror=be;else for(dt=0;dt<oe;++dt)Te.push(ee=V[D](ge[dt])),ee.onerror=be}function Zr(vt){vt=vt.target.result,Te.forEach(function(Pn,mo){return Pn.error!=null&&(ve[mo]=Pn.error)}),H({numFailures:Le,failures:ve,results:D==="delete"?R:Te.map(function(Pn){return Pn.result}),lastResult:vt})}ee.onerror=function(vt){be(vt),Zr(vt)},ee.onsuccess=Zr})},getMany:function(A){var O=A.trans,D=A.keys;return new Promise(function(R,j){R=Be(R);for(var K,H=O.objectStore(T),Q=D.length,V=new Array(Q),Y=0,re=0,ee=function(Te){Te=Te.target,V[Te._pos]=Te.result,++re===Y&&R(V)},oe=Nt(j),be=0;be<Q;++be)D[be]!=null&&((K=H.get(D[be]))._pos=be,K.onsuccess=ee,K.onerror=oe,++Y);Y===0&&R(V)})},get:function(A){var O=A.trans,D=A.key;return new Promise(function(R,j){R=Be(R);var K=O.objectStore(T).get(D);K.onsuccess=function(H){return R(H.target.result)},K.onerror=Nt(j)})},query:(C=P,function(A){return new Promise(function(O,D){O=Be(O);var R,j,K,Y=A.trans,H=A.values,Q=A.limit,ee=A.query,V=Q===1/0?void 0:Q,re=ee.index,ee=ee.range,Y=Y.objectStore(T),re=re.isPrimaryKey?Y:Y.index(re.name),ee=u(ee);if(Q===0)return O({result:[]});C?((V=H?re.getAll(ee,V):re.getAllKeys(ee,V)).onsuccess=function(oe){return O({result:oe.target.result})},V.onerror=Nt(D)):(R=0,j=!H&&"openKeyCursor"in re?re.openKeyCursor(ee):re.openCursor(ee),K=[],j.onsuccess=function(oe){var be=j.result;return be?(K.push(H?be.value:be.primaryKey),++R===Q?O({result:K}):void be.continue()):O({result:K})},j.onerror=Nt(D))})}),openCursor:function(A){var O=A.trans,D=A.values,R=A.query,j=A.reverse,K=A.unique;return new Promise(function(H,Q){H=Be(H);var re=R.index,V=R.range,Y=O.objectStore(T),Y=re.isPrimaryKey?Y:Y.index(re.name),re=j?K?"prevunique":"prev":K?"nextunique":"next",ee=!D&&"openKeyCursor"in Y?Y.openKeyCursor(u(V),re):Y.openCursor(u(V),re);ee.onerror=Nt(Q),ee.onsuccess=Be(function(oe){var be,Te,ve,Le,ge=ee.result;ge?(ge.___id=++Du,ge.done=!1,be=ge.continue.bind(ge),Te=(Te=ge.continuePrimaryKey)&&Te.bind(ge),ve=ge.advance.bind(ge),Le=function(){throw new Error("Cursor not stopped")},ge.trans=O,ge.stop=ge.continue=ge.continuePrimaryKey=ge.advance=function(){throw new Error("Cursor not started")},ge.fail=Be(Q),ge.next=function(){var ft=this,dt=1;return this.start(function(){return dt--?ft.continue():ft.stop()}).then(function(){return ft})},ge.start=function(ft){function dt(){if(ee.result)try{ft()}catch(vt){ge.fail(vt)}else ge.done=!0,ge.start=function(){throw new Error("Cursor behind last entry")},ge.stop()}var Zr=new Promise(function(vt,Pn){vt=Be(vt),ee.onerror=Nt(Pn),ge.fail=Pn,ge.stop=function(mo){ge.stop=ge.continue=ge.continuePrimaryKey=ge.advance=Le,vt(mo)}});return ee.onsuccess=Be(function(vt){ee.onsuccess=dt,dt()}),ge.continue=be,ge.continuePrimaryKey=Te,ge.advance=ve,dt(),Zr},H(ge)):H(null)},Q)})},count:function(A){var O=A.query,D=A.trans,R=O.index,j=O.range;return new Promise(function(K,H){var Q=D.objectStore(T),V=R.isPrimaryKey?Q:Q.index(R.name),Q=u(j),V=Q?V.count(Q):V.count();V.onsuccess=Be(function(Y){return K(Y.target.result)}),V.onerror=Nt(H)})}}}var d,g,y,E=(g=x,y=xs((d=n).objectStoreNames),{schema:{name:d.name,tables:y.map(function(M){return g.objectStore(M)}).map(function(M){var C=M.keyPath,O=M.autoIncrement,T=h(C),A={},O={name:M.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:C==null,compound:T,keyPath:C,autoIncrement:O,unique:!0,extractKey:Xi(C)},indexes:xs(M.indexNames).map(function(D){return M.index(D)}).map(function(K){var R=K.name,j=K.unique,H=K.multiEntry,K=K.keyPath,H={name:R,compound:h(K),keyPath:K,unique:j,multiEntry:H,extractKey:Xi(K)};return A[ur(K)]=H}),getIndexByKeyPath:function(D){return A[ur(D)]}};return A[":id"]=O.primaryKey,C!=null&&(A[ur(C)]=O.primaryKey),O})},hasGetAll:0<y.length&&"getAll"in g.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),x=E.schema,P=E.hasGetAll,E=x.tables.map(c),_={};return E.forEach(function(M){return _[M.name]=M}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(M){if(!_[M])throw new Error("Table '".concat(M,"' not found"));return _[M]},MIN_KEY:-1/0,MAX_KEY:ar(i),schema:x}}function Fu(n,i,s,u){var c=s.IDBKeyRange;return s.indexedDB,{dbcore:(u=Ru(i,c,u),n.dbcore.reduce(function(d,g){return g=g.create,o(o({},d),g(d))},u))}}function qr(n,u){var s=u.db,u=Fu(n._middlewares,s,n._deps,u);n.core=u.dbcore,n.tables.forEach(function(c){var d=c.name;n.core.schema.tables.some(function(g){return g.name===d})&&(c.core=n.core.table(d),n[d]instanceof n.Table&&(n[d].core=c.core))})}function Wr(n,i,s,u){s.forEach(function(c){var d=u[c];i.forEach(function(g){var y=(function x(P,E){return te(P,E)||(P=w(P))&&x(P,E)})(g,c);(!y||"value"in y&&y.value===void 0)&&(g===n.Transaction.prototype||g instanceof n.Transaction?B(g,c,{get:function(){return this.table(c)},set:function(x){$(this,c,{value:x,writable:!0,configurable:!0,enumerable:!0})}}):g[c]=new n.Table(c,d))})})}function Ji(n,i){i.forEach(function(s){for(var u in s)s[u]instanceof n.Table&&delete s[u]})}function Iu(n,i){return n._cfg.version-i._cfg.version}function ju(n,i,s,u){var c=n._dbSchema;s.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=Yi("$meta",Cs("")[0],[]),n._storeNames.push("$meta"));var d=n._createTransaction("readwrite",n._storeNames,c);d.create(s),d._completion.catch(u);var g=d._reject.bind(d),y=ue.transless||ue;an(function(){return ue.trans=d,ue.transless=y,i!==0?(qr(n,s),P=i,((x=d).storeNames.includes("$meta")?x.table("$meta").get("version").then(function(E){return E??P}):ie.resolve(P)).then(function(E){return M=E,C=d,T=s,A=[],E=(_=n)._versions,O=_._dbSchema=Hr(0,_.idbdb,T),(E=E.filter(function(D){return D._cfg.version>=M})).length!==0?(E.forEach(function(D){A.push(function(){var R=O,j=D._cfg.dbschema;Vr(_,R,T),Vr(_,j,T),O=_._dbSchema=j;var K=Qi(R,j);K.add.forEach(function(re){Zi(T,re[0],re[1].primKey,re[1].indexes)}),K.change.forEach(function(re){if(re.recreate)throw new ce.Upgrade("Not yet support for changing primary key");var ee=T.objectStore(re.name);re.add.forEach(function(oe){return Ur(ee,oe)}),re.change.forEach(function(oe){ee.deleteIndex(oe.name),Ur(ee,oe)}),re.del.forEach(function(oe){return ee.deleteIndex(oe)})});var H=D._cfg.contentUpgrade;if(H&&D._cfg.version>M){qr(_,T),C._memoizedTables={};var Q=qe(j);K.del.forEach(function(re){Q[re]=R[re]}),Ji(_,[_.Transaction.prototype]),Wr(_,[_.Transaction.prototype],f(Q),Q),C.schema=Q;var V,Y=St(H);return Y&&Kn(),K=ie.follow(function(){var re;(V=H(C))&&Y&&(re=un.bind(null,null),V.then(re,re))}),V&&typeof V.then=="function"?ie.resolve(V):K.then(function(){return V})}}),A.push(function(R){var j,K,H=D._cfg.dbschema;j=H,K=R,[].slice.call(K.db.objectStoreNames).forEach(function(Q){return j[Q]==null&&K.db.deleteObjectStore(Q)}),Ji(_,[_.Transaction.prototype]),Wr(_,[_.Transaction.prototype],_._storeNames,_._dbSchema),C.schema=_._dbSchema}),A.push(function(R){_.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(_.idbdb.version/10)===D._cfg.version?(_.idbdb.deleteObjectStore("$meta"),delete _._dbSchema.$meta,_._storeNames=_._storeNames.filter(function(j){return j!=="$meta"})):R.objectStore("$meta").put(D._cfg.version,"version"))})}),(function D(){return A.length?ie.resolve(A.shift()(C.idbtrans)).then(D):ie.resolve()})().then(function(){Ss(O,T)})):ie.resolve();var _,M,C,T,A,O}).catch(g)):(f(c).forEach(function(E){Zi(s,E,c[E].primKey,c[E].indexes)}),qr(n,s),void ie.follow(function(){return n.on.populate.fire(d)}).catch(g));var x,P})}function Ku(n,i){Ss(n._dbSchema,i),i.db.version%10!=0||i.objectStoreNames.contains("$meta")||i.db.createObjectStore("$meta").add(Math.ceil(i.db.version/10-1),"version");var s=Hr(0,n.idbdb,i);Vr(n,n._dbSchema,i);for(var u=0,c=Qi(s,n._dbSchema).change;u<c.length;u++){var d=(function(g){if(g.change.length||g.recreate)return console.warn("Unable to patch indexes of table ".concat(g.name," because it has changes on the type of index or primary key.")),{value:void 0};var y=i.objectStore(g.name);g.add.forEach(function(x){U&&console.debug("Dexie upgrade patch: Creating missing index ".concat(g.name,".").concat(x.src)),Ur(y,x)})})(c[u]);if(typeof d=="object")return d.value}}function Qi(n,i){var s,u={del:[],add:[],change:[]};for(s in n)i[s]||u.del.push(s);for(s in i){var c=n[s],d=i[s];if(c){var g={name:s,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||c.primKey.auto!==d.primKey.auto)g.recreate=!0,u.change.push(g);else{var y=c.idxByName,x=d.idxByName,P=void 0;for(P in y)x[P]||g.del.push(P);for(P in x){var E=y[P],_=x[P];E?E.src!==_.src&&g.change.push(_):g.add.push(_)}(0<g.del.length||0<g.add.length||0<g.change.length)&&u.change.push(g)}}else u.add.push([s,d])}return u}function Zi(n,i,s,u){var c=n.db.createObjectStore(i,s.keyPath?{keyPath:s.keyPath,autoIncrement:s.auto}:{autoIncrement:s.auto});return u.forEach(function(d){return Ur(c,d)}),c}function Ss(n,i){f(n).forEach(function(s){i.db.objectStoreNames.contains(s)||(U&&console.debug("Dexie: Creating missing table",s),Zi(i,s,n[s].primKey,n[s].indexes))})}function Ur(n,i){n.createIndex(i.name,i.keyPath,{unique:i.unique,multiEntry:i.multi})}function Hr(n,i,s){var u={};return le(i.objectStoreNames,0).forEach(function(c){for(var d=s.objectStore(c),g=Gi(ws(P=d.keyPath),P||"",!0,!1,!!d.autoIncrement,P&&typeof P!="string",!0),y=[],x=0;x<d.indexNames.length;++x){var E=d.index(d.indexNames[x]),P=E.keyPath,E=Gi(E.name,P,!!E.unique,!!E.multiEntry,!1,P&&typeof P!="string",!1);y.push(E)}u[c]=Yi(c,g,y)}),u}function Vr(n,i,s){for(var u=s.db.objectStoreNames,c=0;c<u.length;++c){var d=u[c],g=s.objectStore(d);n._hasGetAll="getAll"in g;for(var y=0;y<g.indexNames.length;++y){var x=g.indexNames[y],P=g.index(x).keyPath,E=typeof P=="string"?P:"["+le(P).join("+")+"]";!i[d]||(P=i[d].idxByName[E])&&(P.name=x,delete i[d].idxByName[E],i[d].idxByName[x]=P)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function Cs(n){return n.split(",").map(function(i,s){var d=i.split(":"),u=(c=d[1])===null||c===void 0?void 0:c.trim(),c=(i=d[0].trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Gi(c,d||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),h(d),s===0,u)})}var Bu=(Ln.prototype._createTableSchema=Yi,Ln.prototype._parseIndexSyntax=Cs,Ln.prototype._parseStoresSpec=function(n,i){var s=this;f(n).forEach(function(u){if(n[u]!==null){var c=s._parseIndexSyntax(n[u]),d=c.shift();if(!d)throw new ce.Schema("Invalid schema for table "+u+": "+n[u]);if(d.unique=!0,d.multi)throw new ce.Schema("Primary key cannot be multiEntry*");c.forEach(function(g){if(g.auto)throw new ce.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new ce.Schema("Index must have a name and cannot be an empty string")}),c=s._createTableSchema(u,d,c),i[u]=c}})},Ln.prototype.stores=function(s){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,s):s;var s=i._versions,u={},c={};return s.forEach(function(d){m(u,d._cfg.storesSource),c=d._cfg.dbschema={},d._parseStoresSpec(u,c)}),i._dbSchema=c,Ji(i,[i._allTables,i,i.Transaction.prototype]),Wr(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],f(c),c),i._storeNames=f(c),this},Ln.prototype.upgrade=function(n){return this._cfg.contentUpgrade=X(this._cfg.contentUpgrade||p,n),this},Ln);function Ln(){}function eo(n,i){var s=n._dbNamesDB;return s||(s=n._dbNamesDB=new Yt(jr,{addons:[],indexedDB:n,IDBKeyRange:i})).version(1).stores({dbnames:"name"}),s.table("dbnames")}function to(n){return n&&typeof n.databases=="function"}function no(n){return an(function(){return ue.letThrough=!0,n()})}function ro(n){return!("from"in n)}var ct=function(n,i){if(!this){var s=new ct;return n&&"d"in n&&m(s,n),s}m(this,arguments.length?{d:1,from:n,to:1<arguments.length?i:n}:{d:0})};function lr(n,i,s){var u=Pe(i,s);if(!isNaN(u)){if(0<u)throw RangeError();if(ro(n))return m(n,{from:i,to:s,d:1});var c=n.l,u=n.r;if(Pe(s,n.from)<0)return c?lr(c,i,s):n.l={from:i,to:s,d:1,l:null,r:null},ks(n);if(0<Pe(i,n.to))return u?lr(u,i,s):n.r={from:i,to:s,d:1,l:null,r:null},ks(n);Pe(i,n.from)<0&&(n.from=i,n.l=null,n.d=u?u.d+1:1),0<Pe(s,n.to)&&(n.to=s,n.r=null,n.d=n.l?n.l.d+1:1),s=!n.r,c&&!n.l&&cr(n,c),u&&s&&cr(n,u)}}function cr(n,i){ro(i)||(function s(u,x){var d=x.from,g=x.to,y=x.l,x=x.r;lr(u,d,g),y&&s(u,y),x&&s(u,x)})(n,i)}function Ps(n,i){var s=zr(i),u=s.next();if(u.done)return!1;for(var c=u.value,d=zr(n),g=d.next(c.from),y=g.value;!u.done&&!g.done;){if(Pe(y.from,c.to)<=0&&0<=Pe(y.to,c.from))return!0;Pe(c.from,y.from)<0?c=(u=s.next(y.from)).value:y=(g=d.next(c.from)).value}return!1}function zr(n){var i=ro(n)?null:{s:0,n};return{next:function(s){for(var u=0<arguments.length;i;)switch(i.s){case 0:if(i.s=1,u)for(;i.n.l&&Pe(s,i.n.from)<0;)i={up:i,n:i.n.l,s:1};else for(;i.n.l;)i={up:i,n:i.n.l,s:1};case 1:if(i.s=2,!u||Pe(s,i.n.to)<=0)return{value:i.n,done:!1};case 2:if(i.n.r){i.s=3,i={up:i,n:i.n.r,s:0};continue}case 3:i=i.up}return{done:!0}}}}function ks(n){var i,s,u=(((i=n.r)===null||i===void 0?void 0:i.d)||0)-(((s=n.l)===null||s===void 0?void 0:s.d)||0),c=1<u?"r":u<-1?"l":"";c&&(i=c=="r"?"l":"r",s=o({},n),u=n[c],n.from=u.from,n.to=u.to,n[c]=u[c],s[c]=u[i],(n[i]=s).d=Ts(s)),n.d=Ts(n)}function Ts(s){var i=s.r,s=s.l;return(i?s?Math.max(i.d,s.d):i.d:s?s.d:0)+1}function Gr(n,i){return f(i).forEach(function(s){n[s]?cr(n[s],i[s]):n[s]=(function u(c){var d,g,y={};for(d in c)k(c,d)&&(g=c[d],y[d]=!g||typeof g!="object"||xt.has(g.constructor)?g:u(g));return y})(i[s])}),n}function io(n,i){return n.all||i.all||Object.keys(n).some(function(s){return i[s]&&Ps(i[s],n[s])})}I(ct.prototype,((At={add:function(n){return cr(this,n),this},addKey:function(n){return lr(this,n,n),this},addKeys:function(n){var i=this;return n.forEach(function(s){return lr(i,s,s)}),this},hasKey:function(n){var i=zr(this).next(n).value;return i&&Pe(i.from,n)<=0&&0<=Pe(i.to,n)}})[We]=function(){return zr(this)},At));var Sn={},oo={},so=!1;function Yr(n){Gr(oo,n),so||(so=!0,setTimeout(function(){so=!1,ao(oo,!(oo={}))},0))}function ao(n,i){i===void 0&&(i=!1);var s=new Set;if(n.all)for(var u=0,c=Object.values(Sn);u<c.length;u++)Es(g=c[u],n,s,i);else for(var d in n){var g,y=/^idb\:\/\/(.*)\/(.*)\//.exec(d);y&&(d=y[1],y=y[2],(g=Sn["idb://".concat(d,"/").concat(y)])&&Es(g,n,s,i))}s.forEach(function(x){return x()})}function Es(n,i,s,u){for(var c=[],d=0,g=Object.entries(n.queries.query);d<g.length;d++){for(var y=g[d],x=y[0],P=[],E=0,_=y[1];E<_.length;E++){var M=_[E];io(i,M.obsSet)?M.subscribers.forEach(function(O){return s.add(O)}):u&&P.push(M)}u&&c.push([x,P])}if(u)for(var C=0,T=c;C<T.length;C++){var A=T[C],x=A[0],P=A[1];n.queries.query[x]=P}}function Nu(n){var i=n._state,s=n._deps.indexedDB;if(i.isBeingOpened||n.idbdb)return i.dbReadyPromise.then(function(){return i.dbOpenError?Ue(i.dbOpenError):n});i.isBeingOpened=!0,i.dbOpenError=null,i.openComplete=!1;var u=i.openCanceller,c=Math.round(10*n.verno),d=!1;function g(){if(i.openCanceller!==u)throw new ce.DatabaseClosed("db.open() was cancelled")}function y(){return new ie(function(M,C){if(g(),!s)throw new ce.MissingAPI;var T=n.name,A=i.autoSchema||!c?s.open(T):s.open(T,c);if(!A)throw new ce.MissingAPI;A.onerror=Nt(C),A.onblocked=Be(n._fireOnBlocked),A.onupgradeneeded=Be(function(O){var D;E=A.transaction,i.autoSchema&&!n._options.allowEmptyDB?(A.onerror=or,E.abort(),A.result.close(),(D=s.deleteDatabase(T)).onsuccess=D.onerror=Be(function(){C(new ce.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(E.onerror=Nt(C),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,_=O<1,n.idbdb=A.result,d&&Ku(n,E),ju(n,O/10,E,C))},C),A.onsuccess=Be(function(){E=null;var O,D,R,j,K,H=n.idbdb=A.result,Q=le(H.objectStoreNames);if(0<Q.length)try{var V=H.transaction((j=Q).length===1?j[0]:j,"readonly");if(i.autoSchema)D=H,R=V,(O=n).verno=D.version/10,R=O._dbSchema=Hr(0,D,R),O._storeNames=le(D.objectStoreNames,0),Wr(O,[O._allTables],f(R),R);else if(Vr(n,n._dbSchema,V),((K=Qi(Hr(0,(K=n).idbdb,V),K._dbSchema)).add.length||K.change.some(function(Y){return Y.add.length||Y.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),H.close(),c=H.version+1,d=!0,M(y());qr(n,V)}catch{}Bn.push(n),H.onversionchange=Be(function(Y){i.vcFired=!0,n.on("versionchange").fire(Y)}),H.onclose=Be(function(Y){n.on("close").fire(Y)}),_&&(K=n._deps,V=T,H=K.indexedDB,K=K.IDBKeyRange,to(H)||V===jr||eo(H,K).put({name:V}).catch(p)),M()},C)}).catch(function(M){switch(M?.name){case"UnknownError":if(0<i.PR1398_maxLoop)return i.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),y();break;case"VersionError":if(0<c)return c=0,y()}return ie.reject(M)})}var x,P=i.dbReadyResolve,E=null,_=!1;return ie.race([u,(typeof navigator>"u"?ie.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(M){function C(){return indexedDB.databases().finally(M)}x=setInterval(C,100),C()}).finally(function(){return clearInterval(x)}):Promise.resolve()).then(y)]).then(function(){return g(),i.onReadyBeingFired=[],ie.resolve(no(function(){return n.on.ready.fire(n.vip)})).then(function M(){if(0<i.onReadyBeingFired.length){var C=i.onReadyBeingFired.reduce(X,p);return i.onReadyBeingFired=[],ie.resolve(no(function(){return C(n.vip)})).then(M)}})}).finally(function(){i.openCanceller===u&&(i.onReadyBeingFired=null,i.isBeingOpened=!1)}).catch(function(M){i.dbOpenError=M;try{E&&E.abort()}catch{}return u===i.openCanceller&&n._close(),Ue(M)}).finally(function(){i.openComplete=!0,P()}).then(function(){var M;return _&&(M={},n.tables.forEach(function(C){C.schema.indexes.forEach(function(T){T.name&&(M["idb://".concat(n.name,"/").concat(C.name,"/").concat(T.name)]=new ct(-1/0,[[[]]]))}),M["idb://".concat(n.name,"/").concat(C.name,"/")]=M["idb://".concat(n.name,"/").concat(C.name,"/:dels")]=new ct(-1/0,[[[]]])}),fn(sr).fire(M),ao(M,!0)),n})}function uo(n){function i(d){return n.next(d)}var s=c(i),u=c(function(d){return n.throw(d)});function c(d){return function(x){var y=d(x),x=y.value;return y.done?x:x&&typeof x.then=="function"?x.then(s,u):h(x)?Promise.all(x).then(s,u):s(x)}}return c(i)()}function Xr(n,i,s){for(var u=h(n)?n.slice():[n],c=0;c<s;++c)u.push(i);return u}var $u={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return o(o({},n),{table:function(i){var s=n.table(i),u=s.schema,c={},d=[];function g(_,M,C){var T=ur(_),A=c[T]=c[T]||[],O=_==null?0:typeof _=="string"?1:_.length,D=0<M,D=o(o({},C),{name:D?"".concat(T,"(virtual-from:").concat(C.name,")"):C.name,lowLevelIndex:C,isVirtual:D,keyTail:M,keyLength:O,extractKey:Xi(_),unique:!D&&C.unique});return A.push(D),D.isPrimaryKey||d.push(D),1<O&&g(O===2?_[0]:_.slice(0,O-1),M+1,C),A.sort(function(R,j){return R.keyTail-j.keyTail}),D}i=g(u.primaryKey.keyPath,0,u.primaryKey),c[":id"]=[i];for(var y=0,x=u.indexes;y<x.length;y++){var P=x[y];g(P.keyPath,0,P)}function E(_){var M,C=_.query.index;return C.isVirtual?o(o({},_),{query:{index:C.lowLevelIndex,range:(M=_.query.range,C=C.keyTail,{type:M.type===1?2:M.type,lower:Xr(M.lower,M.lowerOpen?n.MAX_KEY:n.MIN_KEY,C),lowerOpen:!0,upper:Xr(M.upper,M.upperOpen?n.MIN_KEY:n.MAX_KEY,C),upperOpen:!0})}}):_}return o(o({},s),{schema:o(o({},u),{primaryKey:i,indexes:d,getIndexByKeyPath:function(_){return(_=c[ur(_)])&&_[0]}}),count:function(_){return s.count(E(_))},query:function(_){return s.query(E(_))},openCursor:function(_){var M=_.query.index,C=M.keyTail,T=M.isVirtual,A=M.keyLength;return T?s.openCursor(E(_)).then(function(D){return D&&O(D)}):s.openCursor(_);function O(D){return Object.create(D,{continue:{value:function(R){R!=null?D.continue(Xr(R,_.reverse?n.MAX_KEY:n.MIN_KEY,C)):_.unique?D.continue(D.key.slice(0,A).concat(_.reverse?n.MIN_KEY:n.MAX_KEY,C)):D.continue()}},continuePrimaryKey:{value:function(R,j){D.continuePrimaryKey(Xr(R,n.MAX_KEY,C),j)}},primaryKey:{get:function(){return D.primaryKey}},key:{get:function(){var R=D.key;return A===1?R[0]:R.slice(0,A)}},value:{get:function(){return D.value}}})}}})}})}};function lo(n,i,s,u){return s=s||{},u=u||"",f(n).forEach(function(c){var d,g,y;k(i,c)?(d=n[c],g=i[c],typeof d=="object"&&typeof g=="object"&&d&&g?(y=rn(d))!==rn(g)?s[u+c]=i[c]:y==="Object"?lo(d,g,s,u+c+"."):d!==g&&(s[u+c]=i[c]):d!==g&&(s[u+c]=i[c])):s[u+c]=void 0}),f(i).forEach(function(c){k(n,c)||(s[u+c]=i[c])}),s}function co(n,i){return i.type==="delete"?i.keys:i.keys||i.values.map(n.extractKey)}var Lu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return o(o({},n),{table:function(i){var s=n.table(i),u=s.schema.primaryKey;return o(o({},s),{mutate:function(c){var d=ue.trans,g=d.table(i).hook,y=g.deleting,x=g.creating,P=g.updating;switch(c.type){case"add":if(x.fire===p)break;return d._promise("readwrite",function(){return E(c)},!0);case"put":if(x.fire===p&&P.fire===p)break;return d._promise("readwrite",function(){return E(c)},!0);case"delete":if(y.fire===p)break;return d._promise("readwrite",function(){return E(c)},!0);case"deleteRange":if(y.fire===p)break;return d._promise("readwrite",function(){return(function _(M,C,T){return s.query({trans:M,values:!1,query:{index:u,range:C},limit:T}).then(function(A){var O=A.result;return E({type:"delete",keys:O,trans:M}).then(function(D){return 0<D.numFailures?Promise.reject(D.failures[0]):O.length<T?{failures:[],numFailures:0,lastResult:void 0}:_(M,o(o({},C),{lower:O[O.length-1],lowerOpen:!0}),T)})})})(c.trans,c.range,1e4)},!0)}return s.mutate(c);function E(_){var M,C,T,A=ue.trans,O=_.keys||co(u,_);if(!O)throw new Error("Keys missing");return(_=_.type==="add"||_.type==="put"?o(o({},_),{keys:O}):o({},_)).type!=="delete"&&(_.values=a([],_.values)),_.keys&&(_.keys=a([],_.keys)),M=s,T=O,((C=_).type==="add"?Promise.resolve([]):M.getMany({trans:C.trans,keys:T,cache:"immutable"})).then(function(D){var R=O.map(function(j,K){var H,Q,V,Y=D[K],re={onerror:null,onsuccess:null};return _.type==="delete"?y.fire.call(re,j,Y,A):_.type==="add"||Y===void 0?(H=x.fire.call(re,j,_.values[K],A),j==null&&H!=null&&(_.keys[K]=j=H,u.outbound||Ce(_.values[K],u.keyPath,j))):(H=lo(Y,_.values[K]),(Q=P.fire.call(re,H,j,Y,A))&&(V=_.values[K],Object.keys(Q).forEach(function(ee){k(V,ee)?V[ee]=Q[ee]:Ce(V,ee,Q[ee])}))),re});return s.mutate(_).then(function(j){for(var K=j.failures,H=j.results,Q=j.numFailures,j=j.lastResult,V=0;V<O.length;++V){var Y=(H||O)[V],re=R[V];Y==null?re.onerror&&re.onerror(K[V]):re.onsuccess&&re.onsuccess(_.type==="put"&&D[V]?_.values[V]:Y)}return{failures:K,results:H,numFailures:Q,lastResult:j}}).catch(function(j){return R.forEach(function(K){return K.onerror&&K.onerror(j)}),Promise.reject(j)})})}}})}})}};function Os(n,i,s){try{if(!i||i.keys.length<n.length)return null;for(var u=[],c=0,d=0;c<i.keys.length&&d<n.length;++c)Pe(i.keys[c],n[d])===0&&(u.push(s?nt(i.values[c]):i.values[c]),++d);return u.length===n.length?u:null}catch{return null}}var qu={stack:"dbcore",level:-1,create:function(n){return{table:function(i){var s=n.table(i);return o(o({},s),{getMany:function(u){if(!u.cache)return s.getMany(u);var c=Os(u.keys,u.trans._cache,u.cache==="clone");return c?ie.resolve(c):s.getMany(u).then(function(d){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?nt(d):d},d})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),s.mutate(u)}})}}}};function As(n,i){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!i.schema.primaryKey.outbound}function Ms(n,i){switch(n){case"query":return i.values&&!i.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Wu={stack:"dbcore",level:0,name:"Observability",create:function(n){var i=n.schema.name,s=new ct(n.MIN_KEY,n.MAX_KEY);return o(o({},n),{transaction:function(u,c,d){if(ue.subscr&&c!=="readonly")throw new ce.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ue.querier));return n.transaction(u,c,d)},table:function(u){var c=n.table(u),d=c.schema,g=d.primaryKey,_=d.indexes,y=g.extractKey,x=g.outbound,P=g.autoIncrement&&_.filter(function(C){return C.compound&&C.keyPath.includes(g.keyPath)}),E=o(o({},c),{mutate:function(C){function T(ee){return ee="idb://".concat(i,"/").concat(u,"/").concat(ee),j[ee]||(j[ee]=new ct)}var A,O,D,R=C.trans,j=C.mutatedParts||(C.mutatedParts={}),K=T(""),H=T(":dels"),Q=C.type,re=C.type==="deleteRange"?[C.range]:C.type==="delete"?[C.keys]:C.values.length<50?[co(g,C).filter(function(ee){return ee}),C.values]:[],V=re[0],Y=re[1],re=C.trans._cache;return h(V)?(K.addKeys(V),(re=Q==="delete"||V.length===Y.length?Os(V,re):null)||H.addKeys(V),(re||Y)&&(A=T,O=re,D=Y,d.indexes.forEach(function(ee){var oe=A(ee.name||"");function be(ve){return ve!=null?ee.extractKey(ve):null}function Te(ve){return ee.multiEntry&&h(ve)?ve.forEach(function(Le){return oe.addKey(Le)}):oe.addKey(ve)}(O||D).forEach(function(ve,ft){var ge=O&&be(O[ft]),ft=D&&be(D[ft]);Pe(ge,ft)!==0&&(ge!=null&&Te(ge),ft!=null&&Te(ft))})}))):V?(Y={from:(Y=V.lower)!==null&&Y!==void 0?Y:n.MIN_KEY,to:(Y=V.upper)!==null&&Y!==void 0?Y:n.MAX_KEY},H.add(Y),K.add(Y)):(K.add(s),H.add(s),d.indexes.forEach(function(ee){return T(ee.name).add(s)})),c.mutate(C).then(function(ee){return!V||C.type!=="add"&&C.type!=="put"||(K.addKeys(ee.results),P&&P.forEach(function(oe){for(var be=C.values.map(function(ge){return oe.extractKey(ge)}),Te=oe.keyPath.findIndex(function(ge){return ge===g.keyPath}),ve=0,Le=ee.results.length;ve<Le;++ve)be[ve][Te]=ee.results[ve];T(oe.name).addKeys(be)})),R.mutatedParts=Gr(R.mutatedParts||{},j),ee})}}),_=function(T){var A=T.query,T=A.index,A=A.range;return[T,new ct((T=A.lower)!==null&&T!==void 0?T:n.MIN_KEY,(A=A.upper)!==null&&A!==void 0?A:n.MAX_KEY)]},M={get:function(C){return[g,new ct(C.key)]},getMany:function(C){return[g,new ct().addKeys(C.keys)]},count:_,query:_,openCursor:_};return f(M).forEach(function(C){E[C]=function(T){var A=ue.subscr,O=!!A,D=As(ue,c)&&Ms(C,T)?T.obsSet={}:A;if(O){var R=function(Y){return Y="idb://".concat(i,"/").concat(u,"/").concat(Y),D[Y]||(D[Y]=new ct)},j=R(""),K=R(":dels"),A=M[C](T),O=A[0],A=A[1];if((C==="query"&&O.isPrimaryKey&&!T.values?K:R(O.name||"")).add(A),!O.isPrimaryKey){if(C!=="count"){var H=C==="query"&&x&&T.values&&c.query(o(o({},T),{values:!1}));return c[C].apply(this,arguments).then(function(Y){if(C==="query"){if(x&&T.values)return H.then(function(be){return be=be.result,j.addKeys(be),Y});var re=T.values?Y.result.map(y):Y.result;(T.values?j:K).addKeys(re)}else if(C==="openCursor"){var ee=Y,oe=T.values;return ee&&Object.create(ee,{key:{get:function(){return K.addKey(ee.primaryKey),ee.key}},primaryKey:{get:function(){var be=ee.primaryKey;return K.addKey(be),be}},value:{get:function(){return oe&&j.addKey(ee.primaryKey),ee.value}}})}return Y})}K.add(s)}}return c[C].apply(this,arguments)}}),E}})}};function Ds(n,i,s){if(s.numFailures===0)return i;if(i.type==="deleteRange")return null;var u=i.keys?i.keys.length:"values"in i&&i.values?i.values.length:1;return s.numFailures===u?null:(i=o({},i),h(i.keys)&&(i.keys=i.keys.filter(function(c,d){return!(d in s.failures)})),"values"in i&&h(i.values)&&(i.values=i.values.filter(function(c,d){return!(d in s.failures)})),i)}function fo(n,i){return s=n,((u=i).lower===void 0||(u.lowerOpen?0<Pe(s,u.lower):0<=Pe(s,u.lower)))&&(n=n,(i=i).upper===void 0||(i.upperOpen?Pe(n,i.upper)<0:Pe(n,i.upper)<=0));var s,u}function Rs(n,i,M,u,c,d){if(!M||M.length===0)return n;var g=i.query.index,y=g.multiEntry,x=i.query.range,P=u.schema.primaryKey.extractKey,E=g.extractKey,_=(g.lowLevelIndex||g).extractKey,M=M.reduce(function(C,T){var A=C,O=[];if(T.type==="add"||T.type==="put")for(var D=new ct,R=T.values.length-1;0<=R;--R){var j,K=T.values[R],H=P(K);D.hasKey(H)||(j=E(K),(y&&h(j)?j.some(function(ee){return fo(ee,x)}):fo(j,x))&&(D.addKey(H),O.push(K)))}switch(T.type){case"add":var Q=new ct().addKeys(i.values?C.map(function(oe){return P(oe)}):C),A=C.concat(i.values?O.filter(function(oe){return oe=P(oe),!Q.hasKey(oe)&&(Q.addKey(oe),!0)}):O.map(function(oe){return P(oe)}).filter(function(oe){return!Q.hasKey(oe)&&(Q.addKey(oe),!0)}));break;case"put":var V=new ct().addKeys(T.values.map(function(oe){return P(oe)}));A=C.filter(function(oe){return!V.hasKey(i.values?P(oe):oe)}).concat(i.values?O:O.map(function(oe){return P(oe)}));break;case"delete":var Y=new ct().addKeys(T.keys);A=C.filter(function(oe){return!Y.hasKey(i.values?P(oe):oe)});break;case"deleteRange":var re=T.range;A=C.filter(function(oe){return!fo(P(oe),re)})}return A},n);return M===n?n:(M.sort(function(C,T){return Pe(_(C),_(T))||Pe(P(C),P(T))}),i.limit&&i.limit<1/0&&(M.length>i.limit?M.length=i.limit:n.length===i.limit&&M.length<i.limit&&(c.dirty=!0)),d?Object.freeze(M):M)}function Fs(n,i){return Pe(n.lower,i.lower)===0&&Pe(n.upper,i.upper)===0&&!!n.lowerOpen==!!i.lowerOpen&&!!n.upperOpen==!!i.upperOpen}function Uu(n,i){return(function(s,u,c,d){if(s===void 0)return u!==void 0?-1:0;if(u===void 0)return 1;if((u=Pe(s,u))===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return u})(n.lower,i.lower,n.lowerOpen,i.lowerOpen)<=0&&0<=(function(s,u,c,d){if(s===void 0)return u!==void 0?1:0;if(u===void 0)return-1;if((u=Pe(s,u))===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return u})(n.upper,i.upper,n.upperOpen,i.upperOpen)}function Hu(n,i,s,u){n.subscribers.add(s),u.addEventListener("abort",function(){var c,d;n.subscribers.delete(s),n.subscribers.size===0&&(c=n,d=i,setTimeout(function(){c.subscribers.size===0&&Se(d,c)},3e3))})}var Vu={stack:"dbcore",level:0,name:"Cache",create:function(n){var i=n.schema.name;return o(o({},n),{transaction:function(s,u,c){var d,g,y=n.transaction(s,u,c);return u==="readwrite"&&(g=(d=new AbortController).signal,c=function(x){return function(){if(d.abort(),u==="readwrite"){for(var P=new Set,E=0,_=s;E<_.length;E++){var M=_[E],C=Sn["idb://".concat(i,"/").concat(M)];if(C){var T=n.table(M),A=C.optimisticOps.filter(function(oe){return oe.trans===y});if(y._explicit&&x&&y.mutatedParts)for(var O=0,D=Object.values(C.queries.query);O<D.length;O++)for(var R=0,j=(Q=D[O]).slice();R<j.length;R++)io((V=j[R]).obsSet,y.mutatedParts)&&(Se(Q,V),V.subscribers.forEach(function(oe){return P.add(oe)}));else if(0<A.length){C.optimisticOps=C.optimisticOps.filter(function(oe){return oe.trans!==y});for(var K=0,H=Object.values(C.queries.query);K<H.length;K++)for(var Q,V,Y,re=0,ee=(Q=H[K]).slice();re<ee.length;re++)(V=ee[re]).res!=null&&y.mutatedParts&&(x&&!V.dirty?(Y=Object.isFrozen(V.res),Y=Rs(V.res,V.req,A,T,V,Y),V.dirty?(Se(Q,V),V.subscribers.forEach(function(oe){return P.add(oe)})):Y!==V.res&&(V.res=Y,V.promise=ie.resolve({result:Y}))):(V.dirty&&Se(Q,V),V.subscribers.forEach(function(oe){return P.add(oe)})))}}}P.forEach(function(oe){return oe()})}}},y.addEventListener("abort",c(!1),{signal:g}),y.addEventListener("error",c(!1),{signal:g}),y.addEventListener("complete",c(!0),{signal:g})),y},table:function(s){var u=n.table(s),c=u.schema.primaryKey;return o(o({},u),{mutate:function(d){var g=ue.trans;if(c.outbound||g.db._options.cache==="disabled"||g.explicit||g.idbtrans.mode!=="readwrite")return u.mutate(d);var y=Sn["idb://".concat(i,"/").concat(s)];return y?(g=u.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||co(c,d).some(function(x){return x==null}))?(y.optimisticOps.push(d),d.mutatedParts&&Yr(d.mutatedParts),g.then(function(x){0<x.numFailures&&(Se(y.optimisticOps,d),(x=Ds(0,d,x))&&y.optimisticOps.push(x),d.mutatedParts&&Yr(d.mutatedParts))}),g.catch(function(){Se(y.optimisticOps,d),d.mutatedParts&&Yr(d.mutatedParts)})):g.then(function(x){var P=Ds(0,o(o({},d),{values:d.values.map(function(E,_){var M;return x.failures[_]?E:(E=(M=c.keyPath)!==null&&M!==void 0&&M.includes(".")?nt(E):o({},E),Ce(E,c.keyPath,x.results[_]),E)})}),x);y.optimisticOps.push(P),queueMicrotask(function(){return d.mutatedParts&&Yr(d.mutatedParts)})}),g):u.mutate(d)},query:function(d){if(!As(ue,u)||!Ms("query",d))return u.query(d);var g=((P=ue.trans)===null||P===void 0?void 0:P.db._options.cache)==="immutable",_=ue,y=_.requery,x=_.signal,P=(function(T,A,O,D){var R=Sn["idb://".concat(T,"/").concat(A)];if(!R)return[];if(!(A=R.queries[O]))return[null,!1,R,null];var j=A[(D.query?D.query.index.name:null)||""];if(!j)return[null,!1,R,null];switch(O){case"query":var K=j.find(function(H){return H.req.limit===D.limit&&H.req.values===D.values&&Fs(H.req.query.range,D.query.range)});return K?[K,!0,R,j]:[j.find(function(H){return("limit"in H.req?H.req.limit:1/0)>=D.limit&&(!D.values||H.req.values)&&Uu(H.req.query.range,D.query.range)}),!1,R,j];case"count":return K=j.find(function(H){return Fs(H.req.query.range,D.query.range)}),[K,!!K,R,j]}})(i,s,"query",d),E=P[0],_=P[1],M=P[2],C=P[3];return E&&_?E.obsSet=d.obsSet:(_=u.query(d).then(function(T){var A=T.result;if(E&&(E.res=A),g){for(var O=0,D=A.length;O<D;++O)Object.freeze(A[O]);Object.freeze(A)}else T.result=nt(A);return T}).catch(function(T){return C&&E&&Se(C,E),Promise.reject(T)}),E={obsSet:d.obsSet,promise:_,subscribers:new Set,type:"query",req:d,dirty:!1},C?C.push(E):(C=[E],(M=M||(Sn["idb://".concat(i,"/").concat(s)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=C)),Hu(E,C,y,x),E.promise.then(function(T){return{result:Rs(T.result,d,M?.optimisticOps,u,E,g)}})}})}})}};function Jr(n,i){return new Proxy(n,{get:function(s,u,c){return u==="db"?i:Reflect.get(s,u,c)}})}var Yt=(He.prototype.version=function(n){if(isNaN(n)||n<.1)throw new ce.Type("Given version is not a positive number");if(n=Math.round(10*n)/10,this.idbdb||this._state.isBeingOpened)throw new ce.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var i=this._versions,s=i.filter(function(u){return u._cfg.version===n})[0];return s||(s=new this.Version(n),i.push(s),i.sort(Iu),s.stores({}),this._state.autoSchema=!1,s)},He.prototype._whenReady=function(n){var i=this;return this.idbdb&&(this._state.openComplete||ue.letThrough||this._vip)?n():new ie(function(s,u){if(i._state.openComplete)return u(new ce.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen)return void u(new ce.DatabaseClosed);i.open().catch(p)}i._state.dbReadyPromise.then(s,u)}).then(n)},He.prototype.use=function(n){var i=n.stack,s=n.create,u=n.level,c=n.name;return c&&this.unuse({stack:i,name:c}),n=this._middlewares[i]||(this._middlewares[i]=[]),n.push({stack:i,create:s,level:u??10,name:c}),n.sort(function(d,g){return d.level-g.level}),this},He.prototype.unuse=function(n){var i=n.stack,s=n.name,u=n.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(c){return u?c.create!==u:!!s&&c.name!==s})),this},He.prototype.open=function(){var n=this;return _n($e,function(){return Nu(n)})},He.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,i=Bn.indexOf(this);if(0<=i&&Bn.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new ie(function(s){n.dbReadyResolve=s}),n.openCanceller=new ie(function(s,u){n.cancelOpen=u}))},He.prototype.close=function(s){var i=(s===void 0?{disableAutoOpen:!0}:s).disableAutoOpen,s=this._state;i?(s.isBeingOpened&&s.cancelOpen(new ce.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new ce.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},He.prototype.delete=function(n){var i=this;n===void 0&&(n={disableAutoOpen:!0});var s=0<arguments.length&&typeof arguments[0]!="object",u=this._state;return new ie(function(c,d){function g(){i.close(n);var y=i._deps.indexedDB.deleteDatabase(i.name);y.onsuccess=Be(function(){var x,P,E;x=i._deps,P=i.name,E=x.indexedDB,x=x.IDBKeyRange,to(E)||P===jr||eo(E,x).delete(P).catch(p),c()}),y.onerror=Nt(d),y.onblocked=i._fireOnBlocked}if(s)throw new ce.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(g):g()})},He.prototype.backendDB=function(){return this.idbdb},He.prototype.isOpen=function(){return this.idbdb!==null},He.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},He.prototype.hasFailed=function(){return this._state.dbOpenError!==null},He.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(He.prototype,"tables",{get:function(){var n=this;return f(this._allTables).map(function(i){return n._allTables[i]})},enumerable:!1,configurable:!0}),He.prototype.transaction=function(){var n=(function(i,s,u){var c=arguments.length;if(c<2)throw new ce.InvalidArgument("Too few arguments");for(var d=new Array(c-1);--c;)d[c-1]=arguments[c];return u=d.pop(),[i,ze(d),u]}).apply(this,arguments);return this._transaction.apply(this,n)},He.prototype._transaction=function(n,i,s){var u=this,c=ue.trans;c&&c.db===this&&n.indexOf("!")===-1||(c=null);var d,g,y=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");try{if(g=i.map(function(P){if(P=P instanceof u.Table?P.name:P,typeof P!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return P}),n=="r"||n===Wi)d=Wi;else{if(n!="rw"&&n!=Ui)throw new ce.InvalidArgument("Invalid transaction mode: "+n);d=Ui}if(c){if(c.mode===Wi&&d===Ui){if(!y)throw new ce.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&g.forEach(function(P){if(c&&c.storeNames.indexOf(P)===-1){if(!y)throw new ce.SubTransaction("Table "+P+" not included in parent transaction.");c=null}}),y&&c&&!c.active&&(c=null)}}catch(P){return c?c._promise(null,function(E,_){_(P)}):Ue(P)}var x=(function P(E,_,M,C,T){return ie.resolve().then(function(){var A=ue.transless||ue,O=E._createTransaction(_,M,E._dbSchema,C);if(O.explicit=!0,A={trans:O,transless:A},C)O.idbtrans=C.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(j){return j.name===Ft.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return P(E,_,M,null,T)})):Ue(j)}var D,R=St(T);return R&&Kn(),A=ie.follow(function(){var j;(D=T.call(O,O))&&(R?(j=un.bind(null,null),D.then(j,j)):typeof D.next=="function"&&typeof D.throw=="function"&&(D=uo(D)))},A),(D&&typeof D.then=="function"?ie.resolve(D).then(function(j){return O.active?j:Ue(new ce.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return D})).then(function(j){return C&&O._resolve(),O._completion.then(function(){return j})}).catch(function(j){return O._reject(j),Ue(j)})})}).bind(null,this,d,g,c,s);return c?c._promise(d,x,"lock"):ue.trans?_n(ue.transless,function(){return u._whenReady(x)}):this._whenReady(x)},He.prototype.table=function(n){if(!k(this._allTables,n))throw new ce.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},He);function He(n,i){var s=this;this._middlewares={},this.verno=0;var u=He.dependencies;this._options=i=o({addons:He.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},u=i.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,d,g,y,x,P={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:p,dbReadyPromise:null,cancelOpen:p,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};P.dbReadyPromise=new ie(function(_){P.dbReadyResolve=_}),P.openCanceller=new ie(function(_,M){P.cancelOpen=M}),this._state=P,this.name=n,this.on=nr(this,"populate","blocked","versionchange","close",{ready:[X,p]}),this.once=function(_,M){var C=function(){for(var T=[],A=0;A<arguments.length;A++)T[A]=arguments[A];s.on(_).unsubscribe(C),M.apply(s,T)};return s.on(_,C)},this.on.ready.subscribe=we(this.on.ready.subscribe,function(_){return function(M,C){He.vip(function(){var T,A=s._state;A.openComplete?(A.dbOpenError||ie.resolve().then(M),C&&_(M)):A.onReadyBeingFired?(A.onReadyBeingFired.push(M),C&&_(M)):(_(M),T=s,C||_(function O(){T.on.ready.unsubscribe(M),T.on.ready.unsubscribe(O)}))})}}),this.Collection=(c=this,rr(Eu.prototype,function(D,O){this.db=c;var C=cs,T=null;if(O)try{C=O()}catch(R){T=R}var A=D._ctx,O=A.table,D=O.hook.reading.fire;this._ctx={table:O,index:A.index,isPrimKey:!A.index||O.schema.primKey.keyPath&&A.index===O.schema.primKey.name,range:C,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:A.or,valueMapper:D!==v?D:null}})),this.Table=(d=this,rr(ps.prototype,function(_,M,C){this.db=d,this._tx=C,this.name=_,this.schema=M,this.hook=d._allTables[_]?d._allTables[_].hook:nr(null,{creating:[N,p],reading:[S,v],updating:[Z,p],deleting:[W,p]})})),this.Transaction=(g=this,rr(Mu.prototype,function(_,M,C,T,A){var O=this;_!=="readonly"&&M.forEach(function(D){D=(D=C[D])===null||D===void 0?void 0:D.yProps,D&&(M=M.concat(D.map(function(R){return R.updatesTable})))}),this.db=g,this.mode=_,this.storeNames=M,this.schema=C,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=nr(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ie(function(D,R){O._resolve=D,O._reject=R}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function(D){var R=O.active;return O.active=!1,O.on.error.fire(D),O.parent?O.parent._reject(D):R&&O.idbtrans&&O.idbtrans.abort(),Ue(D)})})),this.Version=(y=this,rr(Bu.prototype,function(_){this.db=y,this._cfg={version:_,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,rr(_s.prototype,function(_,M,C){if(this.db=x,this._ctx={table:_,index:M===":id"?null:M,or:C},this._cmp=this._ascending=Pe,this._descending=function(T,A){return Pe(A,T)},this._max=function(T,A){return 0<Pe(T,A)?T:A},this._min=function(T,A){return Pe(T,A)<0?T:A},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new ce.MissingAPI})),this.on("versionchange",function(_){0<_.newVersion?console.warn("Another connection wants to upgrade database '".concat(s.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(s.name,"'. Closing db now to resume the delete request.")),s.close({disableAutoOpen:!1})}),this.on("blocked",function(_){!_.newVersion||_.newVersion<_.oldVersion?console.warn("Dexie.delete('".concat(s.name,"') was blocked")):console.warn("Upgrade '".concat(s.name,"' blocked by other connection holding version ").concat(_.oldVersion/10))}),this._maxKey=ar(i.IDBKeyRange),this._createTransaction=function(_,M,C,T){return new s.Transaction(_,M,C,s._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(_){s.on("blocked").fire(_),Bn.filter(function(M){return M.name===s.name&&M!==s&&!M._state.vcFired}).map(function(M){return M.on("versionchange").fire(_)})},this.use(qu),this.use(Vu),this.use(Wu),this.use($u),this.use(Lu);var E=new Proxy(this,{get:function(_,M,C){if(M==="_vip")return!0;if(M==="table")return function(A){return Jr(s.table(A),E)};var T=Reflect.get(_,M,C);return T instanceof ps?Jr(T,E):M==="tables"?T.map(function(A){return Jr(A,E)}):M==="_createTransaction"?function(){return Jr(T.apply(this,arguments),E)}:T}});this.vip=E,u.forEach(function(_){return _(s)})}var Qr,At=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",zu=(ho.prototype.subscribe=function(n,i,s){return this._subscribe(n&&typeof n!="function"?n:{next:n,error:i,complete:s})},ho.prototype[At]=function(){return this},ho);function ho(n){this._subscribe=n}try{Qr={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{Qr={indexedDB:null,IDBKeyRange:null}}function Is(n){var i,s=!1,u=new zu(function(c){var d=St(n),g,y=!1,x={},P={},E={get closed(){return y},unsubscribe:function(){y||(y=!0,g&&g.abort(),_&&fn.storagemutated.unsubscribe(C))}};c.start&&c.start(E);var _=!1,M=function(){return qi(T)},C=function(A){Gr(x,A),io(P,x)&&M()},T=function(){var A,O,D;!y&&Qr.indexedDB&&(x={},A={},g&&g.abort(),g=new AbortController,D=(function(R){var j=In();try{d&&Kn();var K=an(n,R);return K=d?K.finally(un):K}finally{j&&jn()}})(O={subscr:A,signal:g.signal,requery:M,querier:n,trans:null}),Promise.resolve(D).then(function(R){s=!0,i=R,y||O.signal.aborted||(x={},(function(j){for(var K in j)if(k(j,K))return;return 1})(P=A)||_||(fn(sr,C),_=!0),qi(function(){return!y&&c.next&&c.next(R)}))},function(R){s=!1,["DatabaseClosedError","AbortError"].includes(R?.name)||y||qi(function(){y||c.error&&c.error(R)})}))};return setTimeout(M,0),E});return u.hasValue=function(){return s},u.getValue=function(){return i},u}var Cn=Yt;function po(n){var i=dn;try{dn=!0,fn.storagemutated.fire(n),ao(n,!0)}finally{dn=i}}I(Cn,o(o({},q),{delete:function(n){return new Cn(n,{addons:[]}).delete()},exists:function(n){return new Cn(n,{addons:[]}).open().then(function(i){return i.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return i=Cn.dependencies,s=i.indexedDB,i=i.IDBKeyRange,(to(s)?Promise.resolve(s.databases()).then(function(u){return u.map(function(c){return c.name}).filter(function(c){return c!==jr})}):eo(s,i).toCollection().primaryKeys()).then(n)}catch{return Ue(new ce.MissingAPI)}var i,s},defineClass:function(){return function(n){m(this,n)}},ignoreTransaction:function(n){return ue.trans?_n(ue.transless,n):n()},vip:no,async:function(n){return function(){try{var i=uo(n.apply(this,arguments));return i&&typeof i.then=="function"?i:ie.resolve(i)}catch(s){return Ue(s)}}},spawn:function(n,i,s){try{var u=uo(n.apply(s,i||[]));return u&&typeof u.then=="function"?u:ie.resolve(u)}catch(c){return Ue(c)}},currentTransaction:{get:function(){return ue.trans||null}},waitFor:function(n,i){return i=ie.resolve(typeof n=="function"?Cn.ignoreTransaction(n):n).timeout(i||6e4),ue.trans?ue.trans.waitFor(i):i},Promise:ie,debug:{get:function(){return U},set:function(n){de(n)}},derive:z,extend:m,props:I,override:we,Events:nr,on:fn,liveQuery:Is,extendObservabilitySet:Gr,getByKeyPath:xe,setByKeyPath:Ce,delByKeyPath:function(n,i){typeof i=="string"?Ce(n,i,void 0):"length"in i&&[].map.call(i,function(s){Ce(n,s,void 0)})},shallowClone:qe,deepClone:nt,getObjectDiff:lo,cmp:Pe,asap:pe,minKey:-1/0,addons:[],connections:Bn,errnames:Ft,dependencies:Qr,cache:Sn,semVer:"4.2.0",version:"4.2.0".split(".").map(function(n){return parseInt(n)}).reduce(function(n,i,s){return n+i/Math.pow(10,2*s)})})),Cn.maxKey=ar(Cn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(fn(sr,function(n){dn||(n=new CustomEvent(zi,{detail:n}),dn=!0,dispatchEvent(n),dn=!1)}),addEventListener(zi,function(n){n=n.detail,dn||po(n)}));var qn,dn=!1,js=function(){};return typeof BroadcastChannel<"u"&&((js=function(){(qn=new BroadcastChannel(zi)).onmessage=function(n){return n.data&&po(n.data)}})(),typeof qn.unref=="function"&&qn.unref(),fn(sr,function(n){dn||qn.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Yt.disableBfCache&&n.persisted){U&&console.debug("Dexie: handling persisted pagehide"),qn?.close();for(var i=0,s=Bn;i<s.length;i++)s[i].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(n){!Yt.disableBfCache&&n.persisted&&(U&&console.debug("Dexie: handling persisted pageshow"),js(),po({all:new ct(-1/0,[[]])}))})),ie.rejectionMapper=function(n,i){return!n||n instanceof Rt||n instanceof TypeError||n instanceof SyntaxError||!n.name||!L[n.name]?n:(i=new L[n.name](i||n.message,n),"stack"in n&&B(i,"stack",{get:function(){return this.inner.stack}}),i)},de(U),o(Yt,Object.freeze({__proto__:null,Dexie:Yt,liveQuery:Is,Entity:fs,cmp:Pe,PropModification:ir,replacePrefix:function(n,i){return new ir({replacePrefix:[n,i]})},add:function(n){return new ir({add:n})},remove:function(n){return new ir({remove:n})},default:Yt,RangeSet:ct,mergeRanges:cr,rangesOverlap:Ps}),{default:Yt}),Yt})})(fi)),fi.exports}var Pf=Cf();const Ko=xf(Pf),ya=Symbol.for("Dexie"),Pi=globalThis[ya]||(globalThis[ya]=Ko);if(Ko.semVer!==Pi.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ko.semVer} and ${Pi.semVer}`);const{liveQuery:Wd,mergeRanges:Ud,rangesOverlap:Hd,RangeSet:Vd,cmp:zd,Entity:Gd,PropModification:Yd,replacePrefix:Xd,add:Jd,remove:Qd,DexieYProvider:Zd}=Pi;class kf extends Pi{projects;settings;constructor(){super("OralHistoryDB"),this.version(1).stores({projects:"id, name, created, updated",settings:"id"})}async saveProject(t){try{const r=await Promise.all(t.audioFiles.map(async a=>{let l=a.arrayBuffer;return a.blob&&!l&&(l=await a.blob.arrayBuffer()),{id:a.id,name:a.name,arrayBuffer:l,duration:a.duration||0,offset:a.offset||0,volume:a.volume||1,muted:a.muted||!1}})),o={id:t.id,name:t.name,created:t.created instanceof Date?t.created.toISOString():new Date().toISOString(),updated:new Date().toISOString(),audioFiles:r,transcript:{segments:(t.transcript?.segments||[]).map(a=>({id:a.id,start:a.start||0,end:a.end||0,text:a.text||"",speaker:a.speaker}))},speakers:(t.speakers||[]).map(a=>({id:a.id,name:a.name,prefix:a.prefix}))};console.log("Saving to IndexedDB:",o),await this.projects.put(o)}catch(r){throw console.error("Failed to save project:",r),r}}async getProject(t){const r=await this.projects.get(t);if(!r)return;const o=await Promise.all(r.audioFiles.map(async a=>{let l,f;return a.arrayBuffer&&(l=new Blob([a.arrayBuffer],{type:"audio/mpeg"}),f=URL.createObjectURL(l)),{...a,blob:l,url:f,arrayBuffer:a.arrayBuffer}}));return{id:r.id,name:r.name,created:new Date(r.created),updated:new Date(r.updated),audioFiles:o,transcript:r.transcript,speakers:r.speakers}}async getAllProjects(){const t=await this.projects.toArray();return Promise.all(t.map(async r=>{const o=await Promise.all(r.audioFiles.map(async a=>{let l,f;return a.arrayBuffer&&(l=new Blob([a.arrayBuffer],{type:"audio/mpeg"}),f=URL.createObjectURL(l)),{...a,blob:l,url:f,arrayBuffer:a.arrayBuffer}}));return{id:r.id,name:r.name,created:new Date(r.created),updated:new Date(r.updated),audioFiles:o,transcript:r.transcript,speakers:r.speakers}}))}async deleteProject(t){await this.projects.delete(t)}}const Mn=new kf;function ot(e,t,r,o){return new(r||(r=Promise))((function(a,l){function f(w){try{m(o.next(w))}catch(b){l(b)}}function h(w){try{m(o.throw(w))}catch(b){l(b)}}function m(w){var b;w.done?a(w.value):(b=w.value,b instanceof r?b:new r((function(k){k(b)}))).then(f,h)}m((o=o.apply(e,t||[])).next())}))}class Or{constructor(){this.listeners={}}on(t,r,o){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(r),o?.once){const a=()=>{this.un(t,a),this.un(t,r)};return this.on(t,a),a}return()=>this.un(t,r)}un(t,r){var o;(o=this.listeners[t])===null||o===void 0||o.delete(r)}once(t,r){return this.on(t,r,{once:!0})}unAll(){this.listeners={}}emit(t,...r){this.listeners[t]&&this.listeners[t].forEach((o=>o(...r)))}}const ri={decode:function(e,t){return ot(this,void 0,void 0,(function*(){const r=new AudioContext({sampleRate:t});return r.decodeAudioData(e).finally((()=>r.close()))}))},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),(function(r){const o=r[0];if(o.some((a=>a>1||a<-1))){const a=o.length;let l=0;for(let f=0;f<a;f++){const h=Math.abs(o[f]);h>l&&(l=h)}for(const f of r)for(let h=0;h<a;h++)f[h]/=l}})(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:r=>e?.[r],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function xu(e,t){const r=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[o,a]of Object.entries(t))if(o==="children"&&a)for(const[l,f]of Object.entries(a))f instanceof Node?r.appendChild(f):typeof f=="string"?r.appendChild(document.createTextNode(f)):r.appendChild(xu(l,f));else o==="style"?Object.assign(r.style,a):o==="textContent"?r.textContent=a:r.setAttribute(o,a.toString());return r}function ba(e,t,r){const o=xu(e,t||{});return r?.appendChild(o),o}var Tf=Object.freeze({__proto__:null,createElement:ba,default:ba});const Ef={fetchBlob:function(e,t,r){return ot(this,void 0,void 0,(function*(){const o=yield fetch(e,r);if(o.status>=400)throw new Error(`Failed to fetch ${e}: ${o.status} (${o.statusText})`);return(function(a,l){ot(this,void 0,void 0,(function*(){if(!a.body||!a.headers)return;const f=a.body.getReader(),h=Number(a.headers.get("Content-Length"))||0;let m=0;const w=k=>ot(this,void 0,void 0,(function*(){m+=k?.length||0;const I=Math.round(m/h*100);l(I)})),b=()=>ot(this,void 0,void 0,(function*(){let k;try{k=yield f.read()}catch{return}k.done||(w(k.value),yield b())}));b()}))})(o.clone(),t),o.blob()}))}};class Of extends Or{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)}),{once:!0})}onMediaEvent(t,r,o){return this.media.addEventListener(t,r,o),()=>this.media.removeEventListener(t,r,o)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,r){const o=this.getSrc();if(t&&o===t)return;this.revokeSrc();const a=r instanceof Blob&&(this.canPlayType(r.type)||!t)?URL.createObjectURL(r):t;if(o&&this.media.removeAttribute("src"),a||t)try{this.media.src=a}catch{this.media.src=t}}destroy(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load())}setMediaElement(t){this.media=t}play(){return ot(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(t){if(t instanceof DOMException&&t.name==="AbortError")return;throw t}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=Math.max(0,Math.min(t,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,r){r!=null&&(this.media.preservesPitch=r),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class er extends Or{constructor(t,r){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const o=this.parentFromOptionsContainer(t.container);this.parent=o;const[a,l]=this.initHtml();o.appendChild(a),this.container=a,this.scrollContainer=l.querySelector(".scroll"),this.wrapper=l.querySelector(".wrapper"),this.canvasWrapper=l.querySelector(".canvases"),this.progressWrapper=l.querySelector(".progress"),this.cursor=l.querySelector(".cursor"),r&&l.appendChild(r),this.initEvents()}parentFromOptionsContainer(t){let r;if(typeof t=="string"?r=document.querySelector(t):t instanceof HTMLElement&&(r=t),!r)throw new Error("Container not found");return r}initEvents(){const t=r=>{const o=this.wrapper.getBoundingClientRect(),a=r.clientX-o.left,l=r.clientY-o.top;return[a/o.width,l/o.height]};if(this.wrapper.addEventListener("click",(r=>{const[o,a]=t(r);this.emit("click",o,a)})),this.wrapper.addEventListener("dblclick",(r=>{const[o,a]=t(r);this.emit("dblclick",o,a)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",(()=>{const{scrollLeft:r,scrollWidth:o,clientWidth:a}=this.scrollContainer,l=r/o,f=(r+a)/o;this.emit("scroll",l,f,r,r+a)})),typeof ResizeObserver=="function"){const r=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{r().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push((function(t,r,o,a,l=3,f=0,h=100){if(!t)return()=>{};const m=matchMedia("(pointer: coarse)").matches;let w=()=>{};const b=k=>{if(k.button!==f)return;k.preventDefault(),k.stopPropagation();let I=k.clientX,$=k.clientY,B=!1;const z=Date.now(),te=pe=>{if(pe.preventDefault(),pe.stopPropagation(),m&&Date.now()-z<h)return;const xe=pe.clientX,Ce=pe.clientY,qe=xe-I,st=Ce-$;if(B||Math.abs(qe)>l||Math.abs(st)>l){const ze=t.getBoundingClientRect(),{left:xt,top:tt}=ze;B||(o?.(I-xt,$-tt),B=!0),r(qe,st,xe-xt,Ce-tt),I=xe,$=Ce}},se=pe=>{if(B){const xe=pe.clientX,Ce=pe.clientY,qe=t.getBoundingClientRect(),{left:st,top:ze}=qe;a?.(xe-st,Ce-ze)}w()},le=pe=>{pe.relatedTarget&&pe.relatedTarget!==document.documentElement||se(pe)},we=pe=>{B&&(pe.stopPropagation(),pe.preventDefault())},ae=pe=>{B&&pe.preventDefault()};document.addEventListener("pointermove",te),document.addEventListener("pointerup",se),document.addEventListener("pointerout",le),document.addEventListener("pointercancel",le),document.addEventListener("touchmove",ae,{passive:!1}),document.addEventListener("click",we,{capture:!0}),w=()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",se),document.removeEventListener("pointerout",le),document.removeEventListener("pointercancel",le),document.removeEventListener("touchmove",ae),setTimeout((()=>{document.removeEventListener("click",we,{capture:!0})}),10)}};return t.addEventListener("pointerdown",b),()=>{w(),t.removeEventListener("pointerdown",b)}})(this.wrapper,((t,r,o)=>{this.emit("drag",Math.max(0,Math.min(1,o/this.wrapper.getBoundingClientRect().width)))}),(t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}),(t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))})))}getHeight(t,r){var o;const a=((o=this.audioData)===null||o===void 0?void 0:o.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const l=this.parent.clientHeight||128;return r?.every((f=>!f.overlay))?l/a:l}return 128}initHtml(){const t=document.createElement("div"),r=t.attachShadow({mode:"open"}),o=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return r.innerHTML=`
      <style${o?` nonce="${o}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,r]}setOptions(t){if(this.options.container!==t.container){const r=this.parentFromOptionsContainer(t.container);r.appendChild(this.container),this.parent=r}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:r}=this.scrollContainer,o=r*t;this.setScroll(o)}destroy(){var t,r;this.subscriptions.forEach((o=>o())),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(r=this.unsubscribeOnScroll)===null||r===void 0||r.forEach((o=>o())),this.unsubscribeOnScroll=[]}createDelay(t=10){let r,o;const a=()=>{r&&clearTimeout(r),o&&o()};return this.timeouts.push(a),()=>new Promise(((l,f)=>{a(),o=f,r=setTimeout((()=>{r=void 0,o=void 0,l()}),t)}))}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const r=document.createElement("canvas"),o=r.getContext("2d"),a=r.height*(window.devicePixelRatio||1),l=o.createLinearGradient(0,0,0,a),f=1/(t.length-1);return t.forEach(((h,m)=>{const w=m*f;l.addColorStop(w,h)})),l}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,r,o,a){const l=t[0],f=t[1]||t[0],h=l.length,{width:m,height:w}=o.canvas,b=w/2,k=this.getPixelRatio(),I=r.barWidth?r.barWidth*k:1,$=r.barGap?r.barGap*k:r.barWidth?I/2:0,B=r.barRadius||0,z=m/(I+$)/h,te=B&&"roundRect"in o?"roundRect":"rect";o.beginPath();let se=0,le=0,we=0;for(let ae=0;ae<=h;ae++){const pe=Math.round(ae*z);if(pe>se){const qe=Math.round(le*b*a),st=qe+Math.round(we*b*a)||1;let ze=b-qe;r.barAlign==="top"?ze=0:r.barAlign==="bottom"&&(ze=w-st),o[te](se*(I+$),ze,I,st,B),se=pe,le=0,we=0}const xe=Math.abs(l[ae]||0),Ce=Math.abs(f[ae]||0);xe>le&&(le=xe),Ce>we&&(we=Ce)}o.fill(),o.closePath()}renderLineWaveform(t,r,o,a){const l=f=>{const h=t[f]||t[0],m=h.length,{height:w}=o.canvas,b=w/2,k=o.canvas.width/m;o.moveTo(0,b);let I=0,$=0;for(let B=0;B<=m;B++){const z=Math.round(B*k);if(z>I){const se=b+(Math.round($*b*a)||1)*(f===0?-1:1);o.lineTo(I,se),I=z,$=0}const te=Math.abs(h[B]||0);te>$&&($=te)}o.lineTo(I,b)};o.beginPath(),l(0),l(1),o.fill(),o.closePath()}renderWaveform(t,r,o){if(o.fillStyle=this.convertColorValues(r.waveColor),r.renderFunction)return void r.renderFunction(t,o);let a=r.barHeight||1;if(r.normalize){const l=Array.from(t[0]).reduce(((f,h)=>Math.max(f,Math.abs(h))),0);a=l?1/l:1}r.barWidth||r.barGap||r.barAlign?this.renderBarWaveform(t,r,o,a):this.renderLineWaveform(t,r,o,a)}renderSingleCanvas(t,r,o,a,l,f,h){const m=this.getPixelRatio(),w=document.createElement("canvas");w.width=Math.round(o*m),w.height=Math.round(a*m),w.style.width=`${o}px`,w.style.height=`${a}px`,w.style.left=`${Math.round(l)}px`,f.appendChild(w);const b=w.getContext("2d");if(this.renderWaveform(t,r,b),w.width>0&&w.height>0){const k=w.cloneNode(),I=k.getContext("2d");I.drawImage(w,0,0),I.globalCompositeOperation="source-in",I.fillStyle=this.convertColorValues(r.progressColor),I.fillRect(0,0,w.width,w.height),h.appendChild(k)}}renderMultiCanvas(t,r,o,a,l,f){const h=this.getPixelRatio(),{clientWidth:m}=this.scrollContainer,w=o/h;let b=Math.min(er.MAX_CANVAS_WIDTH,m,w),k={};if(r.barWidth||r.barGap){const te=r.barWidth||.5,se=te+(r.barGap||te/2);b%se!=0&&(b=Math.floor(b/se)*se)}if(b===0)return;const I=te=>{if(te<0||te>=$||k[te])return;k[te]=!0;const se=te*b;let le=Math.min(w-se,b);if(r.barWidth||r.barGap){const ae=r.barWidth||.5,pe=ae+(r.barGap||ae/2);le=Math.floor(le/pe)*pe}if(le<=0)return;const we=t.map((ae=>{const pe=Math.floor(se/w*ae.length),xe=Math.floor((se+le)/w*ae.length);return ae.slice(pe,xe)}));this.renderSingleCanvas(we,r,le,a,se,l,f)},$=Math.ceil(w/b);if(!this.isScrollable){for(let te=0;te<$;te++)I(te);return}const B=this.scrollContainer.scrollLeft/w,z=Math.floor(B*$);if(I(z-1),I(z),I(z+1),$>1){const te=this.on("scroll",(()=>{const{scrollLeft:se}=this.scrollContainer,le=Math.floor(se/w*$);Object.keys(k).length>er.MAX_NODES&&(l.innerHTML="",f.innerHTML="",k={}),I(le-1),I(le),I(le+1)}));this.unsubscribeOnScroll.push(te)}}renderChannel(t,r,o,a){var{overlay:l}=r,f=(function(b,k){var I={};for(var $ in b)Object.prototype.hasOwnProperty.call(b,$)&&k.indexOf($)<0&&(I[$]=b[$]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function"){var B=0;for($=Object.getOwnPropertySymbols(b);B<$.length;B++)k.indexOf($[B])<0&&Object.prototype.propertyIsEnumerable.call(b,$[B])&&(I[$[B]]=b[$[B]])}return I})(r,["overlay"]);const h=document.createElement("div"),m=this.getHeight(f.height,f.splitChannels);h.style.height=`${m}px`,l&&a>0&&(h.style.marginTop=`-${m}px`),this.canvasWrapper.style.minHeight=`${m}px`,this.canvasWrapper.appendChild(h);const w=h.cloneNode();this.progressWrapper.appendChild(w),this.renderMultiCanvas(t,f,o,m,h,w)}render(t){return ot(this,void 0,void 0,(function*(){var r;this.timeouts.forEach((m=>m())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const o=this.getPixelRatio(),a=this.scrollContainer.clientWidth,l=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=l>a;const f=this.options.fillParent&&!this.isScrollable,h=(f?a:l)*o;if(this.wrapper.style.width=f?"100%":`${l}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let m=0;m<t.numberOfChannels;m++){const w=Object.assign(Object.assign({},this.options),(r=this.options.splitChannels)===null||r===void 0?void 0:r[m]);this.renderChannel([t.getChannelData(m)],w,h,m)}else{const m=[t.getChannelData(0)];t.numberOfChannels>1&&m.push(t.getChannelData(1)),this.renderChannel(m,this.options,h,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((o=>o())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:r}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:o}=this.progressWrapper.getBoundingClientRect();let a=o-r;a*=2,a=a<0?Math.floor(a):Math.ceil(a),a/=2,this.scrollContainer.scrollLeft+=a}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,r=!1){const{scrollLeft:o,scrollWidth:a,clientWidth:l}=this.scrollContainer,f=t*a,h=o,m=o+l,w=l/2;if(this.isDragging)f+30>m?this.scrollContainer.scrollLeft+=30:f-30<h&&(this.scrollContainer.scrollLeft-=30);else{(f<h||f>m)&&(this.scrollContainer.scrollLeft=f-(this.options.autoCenter?w:0));const b=f-o-w;r&&this.options.autoCenter&&b>0&&(this.scrollContainer.scrollLeft+=Math.min(b,10))}{const b=this.scrollContainer.scrollLeft,k=b/a,I=(b+l)/a;this.emit("scroll",k,I,b,b+l)}}renderProgress(t,r){if(isNaN(t))return;const o=100*t;this.canvasWrapper.style.clipPath=`polygon(${o}% 0%, 100% 0%, 100% 100%, ${o}% 100%)`,this.progressWrapper.style.width=`${o}%`,this.cursor.style.left=`${o}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${t*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,r)}exportImage(t,r,o){return ot(this,void 0,void 0,(function*(){const a=this.canvasWrapper.querySelectorAll("canvas");if(!a.length)throw new Error("No waveform data");if(o==="dataURL"){const l=Array.from(a).map((f=>f.toDataURL(t,r)));return Promise.resolve(l)}return Promise.all(Array.from(a).map((l=>new Promise(((f,h)=>{l.toBlob((m=>{m?f(m):h(new Error("Could not export image"))}),t,r)})))))}))}}er.MAX_CANVAS_WIDTH=8e3,er.MAX_NODES=10;class Af extends Or{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",(()=>{requestAnimationFrame((()=>{this.emit("tick")}))})),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Po extends Or{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return ot(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then((r=>{if(r.status>=400)throw new Error(`Failed to fetch ${t}: ${r.status} (${r.statusText})`);return r.arrayBuffer()})).then((r=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(r))).then((r=>{this.currentSrc===t&&(this.buffer=r,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())}))}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let r=this.playedDuration*this._playbackRate;(r>=this.duration||r<0)&&(r=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,r),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return ot(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){const r=t-this.currentTime,o=this.bufferNode;o?.stop(this.audioContext.currentTime+r),o?.addEventListener("ended",(()=>{o===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(t){return ot(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(t)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const r=!this.paused;r&&this._pause(),this.playedDuration=t/this._playbackRate,r&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,r;return(t=this._duration)!==null&&t!==void 0?t:((r=this.buffer)===null||r===void 0?void 0:r.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const r=this.buffer.numberOfChannels;for(let o=0;o<r;o++)t.push(this.buffer.getChannelData(o));return t}removeAttribute(t){switch(t){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const Mf={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class tr extends Of{static create(t){return new tr(t)}constructor(t){const r=t.media||(t.backend==="WebAudio"?new Po:void 0);super({media:r,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},Mf,t),this.timer=new Af;const o=r?void 0:this.getMediaElement();this.renderer=new er(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const a=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:l,duration:f}=this.options;(a||l&&f)&&this.load(a,l,f).catch((()=>null))}))}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t),this.stopAtPosition!=null&&this.isPlaying()&&t>=this.stopAtPosition&&this.pause()}})))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const t=this.updateProgress();this.emit("timeupdate",t)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var t;this.emit("error",(t=this.getMediaElement().error)!==null&&t!==void 0?t:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((t,r)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,r))})),this.renderer.on("dblclick",((t,r)=>{this.emit("dblclick",t,r)})),this.renderer.on("scroll",((t,r,o,a)=>{const l=this.getDuration();this.emit("scroll",t*l,r*l,o,a)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(t=>{this.emit("dragstart",t)})),this.renderer.on("dragend",(t=>{this.emit("dragend",t)})));{let t;this.subscriptions.push(this.renderer.on("drag",(r=>{if(!this.options.interact)return;let o;this.renderer.renderProgress(r),clearTimeout(t),this.isPlaying()?o=0:this.options.dragToSeek===!0?o=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(o=this.options.dragToSeek.debounceTime),t=setTimeout((()=>{this.seekTo(r)}),o),this.emit("interaction",r*this.getDuration()),this.emit("drag",r)})))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach((r=>{this.registerPlugin(r)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((t=>t())),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=ri.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=ri.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){if(this.plugins.includes(t))return t;t._init(this),this.plugins.push(t);const r=t.once("destroy",(()=>{this.plugins=this.plugins.filter((o=>o!==t)),this.subscriptions=this.subscriptions.filter((o=>o!==r))}));return this.subscriptions.push(r),t}unregisterPlugin(t){this.plugins=this.plugins.filter((r=>r!==t)),t.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const r=t/this.getDuration();this.renderer.setScrollPercentage(r)}getActivePlugins(){return this.plugins}loadAudio(t,r,o,a){return ot(this,void 0,void 0,(function*(){var l;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,!r&&!o){const h=this.options.fetchParams||{};window.AbortController&&!h.signal&&(this.abortController=new AbortController,h.signal=(l=this.abortController)===null||l===void 0?void 0:l.signal);const m=b=>this.emit("loading",b);r=yield Ef.fetchBlob(t,m,h);const w=this.options.blobMimeType;w&&(r=new Blob([r],{type:w}))}this.setSrc(t,r);const f=yield new Promise((h=>{const m=a||this.getDuration();m?h(m):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>h(this.getDuration())),{once:!0}))}));if(!t&&!r){const h=this.getMediaElement();h instanceof Po&&(h.duration=f)}if(o)this.decodedData=ri.createBuffer(o,f||0);else if(r){const h=yield r.arrayBuffer();this.decodedData=yield ri.decode(h,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(t,r,o){return ot(this,void 0,void 0,(function*(){try{return yield this.loadAudio(t,void 0,r,o)}catch(a){throw this.emit("error",a),a}}))}loadBlob(t,r,o){return ot(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",t,r,o)}catch(a){throw this.emit("error",a),a}}))}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:r=8e3,precision:o=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const a=Math.min(t,this.decodedData.numberOfChannels),l=[];for(let f=0;f<a;f++){const h=this.decodedData.getChannelData(f),m=[],w=h.length/r;for(let b=0;b<r;b++){const k=h.slice(Math.floor(b*w),Math.ceil((b+1)*w));let I=0;for(let $=0;$<k.length;$++){const B=k[$];Math.abs(B)>Math.abs(I)&&(I=B)}m.push(Math.round(I*o)/o)}l.push(m)}return l}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){this.stopAtPosition=null,super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const r=this.getDuration()*t;this.setTime(r)}play(t,r){const o=Object.create(null,{play:{get:()=>super.play}});return ot(this,void 0,void 0,(function*(){t!=null&&this.setTime(t);const a=yield o.play.call(this);return r!=null&&(this.media instanceof Po?this.media.stopAt(r):this.stopAtPosition=r),a}))}playPause(){return ot(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return ot(this,arguments,void 0,(function*(t="image/png",r=1,o="dataURL"){return this.renderer.exportImage(t,r,o)}))}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach((r=>r.destroy())),this.subscriptions.forEach((r=>r())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}tr.BasePlugin=class extends Or{constructor(e){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=e}onInit(){}_init(e){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((e=>e())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},tr.dom=Tf;const Df={class:"audio-manager"},Rf={class:"file-upload"},Ff=["disabled"],If=["disabled"],jf={key:0,class:"sync-info"},Kf={key:0},Bf={class:"audio-list"},Nf={class:"audio-info"},$f={class:"file-name"},Lf={class:"duration"},qf={class:"audio-controls"},Wf={key:0,class:"fix-toggle"},Uf=["checked","onChange"],Hf=["value","onInput","disabled"],Vf={key:0,class:"offset-buttons"},zf=["onClick"],Gf=["onClick"],Yf=["onClick"],Xf=["onClick"],Jf=["onClick"],Qf=["onClick"],Zf=["value","onInput"],ed=["onClick"],td=["onClick"],nd={class:"waveform-container"},rd={class:"waveform-info"},id={class:"offset-label"},od={key:0,class:"offset-label"},sd=["id"],ad={key:0,class:"waveform-sync-controls"},ud=["onClick","disabled"],ld=["src","onLoadedmetadata"],cd={key:1,class:"playback-controls"},fd={class:"time-display"},dd=["max","value"],hd={key:2,class:"transcription-status"},pd=Ri({__name:"AudioManager",props:{audioFiles:{}},emits:["update","timeUpdate","addSegment"],setup(e,{expose:t,emit:r}){const o=e,a=r,l=rt(new Map),f=rt(!1),h=rt(0),m=rt("1"),w=rt(!1),b=rt(!1),k=rt("correlation"),I=rt(null),$=rt(""),B=rt(new Map),z=rt(null),te={correlation:"",timestamp:"",manual:""},se=xi(()=>{const L=Ot(),q=o.audioFiles.map((p,v)=>L[v]+p.duration);return Math.max(...q,0)}),le=xi(()=>o.audioFiles.length<2||b.value?!1:!o.audioFiles.slice(1).every(q=>q.isFixed)),we=async L=>{const q=L.target;if(!q.files)return;const p=[];for(const v of Array.from(q.files)){if(v.type!=="audio/mpeg")continue;const S={id:`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:v.name,blob:v,arrayBuffer:void 0,url:URL.createObjectURL(v),duration:0,offset:0,volume:1,muted:!1,isFixed:!1};p.push(S)}a("update",[...o.audioFiles,...p])},ae=(L,q)=>{const p=q.target,v=[...o.audioFiles];v[L].duration=p.duration,a("update",v)},pe=(L,q)=>{if(L===0)return;const p=q.target,v=[...o.audioFiles];v[L].offset=parseFloat(p.value)||0,a("update",v)},xe=(L,q)=>{if(L===0)return;const p=[...o.audioFiles];p[L].offset=Math.round((p[L].offset+q)*100)/100,a("update",p)},Ce=L=>{const q=[...o.audioFiles];q[L].isFixed=!q[L].isFixed,a("update",q)},qe=(L,q)=>{const p=q.target,v=[...o.audioFiles];v[L].volume=parseFloat(p.value)/100,a("update",v);const S=l.value.get(L);S&&(S.volume=v[L].volume)},st=L=>{const q=[...o.audioFiles];q[L].muted=!q[L].muted,a("update",q);const p=l.value.get(L);p&&(p.muted=q[L].muted)},ze=L=>{const q=[...o.audioFiles],p=q[L].id;B.value.has(p)&&(B.value.get(p).destroy(),B.value.delete(p)),URL.revokeObjectURL(q[L].url),q.splice(L,1),a("update",q)},xt=()=>{f.value?nt():tt()},tt=()=>{const L=Ot();console.log("=== PlayAll Debug ==="),console.log("Audio files count:",o.audioFiles.length),console.log("Audio refs count:",l.value.size),o.audioFiles.forEach((q,p)=>{const v=l.value.get(p);if(!v){console.warn(`Audio element ${p} is null`);return}const S=L[p],F=h.value-S;if(console.log(`File ${p}: volume=${q.volume}, muted=${q.muted}, localTime=${F.toFixed(2)}`),F<0){v.pause(),v.currentTime=0,console.log(`File ${p}: Not started yet (localTime=${F})`);return}if(F>=v.duration){v.pause(),console.log(`File ${p}: Already ended (localTime=${F}, duration=${v.duration})`);return}v.currentTime=F,v.volume=q.volume,v.muted=q.muted,v.playbackRate=parseFloat(m.value),v.play().then(()=>{console.log(`File ${p}: Playing successfully`)}).catch(N=>{console.error(`File ${p}: Failed to play:`,N)})}),f.value=!0},nt=()=>{l.value.forEach(L=>{L&&L.pause()}),f.value=!1},jt=L=>{const q=L.target;h.value=parseFloat(q.value);const p=Ot();o.audioFiles.forEach((v,S)=>{const F=l.value.get(S);if(!F)return;o.audioFiles[S];const N=p[S],W=h.value-N;F.currentTime=Math.max(0,Math.min(W,F.duration))})},rn=()=>{h.value=Math.min(se.value,h.value+5),jt({target:{value:h.value.toString()}})},We=()=>{h.value=Math.max(0,h.value-5),jt({target:{value:h.value.toString()}})},Re=()=>{l.value.forEach(L=>{L&&(L.playbackRate=parseFloat(m.value))})},Se=()=>{if(l.value.size===0)return;const L=Ot();for(let q=0;q<o.audioFiles.length;q++){const p=l.value.get(q);if(p&&!p.paused){const v=L[q];h.value=p.currentTime+v,a("timeUpdate",h.value);break}}},at=async()=>{if(o.audioFiles.length!==0){w.value=!0,$.value="...";try{const L=await Mn.settings.get("api_settings");if(L?.provider==="openai"&&L.apiKey){$.value="OpenAI Whisper API...";const q=o.audioFiles[0];if(!q.blob)throw new Error("");const p=25*1024*1024;if(q.blob.size>p){$.value=`25MB${(q.blob.size/1024/1024).toFixed(1)}MB`;const v=q.blob.slice(0,p),S=await ga(v,L.apiKey,q.offset);S.segments.forEach(F=>{a("addSegment",F)}),$.value=`: ${S.segments.length}`}else{const v=await ga(q.blob,L.apiKey,q.offset);v.segments.forEach(S=>{a("addSegment",S)}),$.value=`: ${v.segments.length}`}}else[{id:Date.now().toString()+"_1",start:0,end:10,text:"[API]",speaker:"1"},{id:Date.now().toString()+"_2",start:10,end:20,text:"[OpenAI API]",speaker:"2"}].forEach(p=>{a("addSegment",p)}),$.value="API",("webkitSpeechRecognition"in window||"SpeechRecognition"in window)&&confirm(`
`)&&await ut()}catch(L){console.error("Transcription error:",L),$.value=`: ${L.message||""}`}finally{w.value=!1,setTimeout(()=>{$.value=""},1e4)}}},ut=async()=>{const L=window.webkitSpeechRecognition||window.SpeechRecognition;if(!L){$.value="";return}const q=new L;q.continuous=!0,q.interimResults=!0;const p=["ja-JP","ja","en-US","en"];let v=0;q.lang=p[v],q.onresult=S=>{for(let F=S.resultIndex;F<S.results.length;F++)if(S.results[F].isFinal){const N={id:Date.now().toString(),start:h.value,end:h.value+5,text:S.results[F][0].transcript,speaker:"1"};a("addSegment",N),$.value=`: ${S.results[F][0].transcript}`}},q.onerror=S=>{console.log("Recognition error:",S.error),S.error==="language-not-supported"&&v<p.length-1?(v++,q.lang=p[v],$.value=`: ${p[v]}`,q.start()):$.value=`: ${S.error}`},q.onend=()=>{$.value=""},nt(),h.value=0,tt(),$.value="...",q.start(),setTimeout(()=>{q.stop(),nt()},3e4)},St=async()=>{if(!(o.audioFiles.length<2)){b.value=!0,I.value=null;try{const L=[...o.audioFiles];let q=0,p=0;if(k.value==="correlation"){const v=await ma(o.audioFiles[0].blob),S=[0];for(let F=1;F<o.audioFiles.length;F++){if(L[F].isFixed){S.push(L[F].offset),console.log(`File ${F}: Skipped (Fixed)`);continue}const N=await ma(o.audioFiles[F].blob),W=await bf(v,N);S.push(W.offset),q+=W.confidence,p++,console.log(`File ${F}: Offset=${W.offset.toFixed(2)}s, Confidence=${(W.confidence*100).toFixed(1)}%`)}L.forEach((F,N)=>{F.isFixed||(F.offset=Math.round(S[N]*100)/100)}),I.value={method:"correlation",confidence:p>0?q/p:0}}else if(k.value==="timestamp"){alert("");return}else{I.value={method:"manual"},alert("");return}a("update",L),alert(`${te[k.value]}`)}catch(L){console.error("Auto-sync error:",L),alert("")}finally{b.value=!1}}},lt=L=>{if(!L||isNaN(L))return"00:00";const q=Math.floor(L/60),p=Math.floor(L%60);return`${q.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`},Rt=async L=>{if(!L.url)return;if(B.value.has(L.id)){console.log(`WARNING: Waveform already exists for ${L.id}, skipping initialization`);return}await gi();const q=document.querySelector(`#waveform-${L.id}`);if(!q){console.warn(`Container not found for ${L.id}`);return}for(;q.firstChild;)q.removeChild(q.firstChild);try{const S=tr.create({container:q,waveColor:"#4CAF50",progressColor:"#2196F3",cursorColor:"#FF5722",height:60,normalize:!0,backend:"WebAudio",interact:!0,minPxPerSec:100,barWidth:1,barGap:0,barHeight:1});await S.load(L.url),B.value.set(L.id,S),S.on("ready",()=>{bn(L.id)}),S.on("seek",F=>{const N=o.audioFiles.indexOf(L),W=l.value.get(N);if(W){const Z=W.duration*F,J=Ot(),X=Z+J[N];Ft(X)}})}catch(p){console.error("Failed to initialize waveform:",p)}},bn=L=>{const q=B.value.get(L);if(!q)return;const p=o.audioFiles.find(W=>W.id===L);if(!p)return;const v=o.audioFiles.indexOf(p),F=Ot()[v],N=h.value-F;if(N>=0&&N<=p.duration){const W=N/p.duration;isNaN(W)||q.seekTo(W)}else q.seekTo(0)},on=L=>{const q=o.audioFiles[L],p=o.audioFiles[0];if(z.value===q.id){z.value=null,Xe(p),Xe(q);return}z.value=q.id,Xe(p,"#FF9800","#FF5722"),Xe(q,"#2196F3","#1976D2"),setTimeout(()=>{z.value===q.id&&(Xe(p),Xe(q),z.value=null)},3e3)},Xe=async(L,q="#4CAF50",p="#2196F3")=>{if(!L.url)return;B.value.has(L.id)&&(B.value.get(L.id).destroy(),B.value.delete(L.id)),await gi();const v=document.querySelector(`#waveform-${L.id}`);if(v){v.innerHTML="";try{const N=tr.create({container:v,waveColor:q,progressColor:p,cursorColor:"#FF5722",height:60,normalize:!0,backend:"WebAudio",interact:!0,minPxPerSec:100,barWidth:1,barGap:0,barHeight:1});await N.load(L.url),B.value.set(L.id,N);const W=o.audioFiles.indexOf(L),Z=l.value.get(W);if(Z){const J=Z.currentTime/Z.duration;isNaN(J)||N.seekTo(J)}}catch(S){console.error("Failed to recreate waveform:",S)}}},Ft=L=>{h.value=L,jt({target:{value:L.toString()}}),f.value&&(nt(),setTimeout(()=>tt(),100))},Ot=()=>{const L=[],q=Math.min(0,...o.audioFiles.map(p=>p.offset));for(let p=0;p<o.audioFiles.length;p++)L[p]=o.audioFiles[p].offset-q;return L};Xn(()=>h.value,()=>{o.audioFiles.forEach(L=>{bn(L.id)})}),Xn(()=>o.audioFiles,async(L,q)=>{const p=new Set(q?.map(S=>S.id)||[]),v=new Set(L.map(S=>S.id));for(const S of p)if(!v.has(S)&&B.value.has(S)){console.log(`Destroying waveform for removed file: ${S}`);try{B.value.get(S).destroy()}catch(F){console.error(`Error destroying waveform ${S}:`,F)}B.value.delete(S)}for(const S of L)!p.has(S.id)&&S.url&&!B.value.has(S.id)&&(console.log(`Initializing waveform for new file: ${S.id}`),await Rt(S))},{deep:!1,immediate:!0}),es(()=>{B.value.forEach(L=>{L.destroy()}),B.value.clear()});const ce=(L,q)=>{q?(l.value.set(L,q),console.log(`Audio ref set for index ${L}`)):l.value.delete(L)};return t({seekToTime:Ft}),(L,q)=>(De(),Ne("div",Df,[G("div",Rf,[G("input",{type:"file",multiple:"",accept:".mp3",onChange:we,ref:"fileInput",style:{display:"none"}},null,544),G("button",{onClick:q[0]||(q[0]=p=>L.$refs.fileInput?.click()),class:"btn btn-secondary"}," MP3 "),G("button",{onClick:at,class:"btn btn-primary",disabled:L.audioFiles.length===0||w.value},Ve(w.value?"...":""),9,Ff),G("button",{onClick:St,class:"btn btn-secondary",disabled:!le.value},Ve(b.value?"...":""),9,If),yi(G("select",{"onUpdate:modelValue":q[1]||(q[1]=p=>k.value=p),class:"sync-method-select"},[...q[3]||(q[3]=[G("option",{value:"correlation"},"",-1),G("option",{value:"timestamp"},"",-1),G("option",{value:"manual"},"",-1)])],512),[[jo,k.value]])]),I.value?(De(),Ne("div",jf,[G("span",null,": "+Ve(te[I.value.method]),1),I.value.confidence?(De(),Ne("span",Kf,": "+Ve((I.value.confidence*100).toFixed(1))+"%",1)):kt("",!0)])):kt("",!0),G("div",Bf,[(De(!0),Ne(Tt,null,oi(L.audioFiles,(p,v)=>(De(),Ne("div",{key:p.id,class:"audio-item"},[G("div",Nf,[G("span",$f,Ve(p.name),1),G("span",Lf,Ve(lt(p.duration)),1)]),G("div",qf,[v>0?(De(),Ne("label",Wf,[G("input",{type:"checkbox",checked:p.isFixed,onChange:S=>Ce(v)},null,40,Uf),G("span",null,Ve(p.isFixed?"":"")+" ",1)])):kt("",!0),G("div",{class:Qn(["offset-control",{disabled:p.isFixed||v===0}])},[q[5]||(q[5]=G("label",null,":",-1)),G("input",{type:"number",value:v===0?0:p.offset,onInput:S=>pe(v,S),disabled:p.isFixed||v===0,step:"0.01",class:"offset-input"},null,40,Hf),q[6]||(q[6]=G("span",null,"",-1)),v>0&&!p.isFixed?(De(),Ne("div",Vf,[G("button",{onClick:S=>xe(v,-1),class:"btn btn-tiny"}," -1s",8,zf),G("button",{onClick:S=>xe(v,-.1),class:"btn btn-tiny"}," -0.1s",8,Gf),G("button",{onClick:S=>xe(v,-.01),class:"btn btn-tiny"}," -0.01s",8,Yf),q[4]||(q[4]=G("span",{class:"separator"},"|",-1)),G("button",{onClick:S=>xe(v,.01),class:"btn btn-tiny"}," +0.01s",8,Xf),G("button",{onClick:S=>xe(v,.1),class:"btn btn-tiny"}," +0.1s",8,Jf),G("button",{onClick:S=>xe(v,1),class:"btn btn-tiny"}," +1s",8,Qf)])):kt("",!0)],2),G("label",null,[q[7]||(q[7]=An(" : ",-1)),G("input",{type:"range",min:0,max:100,value:p.volume*100,onInput:S=>qe(v,S),class:"volume-slider"},null,40,Zf)]),G("button",{onClick:S=>st(v),class:Qn(["btn btn-small",{muted:p.muted}])},Ve(p.muted?"":""),11,ed),G("button",{onClick:S=>ze(v),class:"btn btn-small btn-danger"},"  ",8,td)]),G("div",nd,[G("div",rd,[G("span",id,": "+Ve(p.offset.toFixed(2))+"",1),p.offset<0?(De(),Ne("span",od,""+Ve(Math.abs(p.offset).toFixed(2))+"",1)):kt("",!0)]),G("div",{id:`waveform-${p.id}`,class:"waveform"},null,8,sd),v>0?(De(),Ne("div",ad,[G("button",{onClick:S=>on(v),class:"btn btn-tiny",disabled:p.isFixed},"   ",8,ud)])):kt("",!0)]),G("audio",{ref_for:!0,ref:S=>ce(v,S),src:p.url,onLoadedmetadata:S=>ae(v,S),onTimeupdate:Se},null,40,ld)]))),128))]),L.audioFiles.length>0?(De(),Ne("div",cd,[G("button",{onClick:We,class:"btn btn-small"},""),G("button",{onClick:xt,class:"btn btn-primary"},Ve(f.value?"":""),1),G("button",{onClick:rn,class:"btn btn-small"},""),G("span",fd,Ve(lt(h.value))+" / "+Ve(lt(se.value)),1),G("label",null,[q[9]||(q[9]=An(" : ",-1)),yi(G("select",{"onUpdate:modelValue":q[2]||(q[2]=p=>m.value=p),onChange:Re},[...q[8]||(q[8]=[Fc('<option value="0.5" data-v-cb32c9fb>0.5x</option><option value="0.75" data-v-cb32c9fb>0.75x</option><option value="1" data-v-cb32c9fb>1.0x</option><option value="1.25" data-v-cb32c9fb>1.25x</option><option value="1.5" data-v-cb32c9fb>1.5x</option><option value="2" data-v-cb32c9fb>2.0x</option>',6)])],544),[[jo,m.value]])]),G("input",{type:"range",min:0,max:se.value,value:h.value,onInput:jt,class:"seek-bar"},null,40,dd)])):kt("",!0),$.value?(De(),Ne("div",hd,Ve($.value),1)):kt("",!0)]))}}),is=(e,t)=>{const r=e.__vccOpts||e;for(const[o,a]of t)r[o]=a;return r},md=is(pd,[["__scopeId","data-v-cb32c9fb"]]),gd={class:"transcript-editor"},vd={class:"editor-header"},yd={class:"speaker-list"},bd={class:"editor-content"},_d={key:0,class:"empty-state"},wd={key:1,class:"segments"},xd={class:"segment-controls"},Sd=["value","onChange"],Cd=["value"],Pd={class:"timestamp"},kd=["onClick"],Td=["onClick"],Ed=["value","onInput","onClick","placeholder"],Od=Ri({__name:"TranscriptEditor",props:{transcript:{},speakers:{},currentTime:{}},emits:["update","seekTo"],setup(e,{emit:t}){const r=e,o=t,a=rt(null),l=B=>r.currentTime>=B.start&&r.currentTime<=B.end,f=B=>{if(!B)return"";const z=r.speakers.find(te=>te.id===B);return z?z.prefix:""},h=(B,z)=>{const te=z.target,se={...r.transcript};se.segments[B].speaker=te.value||void 0,o("update",se)},m=(B,z)=>{const te=z.target,se={...r.transcript};se.segments[B].text=te.value,o("update",se)},w=B=>{const z={...r.transcript};z.segments.splice(B,1),o("update",z)},b=()=>{const B={id:Date.now().toString(),start:r.currentTime,end:r.currentTime+10,text:"",speaker:r.speakers[0]?.id},z={...r.transcript};z.segments.push(B),z.segments.sort((te,se)=>te.start-se.start),o("update",z)},k=B=>{o("seekTo",B.start)},I=B=>{o("seekTo",B.start)},$=B=>{if(!B||isNaN(B))return"00:00";const z=Math.floor(B/60),te=Math.floor(B%60);return`${z.toString().padStart(2,"0")}:${te.toString().padStart(2,"0")}`};return Xn(()=>r.currentTime,B=>{const z=r.transcript.segments.find(te=>B>=te.start&&B<=te.end);if(z){a.value=z.id;const te=document.querySelector(".segment.active");te&&te.scrollIntoView({behavior:"smooth",block:"center"})}}),(B,z)=>(De(),Ne("div",gd,[G("div",vd,[z[0]||(z[0]=G("h2",null,"",-1)),G("div",yd,[(De(!0),Ne(Tt,null,oi(B.speakers,te=>(De(),Ne("span",{key:te.id,class:"speaker-tag"},Ve(te.prefix)+": "+Ve(te.name),1))),128))])]),G("div",bd,[B.transcript.segments.length===0?(De(),Ne("div",_d,[z[1]||(z[1]=G("p",null,"",-1)),G("button",{onClick:b,class:"btn btn-primary"},"  ")])):(De(),Ne("div",wd,[(De(!0),Ne(Tt,null,oi(B.transcript.segments,(te,se)=>(De(),Ne("div",{key:te.id,class:Qn(["segment",{active:l(te)}])},[G("div",xd,[G("select",{value:te.speaker,onChange:le=>h(se,le),class:"speaker-select"},[z[2]||(z[2]=G("option",{value:""},"",-1)),(De(!0),Ne(Tt,null,oi(B.speakers,le=>(De(),Ne("option",{key:le.id,value:le.id},Ve(le.prefix)+": "+Ve(le.name),9,Cd))),128))],40,Sd),G("span",Pd,Ve($(te.start))+" - "+Ve($(te.end)),1),G("button",{onClick:le=>k(te),class:"btn btn-small"},"  ",8,kd),G("button",{onClick:le=>w(se),class:"btn btn-small btn-danger"},"  ",8,Td)]),G("textarea",{value:te.text,onInput:le=>m(se,le),onClick:le=>I(te),class:"segment-text",placeholder:`${f(te.speaker)}: ...`,rows:"3"},null,40,Ed)],2))),128))])),G("div",{class:"editor-actions"},[G("button",{onClick:b,class:"btn btn-secondary"},"  ")])])]))}}),Ad=is(Od,[["__scopeId","data-v-1163d9a3"]]),Md={class:"api-settings"},Dd={class:"api-provider"},Rd={key:0,class:"api-key-input"},Fd={key:1,class:"api-status"},Id=Ri({__name:"ApiSettings",setup(e,{expose:t}){const r=rt(""),o=rt(""),a=xi(()=>r.value==="openai"&&o.value?o.value:""),l=async()=>{try{await Mn.settings.put({id:"api_settings",provider:r.value,apiKey:a.value,updatedAt:Date.now()}),console.log("API settings saved")}catch(m){console.error("Failed to save API settings:",m)}},f=async()=>{try{const m=await Mn.settings.get("api_settings");m&&(r.value=m.provider||"",m.provider==="openai"&&(o.value=m.apiKey||""))}catch(m){console.error("Failed to load API settings:",m)}},h=async()=>{confirm("API")&&(o.value="",r.value="",await l())};return Zo(()=>{f()}),t({getApiSettings:()=>({provider:r.value,apiKey:a.value})}),(m,w)=>(De(),Ne("div",Md,[w[8]||(w[8]=G("h3",null,"API",-1)),G("div",Dd,[G("label",null,[w[3]||(w[3]=An(" API: ",-1)),yi(G("select",{"onUpdate:modelValue":w[0]||(w[0]=b=>r.value=b),onChange:l},[...w[2]||(w[2]=[G("option",{value:""},"",-1),G("option",{value:"openai"},"OpenAI Whisper API",-1),G("option",{value:"google"},"Google Speech-to-Text ()",-1),G("option",{value:"azure"},"Azure Speech Services ()",-1)])],544),[[jo,r.value]])])]),r.value==="openai"?(De(),Ne("div",Rd,[G("label",null,[w[4]||(w[4]=An(" OpenAI API: ",-1)),yi(G("input",{type:"password","onUpdate:modelValue":w[1]||(w[1]=b=>o.value=b),onBlur:l,placeholder:"sk-...",class:"api-key-field"},null,544),[[hf,o.value]])]),w[5]||(w[5]=G("div",{class:"api-help"},[G("p",null,"API:"),G("ol",null,[G("li",null,[G("a",{href:"https://platform.openai.com/",target:"_blank"},"OpenAI Platform"),An("")]),G("li",null,""),G("li",null,"API Keys "),G("li",null,"")]),G("p",{class:"warning"}," APIPC")],-1))])):kt("",!0),a.value?(De(),Ne("div",Fd,[w[6]||(w[6]=G("span",{class:"status-icon"},"",-1)),w[7]||(w[7]=An(" API ",-1)),G("button",{onClick:h,class:"btn btn-small btn-danger"},"")])):kt("",!0)]))}}),jd=is(Id,[["__scopeId","data-v-87cab7ef"]]),Kd={class:"app"},Bd={class:"header"},Nd={class:"actions"},$d=["disabled"],Ld={class:"main-content"},qd=Ri({__name:"App",setup(e){const t=rt(null),r=rt(0),o=rt(null),a=async()=>{const I={id:Date.now().toString(),name:` ${new Date().toLocaleDateString()}`,created:new Date,updated:new Date,audioFiles:[],transcript:{segments:[]},speakers:[{id:"1",name:"",prefix:"I"},{id:"2",name:"",prefix:"R"}]};await Mn.saveProject(I),t.value=I},l=async k=>{t.value&&(t.value.audioFiles=k,await Mn.saveProject(t.value))},f=async k=>{t.value&&(t.value.transcript=k,await Mn.saveProject(t.value))},h=k=>{r.value=k},m=k=>{o.value&&o.value.seekToTime(k)},w=k=>{t.value&&(t.value.transcript.segments.push(k),t.value.transcript.segments.sort((I,$)=>I.start-$.start),f(t.value.transcript))},b=()=>{if(!t.value)return;const k=t.value.transcript.segments.map(z=>{const te=t.value?.speakers.find(le=>le.id===z.speaker);return`${te?`${te.prefix}: `:""}${z.text}`}).join(`

`),I=new Blob([k],{type:"text/plain"}),$=URL.createObjectURL(I),B=document.createElement("a");B.href=$,B.download=`${t.value.name}.txt`,B.click(),URL.revokeObjectURL($)};return Zo(async()=>{try{const k=await Mn.getAllProjects();k.length>0&&(t.value=k[0],console.log("Loaded project:",t.value.name),console.log("Audio files:",t.value.audioFiles.length))}catch(k){console.error("Failed to load projects:",k)}}),(k,I)=>(De(),Ne("div",Kd,[G("header",Bd,[I[0]||(I[0]=G("h1",null,"",-1)),G("div",Nd,[G("button",{onClick:a,class:"btn btn-primary"},""),G("button",{onClick:b,class:"btn",disabled:!t.value},"",8,$d)])]),G("main",Ld,[t.value?(De(),ui(jd,{key:0})):kt("",!0),t.value?(De(),ui(md,{key:1,ref_key:"audioManagerRef",ref:o,audioFiles:t.value.audioFiles,onUpdate:l,onTimeUpdate:h,onAddSegment:w},null,8,["audioFiles"])):kt("",!0),t.value?(De(),ui(Ad,{key:2,transcript:t.value.transcript,speakers:t.value.speakers,currentTime:r.value,onUpdate:f,onSeekTo:m},null,8,["transcript","speakers","currentTime"])):kt("",!0)])]))}});gf(qd).mount("#app");
